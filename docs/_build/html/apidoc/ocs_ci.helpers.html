

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ocs_ci.helpers package &mdash; OCS-CI  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ocs_ci.ocs package" href="ocs_ci.ocs.html" />
    <link rel="prev" title="ocs_ci.framework.tests package" href="ocs_ci.framework.tests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> OCS-CI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Package documentations:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">ocs_ci modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ocs_ci.html">ocs_ci package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="ocs_ci.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.deployment.html">ocs_ci.deployment package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.framework.html">ocs_ci.framework package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ocs_ci.helpers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.ocs.html">ocs_ci.ocs package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.tests.html">ocs_ci.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.utility.html">ocs_ci.utility package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ocs_ci.html#module-ocs_ci">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code_review.html">Code review/contribution best practices in OCS-CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guidelines.html">Coding guidelines for OCS-CI project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supported_platforms.html">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-getting-various-ocs-image-versions">usage for getting various ocs image versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-cleanup">usage for cleanup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-to-shutdown-aws-nodes-when-nodes-are-not-in-use">usage to shutdown AWS nodes when nodes are not in use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-ocs-build-tool">Usage for ocs-build tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing_tests.html">Writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stable_branch.html">Stable Branch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readmefiles/conf.README.html">Config directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fixture_usage.html">Guidelines for fixtures usage in OCS-CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workarounds.html">Tracking of workarounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_guidelines.html">OCS-CI Release Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usecases/index.html">Common Use cases and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multicluster_test_example.html">Multi-cluster test example</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OCS-CI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">ocs_ci</a> &raquo;</li>
        
          <li><a href="ocs_ci.html">ocs_ci package</a> &raquo;</li>
        
      <li>ocs_ci.helpers package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/ocs_ci.helpers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ocs-ci-helpers-package">
<h1>ocs_ci.helpers package<a class="headerlink" href="#ocs-ci-helpers-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ocs_ci.helpers.bdi_helpers">
<span id="ocs-ci-helpers-bdi-helpers-module"></span><h2>ocs_ci.helpers.bdi_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.bdi_helpers" title="Permalink to this headline">¶</a></h2>
<p>Helper functions specific for bdi</p>
<dl class="function">
<dt id="ocs_ci.helpers.bdi_helpers.clean_temp_files">
<code class="sig-prename descclassname">ocs_ci.helpers.bdi_helpers.</code><code class="sig-name descname">clean_temp_files</code><span class="sig-paren">(</span><em class="sig-param">class_instance</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.bdi_helpers.clean_temp_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes temporary files created during the execution</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.bdi_helpers.init_configure_workload_yaml">
<code class="sig-prename descclassname">ocs_ci.helpers.bdi_helpers.</code><code class="sig-name descname">init_configure_workload_yaml</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em>, <em class="sig-param">image=None</em>, <em class="sig-param">sf=1</em>, <em class="sig-param">pvc_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.bdi_helpers.init_configure_workload_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the “configure-workload.yaml” and sets all the relevant parameters according to the type of execution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – The name of the namespace</p></li>
<li><p><strong>image</strong> (<em>str</em>) – The name of the image to pull</p></li>
<li><p><strong>sf</strong> (<em>int</em>) – scale factor. Can be 1, 10, 100…</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – The name of the pvc to be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dictionary representing the yaml with all the relevant changes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.bdi_helpers.init_data_load_yaml">
<code class="sig-prename descclassname">ocs_ci.helpers.bdi_helpers.</code><code class="sig-name descname">init_data_load_yaml</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em>, <em class="sig-param">image=None</em>, <em class="sig-param">pvc_name=None</em>, <em class="sig-param">secret_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.bdi_helpers.init_data_load_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the “data-load-job” and sets all the relevant parameters according to the type of execution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – The name of the namespace</p></li>
<li><p><strong>image</strong> (<em>str</em>) – The name of the image to pull</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – The name of the pvc to be used</p></li>
<li><p><strong>secret_name</strong> (<em>str</em>) – The secret name to be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dictionary representing the yaml with all the relevant changes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.bdi_helpers.init_run_workload_yaml">
<code class="sig-prename descclassname">ocs_ci.helpers.bdi_helpers.</code><code class="sig-name descname">init_run_workload_yaml</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em>, <em class="sig-param">image=None</em>, <em class="sig-param">pvc_name=None</em>, <em class="sig-param">secret_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.bdi_helpers.init_run_workload_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the “run-workload-job” and sets all the relevant parameters according to the type of execution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – The name of the namespace</p></li>
<li><p><strong>image</strong> (<em>str</em>) – The name of the image to pull</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – The name of the pvc to be used</p></li>
<li><p><strong>secret_name</strong> (<em>str</em>) – The secret name to be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dictionary representing the yaml with all the relevant changes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.bdi_helpers.install_db2u">
<code class="sig-prename descclassname">ocs_ci.helpers.bdi_helpers.</code><code class="sig-name descname">install_db2u</code><span class="sig-paren">(</span><em class="sig-param">class_instance</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.bdi_helpers.install_db2u" title="Permalink to this definition">¶</a></dt>
<dd><p>Chart installation</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.cluster_exp_helpers">
<span id="ocs-ci-helpers-cluster-exp-helpers-module"></span><h2>ocs_ci.helpers.cluster_exp_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.cluster_exp_helpers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.helpers.cluster_exp_helpers.BackgroundOps">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.cluster_exp_helpers.</code><code class="sig-name descname">BackgroundOps</code><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.BackgroundOps" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="ocs_ci.helpers.cluster_exp_helpers.BackgroundOps.EXPANSION_COMPLETED">
<code class="sig-name descname">EXPANSION_COMPLETED</code><em class="property"> = False</em><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.BackgroundOps.EXPANSION_COMPLETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.cluster_exp_helpers.BackgroundOps.wrap">
<code class="sig-name descname">wrap</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.BackgroundOps.wrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps the function to run specific iterations</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if function runs successfully</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.helpers.cluster_exp_helpers.ClusterFiller">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.cluster_exp_helpers.</code><code class="sig-name descname">ClusterFiller</code><span class="sig-paren">(</span><em class="sig-param">pods_to_fill</em>, <em class="sig-param">percent_required_filled</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.ClusterFiller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for performing IOs on the pods</p>
<dl class="method">
<dt id="ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.cluster_filler">
<code class="sig-name descname">cluster_filler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.cluster_filler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.concurrent_copies">
<code class="sig-name descname">concurrent_copies</code><em class="property"> = 5</em><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.concurrent_copies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.filler">
<code class="sig-name descname">filler</code><span class="sig-paren">(</span><em class="sig-param">fill_pod</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.ClusterFiller.filler" title="Permalink to this definition">¶</a></dt>
<dd><p>This function copies the file downloaded by ‘downloader’ function in a
unique directory to increase the cluster space utilization. Currently
it makes 30 copies of the downloaded file in a given directory which is
equivalent to almost 4 GiB of storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fill_pod</strong> – the pod on which the storage space need to be filled.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.cluster_exp_helpers.check_nodes_status">
<code class="sig-prename descclassname">ocs_ci.helpers.cluster_exp_helpers.</code><code class="sig-name descname">check_nodes_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.check_nodes_status" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs in a loop to check the status of nodes. If the node(s) are in NotReady state then an
exception is raised. Note: this function needs to be run as a background thread during the execution of a test</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.cluster_exp_helpers.cluster_copy_ops">
<code class="sig-prename descclassname">ocs_ci.helpers.cluster_exp_helpers.</code><code class="sig-name descname">cluster_copy_ops</code><span class="sig-paren">(</span><em class="sig-param">copy_pod</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.cluster_copy_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to do copy operations in a given pod. Mainly used as a background IO during cluster expansion.
It does of series of copy operations and verifies the data integrity of the files copied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>copy_pod</strong> (<em>pod</em>) – on which copy operations need to be done</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False, if there is data integrity check failure. Else, True</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.cluster_exp_helpers.raw_block_io">
<code class="sig-prename descclassname">ocs_ci.helpers.cluster_exp_helpers.</code><code class="sig-name descname">raw_block_io</code><span class="sig-paren">(</span><em class="sig-param">raw_blk_pod</em>, <em class="sig-param">size='10G'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.cluster_exp_helpers.raw_block_io" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the block ios on pod baased raw block pvc
:param raw_blk_pod: pod on which  block IOs should run
:type raw_blk_pod: pod
:param size: IO size
:type size: str</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.disconnected">
<span id="ocs-ci-helpers-disconnected-module"></span><h2>ocs_ci.helpers.disconnected module<a class="headerlink" href="#module-ocs_ci.helpers.disconnected" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.helpers.disconnected.get_oc_mirror_tool">
<code class="sig-prename descclassname">ocs_ci.helpers.disconnected.</code><code class="sig-name descname">get_oc_mirror_tool</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disconnected.get_oc_mirror_tool" title="Permalink to this definition">¶</a></dt>
<dd><p>Download and install oc mirror tool.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.disconnected.get_opm_tool">
<code class="sig-prename descclassname">ocs_ci.helpers.disconnected.</code><code class="sig-name descname">get_opm_tool</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disconnected.get_opm_tool" title="Permalink to this definition">¶</a></dt>
<dd><p>Download and install opm tool.</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.disruption_helpers">
<span id="ocs-ci-helpers-disruption-helpers-module"></span><h2>ocs_ci.helpers.disruption_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.disruption_helpers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.disruption_helpers.</code><code class="sig-name descname">Disruptions</code><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class contains methods of disrupt operations</p>
<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.check_new_pid">
<code class="sig-name descname">check_new_pid</code><span class="sig-paren">(</span><em class="sig-param">node_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.check_new_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the pid of the daemon has changed from the initially selected pid(daemon_pid attribute)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_name</strong> (<em>str</em>) – Name of node in which the resource daemon is running</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.cluster_kubeconfig">
<code class="sig-name descname">cluster_kubeconfig</code><em class="property"> = ''</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.cluster_kubeconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.daemon_pid">
<code class="sig-name descname">daemon_pid</code><em class="property"> = None</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.daemon_pid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.delete_resource">
<code class="sig-name descname">delete_resource</code><span class="sig-paren">(</span><em class="sig-param">resource_id=0</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.delete_resource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.kill_daemon">
<code class="sig-name descname">kill_daemon</code><span class="sig-paren">(</span><em class="sig-param">node_name=None</em>, <em class="sig-param">check_new_pid=True</em>, <em class="sig-param">kill_signal='9'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.kill_daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill self.resource daemon</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_name</strong> (<em>str</em>) – Name of node in which the resource daemon has
to be killed</p></li>
<li><p><strong>check_new_pid</strong> (<em>bool</em>) – True to check for new pid after killing the
daemon. False to skip the check.</p></li>
<li><p><strong>kill_signal</strong> (<em>str</em>) – kill signal type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.kubeconfig_parameter">
<code class="sig-name descname">kubeconfig_parameter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.kubeconfig_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ‘–kubeconfig &lt;value&gt;’ parameter for the oc command</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The ‘–kubeconfig &lt;value&gt;’ parameter for oc command if the attribute ‘cluster_kubeconfig’ is not empty.</dt><dd><p>Empty string if the the attribute ‘cluster_kubeconfig’ is empty.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.resource">
<code class="sig-name descname">resource</code><em class="property"> = None</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.resource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.resource_count">
<code class="sig-name descname">resource_count</code><em class="property"> = 0</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.resource_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.resource_obj">
<code class="sig-name descname">resource_obj</code><em class="property"> = None</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.resource_obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.select_daemon">
<code class="sig-name descname">select_daemon</code><span class="sig-paren">(</span><em class="sig-param">node_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.select_daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>Select pid of self.resource daemon</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_name</strong> (<em>str</em>) – Name of node in which the resource daemon has
to be selected.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.selector">
<code class="sig-name descname">selector</code><em class="property"> = None</em><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.selector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.disruption_helpers.Disruptions.set_resource">
<code class="sig-name descname">set_resource</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">leader_type='provisioner'</em>, <em class="sig-param">cluster_index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.disruption_helpers.Disruptions.set_resource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.dr_helpers">
<span id="ocs-ci-helpers-dr-helpers-module"></span><h2>ocs_ci.helpers.dr_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.dr_helpers" title="Permalink to this headline">¶</a></h2>
<p>Helper functions specific for DR</p>
<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.check_mirroring_status_ok">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">check_mirroring_status_ok</code><span class="sig-paren">(</span><em class="sig-param">replaying_images=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.check_mirroring_status_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if mirroring status has health OK and expected number of replaying images</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>replaying_images</strong> (<em>int</em>) – Expected number of images in replaying state</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if status contains expected health and states values, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.check_vr_state">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">check_vr_state</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.check_vr_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if all VRs in the given namespace are in expected state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>str</em>) – The VRs state to check for (e.g. ‘primary’, ‘secondary’)</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VR resources</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all VRs are in expected state or were deleted, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.check_vrg_existence">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">check_vrg_existence</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.check_vrg_existence" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if VRG resource exists in the given namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VRG resource</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.check_vrg_state">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">check_vrg_state</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.check_vrg_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if VRG in the given namespace is in expected state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>str</em>) – The VRG state to check for (e.g. ‘primary’, ‘secondary’)</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VRG resources</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if VRG is in expected state or was deleted, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.create_backup_schedule">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">create_backup_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.create_backup_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create backupschedule resource only on active hub</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.enable_fence">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">enable_fence</code><span class="sig-paren">(</span><em class="sig-param">drcluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.enable_fence" title="Permalink to this definition">¶</a></dt>
<dd><p>Once the managed cluster is fenced, all communication
from applications to the ODF external storage cluster will fail</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>drcluster_name</strong> (<em>str</em>) – Name of the DRcluster which needs to be fenced</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.enable_unfence">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">enable_unfence</code><span class="sig-paren">(</span><em class="sig-param">drcluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.enable_unfence" title="Permalink to this definition">¶</a></dt>
<dd><p>The OpenShift cluster to be Unfenced is the one where applications
are not currently running and the cluster that was Fenced earlier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>drcluster_name</strong> (<em>str</em>) – Name of the DRcluster which needs to be fenced</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.failover">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">failover</code><span class="sig-paren">(</span><em class="sig-param">failover_cluster</em>, <em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em>, <em class="sig-param">workload_placement_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.failover" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates Failover action to the specified cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>failover_cluster</strong> (<em>str</em>) – Cluster name to which the workload should be failed over</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace where workload is running</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
<li><p><strong>workload_placement_name</strong> (<em>str</em>) – Placement name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.fence_state">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">fence_state</code><span class="sig-paren">(</span><em class="sig-param">drcluster_name</em>, <em class="sig-param">fence_state</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.fence_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the specified clusterFence state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>drcluster_name</strong> (<em>str</em>) – Name of the DRcluster which needs to be fenced</p></li>
<li><p><strong>fence_state</strong> (<em>str</em>) – Specify the clusterfence state either constants.ACTION_UNFENCE and ACTION_FENCE</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_all_drpolicy">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_all_drpolicy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_all_drpolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all DRPolicy from hub cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all DRPolicy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_current_primary_cluster_name">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_current_primary_cluster_name</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_current_primary_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current primary cluster name based on workload namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Current primary cluster name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_current_secondary_cluster_name">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_current_secondary_cluster_name</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_current_secondary_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current secondary cluster name based on workload namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Current secondary cluster name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_fence_state">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_fence_state</code><span class="sig-paren">(</span><em class="sig-param">drcluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_fence_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the clusterfence state of given drcluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>drcluster_name</strong> (<em>str</em>) – Name of the DRcluster</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If drcluster are fenced: Fenced or Unfenced, else None if not defined</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>state (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_image_uuids">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_image_uuids</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_image_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all image UUIDs associated with the PVCs in the given namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VR resources</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of all image UUIDs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_pv_count">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_pv_count</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_pv_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets PV resource count in the given namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – the namespace of the workload</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PV resource count</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_scheduling_interval">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_scheduling_interval</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_scheduling_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Get scheduling interval for the workload in the given namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scheduling interval value from DRPolicy</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.get_vr_count">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">get_vr_count</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.get_vr_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets VR resource count in given namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VR resources</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VR resource count</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.gracefully_reboot_ocp_nodes">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">gracefully_reboot_ocp_nodes</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">drcluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.gracefully_reboot_ocp_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Gracefully reboot OpenShift Container Platform
nodes which was fenced before</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>drcluster_name</strong> (<em>str</em>) – Name of the drcluster which need to be reboot</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.relocate">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">relocate</code><span class="sig-paren">(</span><em class="sig-param">preferred_cluster</em>, <em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em>, <em class="sig-param">workload_placement_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.relocate" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates Relocate action to the specified cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>preferred_cluster</strong> (<em>str</em>) – Cluster name to which the workload should be relocated</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace where workload is running</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
<li><p><strong>workload_placement_name</strong> (<em>str</em>) – Placement name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.set_current_primary_cluster_context">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">set_current_primary_cluster_context</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.set_current_primary_cluster_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set current primary cluster context based on workload namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.set_current_secondary_cluster_context">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">set_current_secondary_cluster_context</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">workload_type='Subscription'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.set_current_secondary_cluster_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set secondary cluster context based on workload namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>workload_type</strong> (<em>str</em>) – Type of workload, i.e., Subscription or ApplicationSet</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.wait_for_all_resources_creation">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">wait_for_all_resources_creation</code><span class="sig-paren">(</span><em class="sig-param">pvc_count</em>, <em class="sig-param">pod_count</em>, <em class="sig-param">namespace</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">skip_replication_resources=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.wait_for_all_resources_creation" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for workload and replication resources to be created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_count</strong> (<em>int</em>) – Expected number of PVCs</p></li>
<li><p><strong>pod_count</strong> (<em>int</em>) – Expected number of Pods</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the workload</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for resource creation</p></li>
<li><p><strong>skip_replication_resources</strong> (<em>bool</em>) – if true vr status wont’t be check</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.wait_for_all_resources_deletion">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">wait_for_all_resources_deletion</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">check_replication_resources_state=True</em>, <em class="sig-param">timeout=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.wait_for_all_resources_deletion" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for workload and replication resources to be deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the workload</p></li>
<li><p><strong>check_replication_resources_state</strong> (<em>bool</em>) – True for checking replication resources state, False otherwise</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for resource deletion</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.wait_for_mirroring_status_ok">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">wait_for_mirroring_status_ok</code><span class="sig-paren">(</span><em class="sig-param">replaying_images=None</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.wait_for_mirroring_status_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for mirroring status to reach health OK and expected number of replaying
images for each of the ODF cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>replaying_images</strong> (<em>int</em>) – Expected number of images in replaying state</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for mirroring status reach OK</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if status contains expected health and states values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutExpiredError" title="ocs_ci.ocs.exceptions.TimeoutExpiredError"><strong>TimeoutExpiredError</strong></a> – In case of unexpected mirroring status</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.wait_for_replication_resources_creation">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">wait_for_replication_resources_creation</code><span class="sig-paren">(</span><em class="sig-param">vr_count</em>, <em class="sig-param">namespace</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.wait_for_replication_resources_creation" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for replication resources to be created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vr_count</strong> (<em>int</em>) – Expected number of VR resources</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the VR resources</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for VR resources to be created
or reach expected state</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutExpiredError" title="ocs_ci.ocs.exceptions.TimeoutExpiredError"><strong>TimeoutExpiredError</strong></a> – In case replication resources not created</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers.wait_for_replication_resources_deletion">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers.</code><code class="sig-name descname">wait_for_replication_resources_deletion</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">timeout</em>, <em class="sig-param">check_state=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers.wait_for_replication_resources_deletion" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for replication resources to be deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace of the resources’</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for resources to reach expected
state or deleted</p></li>
<li><p><strong>check_state</strong> (<em>bool</em>) – True for checking resources state before deletion, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutExpiredError" title="ocs_ci.ocs.exceptions.TimeoutExpiredError"><strong>TimeoutExpiredError</strong></a> – In case replication resources not deleted</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.dr_helpers_ui">
<span id="ocs-ci-helpers-dr-helpers-ui-module"></span><h2>ocs_ci.helpers.dr_helpers_ui module<a class="headerlink" href="#module-ocs_ci.helpers.dr_helpers_ui" title="Permalink to this headline">¶</a></h2>
<p>Helper functions specific to DR User Interface</p>
<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers_ui.check_cluster_status_on_acm_console">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers_ui.</code><code class="sig-name descname">check_cluster_status_on_acm_console</code><span class="sig-paren">(</span><em class="sig-param">acm_obj</em>, <em class="sig-param">down_cluster_name=None</em>, <em class="sig-param">cluster_names=None</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">expected_text='Ready'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers_ui.check_cluster_status_on_acm_console" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks the current status of imported clusters on the ACM console.
These clusters are the managed OCP clusters and the ACM Hub cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acm_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.acm.html#ocs_ci.ocs.acm.acm.AcmAddClusters" title="ocs_ci.ocs.acm.acm.AcmAddClusters"><em>AcmAddClusters</em></a>) – ACM Page Navigator Class</p></li>
<li><p><strong>down_cluster_name</strong> (<em>str</em>) – If Failover is performed when a cluster goes down, it waits and checks the updated
status of cluster unavailability on the ACM console.
It takes the cluster name which is down.</p></li>
<li><p><strong>cluster_names</strong> (<em>list</em>) – This is a list of cluster names involved in a DR setup. You can either pass the cluster
names as args in the form of list, but if not passed, it fetches the primary &amp; secondary
cluster names passed at run time for context setting
(max. 3 for now including ACM Hub cluster).
ACM Hub cluster name is hard coded as “local-cluster” as the name is constant &amp; isn’t
expected to change.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout to wait for certain elements to be found on the ACM UI</p></li>
<li><p><strong>expected_text</strong> (<em>str</em>) – Any particular string/status of the cluster to be checked on the ACM console.
Default is set to ready</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers_ui.dr_submariner_validation_from_ui">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers_ui.</code><code class="sig-name descname">dr_submariner_validation_from_ui</code><span class="sig-paren">(</span><em class="sig-param">acm_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers_ui.dr_submariner_validation_from_ui" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is only applicable for Regional DR.</p>
<p>This function calls other function and does pre-checks on ACM UI
such as Submariner validation from ACM console for Regional DR.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>acm_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.acm.html#ocs_ci.ocs.acm.acm.AcmAddClusters" title="ocs_ci.ocs.acm.acm.AcmAddClusters"><em>AcmAddClusters</em></a>) – ACM Page Navigator Class</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers_ui.failover_relocate_ui">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers_ui.</code><code class="sig-name descname">failover_relocate_ui</code><span class="sig-paren">(</span><em class="sig-param">acm_obj</em>, <em class="sig-param">scheduling_interval=0</em>, <em class="sig-param">workload_to_move=None</em>, <em class="sig-param">policy_name=None</em>, <em class="sig-param">failover_or_preferred_cluster=None</em>, <em class="sig-param">action='Failover'</em>, <em class="sig-param">timeout=120</em>, <em class="sig-param">move_workloads_to_same_cluster=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers_ui.failover_relocate_ui" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to perform Failover/Relocate operations via ACM UI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acm_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.acm.html#ocs_ci.ocs.acm.acm.AcmAddClusters" title="ocs_ci.ocs.acm.acm.AcmAddClusters"><em>AcmAddClusters</em></a>) – ACM Page Navigator Class</p></li>
<li><p><strong>scheduling_interval</strong> (<em>int</em>) – scheduling interval value from DRPolicy</p></li>
<li><p><strong>workload_to_move</strong> (<em>str</em>) – Name of running workloads on which action to be taken</p></li>
<li><p><strong>policy_name</strong> (<em>str</em>) – Name of the DR policy applied to the running workload</p></li>
<li><p><strong>failover_or_preferred_cluster</strong> (<em>str</em>) – Name of the failover cluster or preferred cluster to which workloads
will be moved</p></li>
<li><p><strong>action</strong> (<em>str</em>) – action could be “Failover” or “Relocate”, “Failover” is set to default</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – timeout to wait for certain elements to be found on the ACM UI</p></li>
<li><p><strong>move_workloads_to_same_cluster</strong> (<em>bool</em>) – Bool condition to test negative failover/relocate scenarios to move
running workloads to same cluster</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the action is triggered, raises Exception if any of the mandatory argument is not provided</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers_ui.verify_drpolicy_ui">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers_ui.</code><code class="sig-name descname">verify_drpolicy_ui</code><span class="sig-paren">(</span><em class="sig-param">acm_obj</em>, <em class="sig-param">scheduling_interval</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers_ui.verify_drpolicy_ui" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to verify DRPolicy status and replication policy on Data Policies page of ACM console</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acm_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.acm.html#ocs_ci.ocs.acm.acm.AcmAddClusters" title="ocs_ci.ocs.acm.acm.AcmAddClusters"><em>AcmAddClusters</em></a>) – ACM Page Navigator Class</p></li>
<li><p><strong>scheduling_interval</strong> (<em>int</em>) – Scheduling interval in the DRPolicy to be verified on ACM UI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.dr_helpers_ui.verify_failover_relocate_status_ui">
<code class="sig-prename descclassname">ocs_ci.helpers.dr_helpers_ui.</code><code class="sig-name descname">verify_failover_relocate_status_ui</code><span class="sig-paren">(</span><em class="sig-param">acm_obj</em>, <em class="sig-param">action='Failover'</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.dr_helpers_ui.verify_failover_relocate_status_ui" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to verify current status of in progress Failover/Relocate operation on ACM UI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acm_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.acm.html#ocs_ci.ocs.acm.acm.AcmAddClusters" title="ocs_ci.ocs.acm.acm.AcmAddClusters"><em>AcmAddClusters</em></a>) – ACM Page Navigator Class</p></li>
<li><p><strong>action</strong> (<em>str</em>) – action “Failover” or “Relocate” which was taken on the workloads,
“Failover” is set to default</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – timeout to wait for certain elements to be found on the ACM UI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.helpers">
<span id="ocs-ci-helpers-helpers-module"></span><h2>ocs_ci.helpers.helpers module<a class="headerlink" href="#module-ocs_ci.helpers.helpers" title="Permalink to this headline">¶</a></h2>
<p>Helper functions file for OCS QE</p>
<dl class="function">
<dt id="ocs_ci.helpers.helpers.add_scc_policy">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">add_scc_policy</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.add_scc_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Adding ServiceAccount to scc anyuid and privileged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – ServiceAccount name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the scc_policy creation</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.calc_local_file_md5_sum">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">calc_local_file_md5_sum</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.calc_local_file_md5_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate and return the MD5 checksum of a local file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – The path to the file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The MD5 checksum</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.change_default_storageclass">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">change_default_storageclass</code><span class="sig-paren">(</span><em class="sig-param">scname</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.change_default_storageclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the default StorageClass to the given SC name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scname</strong> (<em>str</em>) – StorageClass name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True on success</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.change_vm_network_state">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">change_vm_network_state</code><span class="sig-paren">(</span><em class="sig-param">ip</em>, <em class="sig-param">label='Network adapter 1'</em>, <em class="sig-param">network='VM Network'</em>, <em class="sig-param">connect=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.change_vm_network_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the network state of a virtual machine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – The IP address of the virtual machine.</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – The label of the network adapter to be changed.
Defaults to <cite>constants.VM_DEFAULT_NETWORK_ADAPTER</cite>.</p></li>
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the network to which the network adapter should be connected.
Defaults to <cite>constants.VM_DEFAULT_NETWORK</cite>.</p></li>
<li><p><strong>connect</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the network adapter is connected. If False,
the network adapter is disconnected. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns True if the operation was successful, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.check_cluster_is_compact">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">check_cluster_is_compact</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.check_cluster_is_compact" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.check_number_of_mon_pods">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">check_number_of_mon_pods</code><span class="sig-paren">(</span><em class="sig-param">expected_mon_num=3</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.check_number_of_mon_pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to check the number of monitoring pods</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if number of mon pods is 3, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.check_osd_log_exist_on_rook_ceph_operator_pod">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">check_osd_log_exist_on_rook_ceph_operator_pod</code><span class="sig-paren">(</span><em class="sig-param">last_log_date_time_obj</em>, <em class="sig-param">expected_strings=()</em>, <em class="sig-param">unexpected_strings=()</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.check_osd_log_exist_on_rook_ceph_operator_pod" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Verify logs contain the expected strings and the logs do not</dt><dd><p>contain the unexpected strings</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>last_log_date_time_obj</strong> (<em>datetime obj</em>) – type of log</p></li>
<li><p><strong>expected_strings</strong> (<em>list</em>) – verify the logs contain the expected strings</p></li>
<li><p><strong>unexpected_strings</strong> (<em>list</em>) – verify the logs do not contain the strings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if logs contain the expected strings and the logs do not
contain the unexpected strings, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.check_rbd_image_used_size">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">check_rbd_image_used_size</code><span class="sig-paren">(</span><em class="sig-param">pvc_objs</em>, <em class="sig-param">usage_to_compare</em>, <em class="sig-param">rbd_pool='ocs-storagecluster-cephblockpool'</em>, <em class="sig-param">expect_match=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.check_rbd_image_used_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if RBD image used size of the PVCs are matching with the given value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects</p></li>
<li><p><strong>usage_to_compare</strong> (<em>str</em>) – Value of image used size to be compared with actual value. eg: “5GiB”</p></li>
<li><p><strong>rbd_pool</strong> (<em>str</em>) – Name of the pool</p></li>
<li><p><strong>expect_match</strong> (<em>bool</em>) – True to verify the used size is equal to ‘usage_to_compare’ value.
False to verify the used size is not equal to ‘usage_to_compare’ value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the verification is success for all the PVCs, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.check_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">check_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.check_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running" title="Permalink to this definition">¶</a></dt>
<dd><p>check rook-ceph-crashcollector pods running on worker nodes
where rook-ceph pods are running.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>True if the rook-ceph-crashcollector pods running on worker nodes</dt><dd><p>where rook-ceph pods are running. False otherwise.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.clean_all_test_projects">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">clean_all_test_projects</code><span class="sig-paren">(</span><em class="sig-param">project_name='test'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.clean_all_test_projects" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all namespaces with ‘test’ in its name
‘test’ can be replaced with another string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_name</strong> (<em>str</em>) – expression to be deleted. Defaults to “test”.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.clear_crash_warning_and_osd_removal_leftovers">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">clear_crash_warning_and_osd_removal_leftovers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.clear_crash_warning_and_osd_removal_leftovers" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear crash warnings and osd removal leftovers. This function can be used for example,
after the device replacement test or the node replacement test.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.collect_performance_stats">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">collect_performance_stats</code><span class="sig-paren">(</span><em class="sig-param">dir_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.collect_performance_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect performance stats and saves them in file in json format.</p>
<p>dir_name (str): directory name to store stats.</p>
<dl class="simple">
<dt>Performance stats include:</dt><dd><p>IOPs and throughput percentage of cluster
CPU, memory consumption of each nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.converge_lists">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">converge_lists</code><span class="sig-paren">(</span><em class="sig-param">list_to_converge</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.converge_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to flatten and remove the sublist created during future obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list_to_converge</strong> (<em>list</em>) – arg list of lists, eg: [[1,2],[3,4]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return converged list eg: [1,2,3,4]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.craft_s3_command">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">craft_s3_command</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">mcg_obj=None</em>, <em class="sig-param">api=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.craft_s3_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Crafts the AWS CLI S3 command including the
login credentials and command to be ran</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mcg_obj</strong> – An MCG object containing the MCG S3 connection credentials</p></li>
<li><p><strong>cmd</strong> – The AWSCLI command to run</p></li>
<li><p><strong>api</strong> – True if the call is for s3api, false if s3</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The crafted command, ready to be executed on the pod</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_build_from_docker_image">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_build_from_docker_image</code><span class="sig-paren">(</span><em class="sig-param">image_name</em>, <em class="sig-param">install_package</em>, <em class="sig-param">namespace</em>, <em class="sig-param">source_image='quay.io/ocsci/fedora'</em>, <em class="sig-param">source_image_label='latest'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_build_from_docker_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows to create a build config using a Dockerfile specified as an
argument, eg.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ oc new-build -D $&#39;FROM centos:7\nRUN yum install -y httpd&#39;
</pre></div>
</div>
<p>creates a build with <code class="docutils literal notranslate"><span class="pre">httpd</span></code> installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_name</strong> (<em>str</em>) – Name of the image to be created</p></li>
<li><p><strong>source_image</strong> (<em>str</em>) – Source image to build docker image from,
defaults to Centos as base image</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – project where build config should be created</p></li>
<li><p><strong>source_image_label</strong> (<em>str</em>) – Tag to use along with the image name,
defaults to ‘latest’</p></li>
<li><p><strong>install_package</strong> (<em>str</em>) – package to install over the base image</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The OCP object for the image
Fails on UnavailableBuildException exception if build creation
fails</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.ocp.OCP" title="ocs_ci.ocs.ocp.OCP">ocs_ci.ocs.ocp.OCP</a> (obj)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_ceph_block_pool">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_ceph_block_pool</code><span class="sig-paren">(</span><em class="sig-param">pool_name=None</em>, <em class="sig-param">replica=3</em>, <em class="sig-param">compression=None</em>, <em class="sig-param">failure_domain=None</em>, <em class="sig-param">verify=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_ceph_block_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Ceph block pool
** This method should not be used anymore **
** This method is for internal testing only **</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pool_name</strong> (<em>str</em>) – The pool name to create</p></li>
<li><p><strong>failure_domain</strong> (<em>str</em>) – Failure domain name</p></li>
<li><p><strong>verify</strong> (<em>bool</em>) – True to verify the pool exists after creation,
False otherwise</p></li>
<li><p><strong>replica</strong> (<em>int</em>) – The replica size for a pool</p></li>
<li><p><strong>compression</strong> (<em>str</em>) – Compression type for a pool</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the Ceph block pool</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_ceph_file_system">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_ceph_file_system</code><span class="sig-paren">(</span><em class="sig-param">pool_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_ceph_file_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Ceph file system
** This method should not be used anymore **
** This method is for internal testing only **</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pool_name</strong> (<em>str</em>) – The pool name to create</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the Ceph file system</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_multilpe_projects">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_multilpe_projects</code><span class="sig-paren">(</span><em class="sig-param">number_of_project</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_multilpe_projects" title="Permalink to this definition">¶</a></dt>
<dd><p>Create one or more projects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number_of_project</strong> (<em>int</em>) – Number of projects to be created</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of project objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_multiple_pvc_parallel">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_multiple_pvc_parallel</code><span class="sig-paren">(</span><em class="sig-param">sc_obj</em>, <em class="sig-param">namespace</em>, <em class="sig-param">number_of_pvc</em>, <em class="sig-param">size</em>, <em class="sig-param">access_modes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_multiple_pvc_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Funtion to create multiple PVC in parallel using threads
Function will create PVCs based on the available access modes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sc_obj</strong> (<em>str</em>) – Storage Class object</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for creating pvc</p></li>
<li><p><strong>number_of_pvc</strong> (<em>int</em>) – NUmber of pvc to be created</p></li>
<li><p><strong>size</strong> (<em>str</em>) – size of the pvc eg: ‘10Gi’</p></li>
<li><p><strong>access_modes</strong> (<em>list</em>) – List of access modes for PVC creation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of pvc objs created in function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pvc_objs_list (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_multiple_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_multiple_pvcs</code><span class="sig-paren">(</span><em class="sig-param">sc_name</em>, <em class="sig-param">namespace</em>, <em class="sig-param">number_of_pvc=1</em>, <em class="sig-param">size=None</em>, <em class="sig-param">do_reload=False</em>, <em class="sig-param">access_mode='ReadWriteOnce'</em>, <em class="sig-param">burst=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_multiple_pvcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Create one or more PVC as a bulk or one by one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sc_name</strong> (<em>str</em>) – The name of the storage class to provision the PVCs from</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the PVCs creation</p></li>
<li><p><strong>number_of_pvc</strong> (<em>int</em>) – Number of PVCs to be created</p></li>
<li><p><strong>size</strong> (<em>str</em>) – The size of the PVCs to create</p></li>
<li><p><strong>do_reload</strong> (<em>bool</em>) – True for wait for reloading PVC after its creation,
False otherwise</p></li>
<li><p><strong>access_mode</strong> (<em>str</em>) – The kind of access mode for PVC</p></li>
<li><p><strong>burst</strong> (<em>bool</em>) – True for bulk creation, False ( default) for multiple creation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of PVC objects
tmpdir (str): The full path of the directory in which the yamls for pvc objects creation reside</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ocs_objs (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_ocs_object_from_kind_and_name">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_ocs_object_from_kind_and_name</code><span class="sig-paren">(</span><em class="sig-param">kind</em>, <em class="sig-param">resource_name</em>, <em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_ocs_object_from_kind_and_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OCS object from kind and name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> (<em>str</em>) – resource kind like CephBlockPool, pvc.</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – name of the resource.</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – then value from config will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns OCS object from kind and name.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">ocs_ci.ocs.resources.ocs.OCS</a> (obj)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_pod">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_pod</code><span class="sig-paren">(</span><em class="sig-param">interface_type=None</em>, <em class="sig-param">pvc_name=None</em>, <em class="sig-param">do_reload=True</em>, <em class="sig-param">namespace='openshift-storage'</em>, <em class="sig-param">node_name=None</em>, <em class="sig-param">pod_dict_path=None</em>, <em class="sig-param">sa_name=None</em>, <em class="sig-param">security_context=None</em>, <em class="sig-param">dc_deployment=False</em>, <em class="sig-param">raw_block_pv=False</em>, <em class="sig-param">raw_block_device='/dev/rbdblock'</em>, <em class="sig-param">replica_count=1</em>, <em class="sig-param">pod_name=None</em>, <em class="sig-param">node_selector=None</em>, <em class="sig-param">command=None</em>, <em class="sig-param">command_args=None</em>, <em class="sig-param">ports=None</em>, <em class="sig-param">deploy_pod_status='Completed'</em>, <em class="sig-param">subpath=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pod</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface_type</strong> (<em>str</em>) – The interface type (CephFS, RBD, etc.)</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – The PVC that should be attached to the newly created pod</p></li>
<li><p><strong>do_reload</strong> (<em>bool</em>) – True for reloading the object after creation, False otherwise</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the new resource creation</p></li>
<li><p><strong>node_name</strong> (<em>str</em>) – The name of specific node to schedule the pod</p></li>
<li><p><strong>pod_dict_path</strong> (<em>str</em>) – YAML path for the pod</p></li>
<li><p><strong>sa_name</strong> (<em>str</em>) – Serviceaccount name</p></li>
<li><p><strong>security_context</strong> (<em>dict</em>) – security context in the form of dictionary</p></li>
<li><p><strong>dc_deployment</strong> (<em>bool</em>) – True if creating pod as deploymentconfig</p></li>
<li><p><strong>raw_block_pv</strong> (<em>bool</em>) – True for creating raw block pv based pod, False otherwise</p></li>
<li><p><strong>raw_block_device</strong> (<em>str</em>) – raw block device for the pod</p></li>
<li><p><strong>replica_count</strong> (<em>int</em>) – Replica count for deployment config</p></li>
<li><p><strong>pod_name</strong> (<em>str</em>) – Name of the pod to create</p></li>
<li><p><strong>node_selector</strong> (<em>dict</em>) – dict of key-value pair to be used for nodeSelector field
eg: {‘nodetype’: ‘app-pod’}</p></li>
<li><p><strong>command</strong> (<em>list</em>) – The command to be executed on the pod</p></li>
<li><p><strong>command_args</strong> (<em>list</em>) – The arguments to be sent to the command running
on the pod</p></li>
<li><p><strong>ports</strong> (<em>dict</em>) – Service ports</p></li>
<li><p><strong>deploy_pod_status</strong> (<em>str</em>) – Expected status of deploy pod. Applicable
only if dc_deployment is True</p></li>
<li><p><strong>subpath</strong> (<em>str</em>) – Value of subPath parameter in pod yaml</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Pod instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.pod.Pod" title="ocs_ci.ocs.resources.pod.Pod">Pod</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – In case of any failure</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_pods">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_pods</code><span class="sig-paren">(</span><em class="sig-param">pvc_objs</em>, <em class="sig-param">pod_factory</em>, <em class="sig-param">interface</em>, <em class="sig-param">pods_for_rwx=1</em>, <em class="sig-param">status=''</em>, <em class="sig-param">nodes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Create pods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of ocs_ci.ocs.resources.pvc.PVC instances</p></li>
<li><p><strong>pod_factory</strong> (<em>function</em>) – pod_factory function</p></li>
<li><p><strong>interface</strong> (<em>int</em>) – Interface type</p></li>
<li><p><strong>pods_for_rwx</strong> (<em>int</em>) – Number of pods to be created if access mode of
PVC is RWX</p></li>
<li><p><strong>status</strong> (<em>str</em>) – If provided, wait for desired state of each pod before
creating next one</p></li>
<li><p><strong>nodes</strong> (<em>list</em>) – Node name for each pod will be selected from this list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of Pod objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_pods_parallel">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_pods_parallel</code><span class="sig-paren">(</span><em class="sig-param">pvc_list</em>, <em class="sig-param">namespace</em>, <em class="sig-param">interface</em>, <em class="sig-param">pod_dict_path=None</em>, <em class="sig-param">sa_name=None</em>, <em class="sig-param">raw_block_pv=False</em>, <em class="sig-param">dc_deployment=False</em>, <em class="sig-param">node_selector=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_pods_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create pods in parallel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_list</strong> (<em>list</em>) – List of pvcs to be attached in pods</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for creating pod</p></li>
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pod_dict_path</strong> (<em>str</em>) – pod_dict_path for yaml</p></li>
<li><p><strong>sa_name</strong> (<em>str</em>) – sa_name for providing permission</p></li>
<li><p><strong>raw_block_pv</strong> (<em>bool</em>) – Either RAW block or not</p></li>
<li><p><strong>dc_deployment</strong> (<em>bool</em>) – Either DC deployment or not</p></li>
<li><p><strong>node_selector</strong> (<em>dict</em>) – dict of key-value pair to be used for nodeSelector field
eg: {‘nodetype’: ‘app-pod’}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns list of pods created</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pod_objs (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_project">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_project</code><span class="sig-paren">(</span><em class="sig-param">project_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a project</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_name</strong> (<em>str</em>) – The name for the new project</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Project object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.ocp.OCP" title="ocs_ci.ocs.ocp.OCP">ocs_ci.ocs.ocp.OCP</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_pvc">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_pvc</code><span class="sig-paren">(</span><em class="sig-param">sc_name</em>, <em class="sig-param">pvc_name=None</em>, <em class="sig-param">namespace='openshift-storage'</em>, <em class="sig-param">size=None</em>, <em class="sig-param">do_reload=True</em>, <em class="sig-param">access_mode='ReadWriteOnce'</em>, <em class="sig-param">volume_mode=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_pvc" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a PVC</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sc_name</strong> (<em>str</em>) – The name of the storage class for the PVC to be
associated with</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – The name of the PVC to create</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the PVC creation</p></li>
<li><p><strong>size</strong> (<em>str</em>) – Size of pvc to create</p></li>
<li><p><strong>do_reload</strong> (<em>bool</em>) – True for wait for reloading PVC after its creation, False otherwise</p></li>
<li><p><strong>access_mode</strong> (<em>str</em>) – The access mode to be used for the PVC</p></li>
<li><p><strong>volume_mode</strong> (<em>str</em>) – Volume mode for rbd RWX pvc i.e. ‘Block’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PVC instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.pvc.PVC" title="ocs_ci.ocs.resources.pvc.PVC">PVC</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_reclaim_space_cronjob">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_reclaim_space_cronjob</code><span class="sig-paren">(</span><em class="sig-param">pvc_name</em>, <em class="sig-param">reclaim_space_job_name=None</em>, <em class="sig-param">backoff_limit=None</em>, <em class="sig-param">retry_deadline_seconds=None</em>, <em class="sig-param">schedule='weekly'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_reclaim_space_cronjob" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ReclaimSpaceCronJob to invoke reclaim space operation on RBD volume</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the PVC</p></li>
<li><p><strong>reclaim_space_job_name</strong> (<em>str</em>) – The name of the ReclaimSpaceCRonJob to be created</p></li>
<li><p><strong>backoff_limit</strong> (<em>int</em>) – The number of retries before marking reclaim space operation as failed</p></li>
<li><p><strong>retry_deadline_seconds</strong> (<em>int</em>) – The duration in seconds relative to the start time that the
operation may be retried</p></li>
<li><p><strong>schedule</strong> (<em>str</em>) – Type of schedule</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS object representing ReclaimSpaceJob</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">ocs_ci.ocs.resources.ocs.OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_reclaim_space_job">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_reclaim_space_job</code><span class="sig-paren">(</span><em class="sig-param">pvc_name</em>, <em class="sig-param">reclaim_space_job_name=None</em>, <em class="sig-param">backoff_limit=None</em>, <em class="sig-param">retry_deadline_seconds=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_reclaim_space_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ReclaimSpaceJob to invoke reclaim space operation on RBD volume</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the PVC</p></li>
<li><p><strong>reclaim_space_job_name</strong> (<em>str</em>) – The name of the ReclaimSpaceJob to be created</p></li>
<li><p><strong>backoff_limit</strong> (<em>int</em>) – The number of retries before marking reclaim space operation as failed</p></li>
<li><p><strong>retry_deadline_seconds</strong> (<em>int</em>) – The duration in seconds relative to the start time that the
operation may be retried</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS object representing ReclaimSpaceJob</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">ocs_ci.ocs.resources.ocs.OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_resource">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_resource</code><span class="sig-paren">(</span><em class="sig-param">do_reload=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a resource</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>do_reload</strong> (<em>bool</em>) – True for reloading the resource following its creation,
False otherwise</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Dictionary of the OCS resource</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – In case of any failure</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_sa_token_secret">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_sa_token_secret</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">namespace='openshift-storage'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_sa_token_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a serviceaccount token secret</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – Name of the serviceaccount for which the secret has to be created</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace in which the serviceaccount exists</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Name of the serviceaccount token secret</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_scc">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_scc</code><span class="sig-paren">(</span><em class="sig-param">scc_name=None</em>, <em class="sig-param">scc_dict=None</em>, <em class="sig-param">scc_dict_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_scc" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SecurityContextConstraints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scc_name</strong> (<em>str</em>) – Name of the SCC</p></li>
<li><p><strong>scc_dict</strong> (<em>dict</em>) – Dictionary containing the details
on provileges, capabilities etc</p></li>
<li><p><strong>scc_dict_path</strong> (<em>str</em>) – Path to custom SCC yaml file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>OCS object for scc created</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>scc_obj</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_secret">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_secret</code><span class="sig-paren">(</span><em class="sig-param">interface_type</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a secret
** This method should not be used anymore **
** This method is for internal testing only **</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interface_type</strong> (<em>str</em>) – The type of the interface
(e.g. CephBlockPool, CephFileSystem)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the secret</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_serviceaccount">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_serviceaccount</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_serviceaccount" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Serviceaccount</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – The namespace for the serviceaccount creation</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the service_account</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_storage_class">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_storage_class</code><span class="sig-paren">(</span><em class="sig-param">interface_type</em>, <em class="sig-param">interface_name</em>, <em class="sig-param">secret_name</em>, <em class="sig-param">reclaim_policy='Delete'</em>, <em class="sig-param">sc_name=None</em>, <em class="sig-param">provisioner=None</em>, <em class="sig-param">rbd_thick_provision=False</em>, <em class="sig-param">encrypted=False</em>, <em class="sig-param">encryption_kms_id=None</em>, <em class="sig-param">fs_name=None</em>, <em class="sig-param">volume_binding_mode='Immediate'</em>, <em class="sig-param">allow_volume_expansion=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_storage_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a storage class
** This method should not be used anymore **
** This method is for internal testing only **</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface_type</strong> (<em>str</em>) – The type of the interface
(e.g. CephBlockPool, CephFileSystem)</p></li>
<li><p><strong>interface_name</strong> (<em>str</em>) – The name of the interface</p></li>
<li><p><strong>secret_name</strong> (<em>str</em>) – The name of the secret</p></li>
<li><p><strong>sc_name</strong> (<em>str</em>) – The name of storage class to create</p></li>
<li><p><strong>reclaim_policy</strong> (<em>str</em>) – Type of reclaim policy. Defaults to ‘Delete’
(eg., ‘Delete’, ‘Retain’)</p></li>
<li><p><strong>rbd_thick_provision</strong> (<em>bool</em>) – True to enable RBD thick provisioning.
Applicable if interface_type is CephBlockPool</p></li>
<li><p><strong>encrypted</strong> (<em>bool</em>) – True to create encrypted SC else False</p></li>
<li><p><strong>encryption_kms_id</strong> (<em>str</em>) – ID of the KMS entry from connection details</p></li>
<li><p><strong>fs_name</strong> (<em>str</em>) – the name of the filesystem for CephFS StorageClass</p></li>
<li><p><strong>volume_binding_mode</strong> (<em>str</em>) – Can be “Immediate” or “WaitForFirstConsumer” which the PVC will be in pending till
pod attachment.</p></li>
<li><p><strong>allow_volume_expansion</strong> (<em>bool</em>) – True to create sc with volume expansion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the storage class</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.create_unique_resource_name">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">create_unique_resource_name</code><span class="sig-paren">(</span><em class="sig-param">resource_description</em>, <em class="sig-param">resource_type</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.create_unique_resource_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a unique object name by using the object_description,
object_type and a random uuid(in hex) as suffix trimmed due to
kubernetes limitation of 63 characters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource_description</strong> (<em>str</em>) – The user provided object description</p></li>
<li><p><strong>resource_type</strong> (<em>str</em>) – The type of object for which the unique name
will be created. For example: project, pvc, etc</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A unique name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.default_ceph_block_pool">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">default_ceph_block_pool</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.default_ceph_block_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns default CephBlockPool</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>default CephBlockPool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.default_storage_class">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">default_storage_class</code><span class="sig-paren">(</span><em class="sig-param">interface_type</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.default_storage_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return default storage class based on interface_type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interface_type</strong> (<em>str</em>) – The type of the interface
(e.g. CephBlockPool, CephFileSystem)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Existing StorageClass Instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.default_thick_storage_class">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">default_thick_storage_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.default_thick_storage_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return default RBD thick storage class</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Existing RBD thick StorageClass instance</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.default_volumesnapshotclass">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">default_volumesnapshotclass</code><span class="sig-paren">(</span><em class="sig-param">interface_type</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.default_volumesnapshotclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return default VolumeSnapshotClass based on interface_type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interface_type</strong> (<em>str</em>) – The type of the interface
(e.g. CephBlockPool, CephFileSystem)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VolumeSnapshotClass Instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.delete_bulk_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">delete_bulk_pvcs</code><span class="sig-paren">(</span><em class="sig-param">pvc_yaml_dir</em>, <em class="sig-param">pv_names_list</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.delete_bulk_pvcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all the pvcs created from yaml file in a provided dir
:param pvc_yaml_dir: Directory in which yaml file resides
:type pvc_yaml_dir: str
:param pv_names_list: List of pv objects to be deleted
:type pv_names_list: str</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.delete_cephblockpools">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">delete_cephblockpools</code><span class="sig-paren">(</span><em class="sig-param">cbp_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.delete_cephblockpools" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for deleting CephBlockPool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cbp_objs</strong> (<em>list</em>) – List of CBP objects for deletion</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if deletion of CephBlockPool is successful</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.delete_objs_parallel">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">delete_objs_parallel</code><span class="sig-paren">(</span><em class="sig-param">obj_list</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.delete_objs_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to delete objs specified in list
:param obj_list: List can be obj of pod, pvc, etc
:type obj_list: list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if obj deleted else False</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.delete_storageclasses">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">delete_storageclasses</code><span class="sig-paren">(</span><em class="sig-param">sc_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.delete_storageclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Function for Deleting storageclasses</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sc_objs</strong> (<em>list</em>) – List of SC objects for deletion</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if deletion is successful</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.delete_volume_in_backend">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">delete_volume_in_backend</code><span class="sig-paren">(</span><em class="sig-param">img_uuid</em>, <em class="sig-param">pool_name=None</em>, <em class="sig-param">disable_mirroring=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.delete_volume_in_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an Image/Subvolume in the backend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_uuid</strong> (<em>str</em>) – Part of VolID which represents corresponding
image/subvolume in backend, eg:
<code class="docutils literal notranslate"><span class="pre">oc</span> <span class="pre">get</span> <span class="pre">pv/&lt;volumeName&gt;</span> <span class="pre">-o</span> <span class="pre">jsonpath='{.spec.csi.volumeHandle}'</span></code>
Output is the CSI generated VolID and looks like:
<code class="docutils literal notranslate"><span class="pre">0001-000c-rook-cluster-0000000000000001-f301898c-a192-11e9-852a-1eeeb6975c91</span></code>
where image_uuid is <code class="docutils literal notranslate"><span class="pre">f301898c-a192-11e9-852a-1eeeb6975c91</span></code></p></li>
<li><p><strong>pool_name</strong> (<em>str</em>) – The name of the pool</p></li>
<li><p><strong>disable_mirroring</strong> (<em>bool</em>) – True to disable the mirroring for the image, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if image deleted successfully</dt><dd><dl class="simple">
<dt>False if:</dt><dd><p>Pool not found
image not found
image not deleted</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.disable_vm_network_for_duration">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">disable_vm_network_for_duration</code><span class="sig-paren">(</span><em class="sig-param">ip</em>, <em class="sig-param">label='Network adapter 1'</em>, <em class="sig-param">network='VM Network'</em>, <em class="sig-param">duration=5</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.disable_vm_network_for_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable network connectivity for a virtual machine with a specified IP address for a given duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – The IP address of the virtual machine to disable network connectivity for.</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – The label of the network adapter to disable. (default: “Network adapter 1”)</p></li>
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the network to connect to. (default: “VM Network”)</p></li>
<li><p><strong>duration</strong> (<em>int</em><em>, </em><em>optional</em>) – The duration in seconds to disable network connectivity. (default: 5 seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if network connectivity was successfully disabled and re-enabled, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.fetch_used_size">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">fetch_used_size</code><span class="sig-paren">(</span><em class="sig-param">cbp_name</em>, <em class="sig-param">exp_val=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.fetch_used_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch used size in the pool
:param exp_val: Expected size in GB
:type exp_val: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Used size in GB</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_admin_key">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_admin_key</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_admin_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches admin key secret from Ceph</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The admin key</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_all_pvs">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_all_pvs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_all_pvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all pvs in cluster namespace (openshift-storage or fusion-storage)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dict of all pv in the cluster namespace</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_all_storageclass_names">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_all_storageclass_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_all_storageclass_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for getting all storageclass</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of storageclass name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_cephblockpool_names">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_cephblockpool_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_cephblockpool_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for getting all CephBlockPool</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of cephblockpool name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_cephfs_data_pool_name">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_cephfs_data_pool_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_cephfs_data_pool_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches ceph fs datapool name from Ceph</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>fs datapool name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_cephfs_name">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_cephfs_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_cephfs_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to retrive CephFS name
:returns: Name of CFS
:rtype: str</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_cephfs_subvolumegroup">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_cephfs_subvolumegroup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_cephfs_subvolumegroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of cephfilesystemsubvolumegroup. The name should be fetched if the platform is not MS.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The name of cephfilesystemsubvolumegroup</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_current_test_name">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_current_test_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_current_test_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to return the current test name in a parsed manner
:returns: The test name.
:rtype: str</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_default_storage_class">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_default_storage_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_default_storage_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the default StorageClass(es)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>default StorageClass(es) list</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_end_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_end_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_end_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ending creation time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the PVC for creation time measurement</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>End time of PVC creation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_end_deletion_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_end_deletion_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pv_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_end_deletion_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ending deletion time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pv_name</strong> (<em>str</em>) – Name of the PVC for deletion time measurement</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>End time of PVC deletion</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_event_line_datetime">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_event_line_datetime</code><span class="sig-paren">(</span><em class="sig-param">event_line</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_event_line_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the event line datetime</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_line</strong> (<em>str</em>) – The event line to get it’s datetime</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The event line datetime</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_failure_domain">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_failure_domain</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_failure_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Failure Domain</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>type of failure domain</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_failure_domin">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_failure_domin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_failure_domin" title="Permalink to this definition">¶</a></dt>
<dd><p>Function is used to getting failure domain of pool</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Failure domain from cephblockpool</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_full_test_logs_path">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_full_test_logs_path</code><span class="sig-paren">(</span><em class="sig-param">cname</em>, <em class="sig-param">fname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_full_test_logs_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Getting the full path of the logs file for particular test</p>
<p>this function use the inspect module to find the name of the caller function, so it need
to be call once from the main test function.
the output is in the form of
ocsci_log_path/&lt;full test file path&gt;/&lt;test filename&gt;/&lt;test class name&gt;/&lt;test function name&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cname</strong> (<em>obj</em>) – the Class object which was run and called this function</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – the function name for different tests log path</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>full path of the test logs relative to the ocs-ci base logs path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_last_log_time_date">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_last_log_time_date</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_last_log_time_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Get last log time</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>type of log</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>last_log_date_time_obj (datetime obj)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_logs_rook_ceph_operator">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_logs_rook_ceph_operator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_logs_rook_ceph_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get logs from a rook_ceph_operator pod</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Output from ‘oc get logs rook-ceph-operator command</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_logs_with_errors">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_logs_with_errors</code><span class="sig-paren">(</span><em class="sig-param">errors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_logs_with_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>From logs of all pods and nodes, get only logs
containing any of specified errors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>errors</strong> (<em>list</em>) – List of errors to look for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>node/pod name as key, logs content as value; may be empty</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_memory_leak_median_value">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_memory_leak_median_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_memory_leak_median_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate memory leak Median value by collecting the data for 180 sec
and find the median value which will be considered as starting point
to evaluate memory leak using “RES” value of ceph-osd daemon i.e. list[7] in code</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict of worker nodes and respective median value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>median_dict (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_mon_db_size_in_kb">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_mon_db_size_in_kb</code><span class="sig-paren">(</span><em class="sig-param">mon_pod_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_mon_db_size_in_kb" title="Permalink to this definition">¶</a></dt>
<dd><p>Get mon db size and returns the size in KB
The output of ‘du -sh’ command contains the size of the directory and its path as string
e.g. “67M   /var/lib/ceph/mon/ceph-c/store.db”
The size is extracted by splitting the string with ‘        ‘.
The size format for example: 1K, 234M, 2G
For uniformity, this test uses KB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mon_pod_obj</strong> (<em>obj</em>) – Mon pod resource object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Converted Mon db size in KB</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>convert_device_size (int)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_mon_pdb">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_mon_pdb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_mon_pdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for Mon PDB</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Count of mon allowed disruption
min_available_mon (int): Count of minimum mon available
max_unavailable_mon (int): Count of maximun mon unavailable</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>disruptions_allowed (int)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_noobaa_db_used_space">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_noobaa_db_used_space</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_noobaa_db_used_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Get noobaa db size</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>noobaa_db used space</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>df_out (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_noobaa_url">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_noobaa_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_noobaa_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the URL of noobaa console</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>url of noobaa console</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_pods_nodes_logs">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_pods_nodes_logs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_pods_nodes_logs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get logs from all pods and nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>node/pod name as key, logs content as value (string)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_pool_cr">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_pool_cr</code><span class="sig-paren">(</span><em class="sig-param">pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_pool_cr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pool CR even if the kind is unknown.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pool_name</strong> (<em>str</em>) – The name of the pool to get the CR for.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If the resource is found, None otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_provision_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_provision_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em>, <em class="sig-param">status='start'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_provision_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the starting/ending creation time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name</strong> (<em>str / list</em>) – Name of the PVC(s) for creation time
the list will be list of pvc objects</p></li>
<li><p><strong>status</strong> (<em>str</em>) – the status that we want to get - Start / End</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time of PVC(s) creation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_pv_names">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_pv_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_pv_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Pv names</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of pv names</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_pv_size">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_pv_size</code><span class="sig-paren">(</span><em class="sig-param">storageclass=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_pv_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Pv size from requested storageclass</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storageclass</strong> (<em>str</em>) – Name of storageclass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of pv’s size</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_rook_ceph_pod_events">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_rook_ceph_pod_events</code><span class="sig-paren">(</span><em class="sig-param">pod_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_rook_ceph_pod_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the rook ceph pod events from the rook ceph pod operator logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pod_name</strong> (<em>str</em>) – The rook ceph pod name to get the events</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of all the event lines with the specific pod</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_rook_ceph_pod_events_by_keyword">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_rook_ceph_pod_events_by_keyword</code><span class="sig-paren">(</span><em class="sig-param">pod_name</em>, <em class="sig-param">keyword</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_rook_ceph_pod_events_by_keyword" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the rook ceph pod events with the keyword ‘keyword’ from the rook ceph pod operator logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_name</strong> (<em>str</em>) – The rook ceph pod name to get the events</p></li>
<li><p><strong>keyword</strong> (<em>str</em>) – The keyword to search in the events</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of all the event lines with the specific pod that has the keyword ‘keyword’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_secret_names">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_secret_names</code><span class="sig-paren">(</span><em class="sig-param">namespace='openshift-storage'</em>, <em class="sig-param">resource_name=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_secret_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get secrets names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – The name of the project.</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – The resource name to fetch.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>secret names</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_serviceaccount_obj">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_serviceaccount_obj</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_serviceaccount_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Get serviceaccount obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – Service Account name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the serviceaccount creation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OCS instance for the service_account</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_snapshot_content_obj">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_snapshot_content_obj</code><span class="sig-paren">(</span><em class="sig-param">snap_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_snapshot_content_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Get volume snapshot content of a volume snapshot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>snap_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS"><em>OCS</em></a>) – OCS instance of kind VolumeSnapshot</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>OCS instance of kind VolumeSnapshotContent</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS">OCS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_start_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_start_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_start_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the starting creation time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the PVC for creation time measurement</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Start time of PVC creation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.get_start_deletion_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">get_start_deletion_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pv_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.get_start_deletion_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the starting deletion time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the PVC for deletion time measurement</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Start time of PVC deletion</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.induce_mon_quorum_loss">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">induce_mon_quorum_loss</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.induce_mon_quorum_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Take mon quorum out by deleting /var/lib/ceph/mon directory
so that it will start crashing and the quorum is lost</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of mon objects
mon_pod_running[0] (obj): A mon object which is running
ceph_mon_daemon_id (list): List of crashed ceph mon id</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>mon_pod_obj_list (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.is_volume_present_in_backend">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">is_volume_present_in_backend</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">image_uuid</em>, <em class="sig-param">pool_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.is_volume_present_in_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether Image/Subvolume is present in the backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>image_uuid</strong> (<em>str</em>) – Part of VolID which represents corresponding
image/subvolume in backend, eg:
<code class="docutils literal notranslate"><span class="pre">oc</span> <span class="pre">get</span> <span class="pre">pv/&lt;volumeName&gt;</span> <span class="pre">-o</span> <span class="pre">jsonpath='{.spec.csi.volumeHandle}'</span></code>
Output is the CSI generated VolID and looks like:
<code class="docutils literal notranslate"><span class="pre">0001-000c-rook-cluster-0000000000000001-f301898c-a192-11e9-852a-1eeeb6975c91</span></code>
where image_uuid is <code class="docutils literal notranslate"><span class="pre">f301898c-a192-11e9-852a-1eeeb6975c91</span></code></p></li>
<li><p><strong>pool_name</strong> (<em>str</em>) – Name of the rbd-pool if interface is CephBlockPool</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if volume is present and False if volume is not present</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.label_worker_node">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">label_worker_node</code><span class="sig-paren">(</span><em class="sig-param">node_list</em>, <em class="sig-param">label_key</em>, <em class="sig-param">label_value</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.label_worker_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to label worker node for running app pods on specific worker nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_list</strong> (<em>list</em>) – List of node name</p></li>
<li><p><strong>label_key</strong> (<em>str</em>) – Label_key to be added in worker</p></li>
<li><p><strong>label_value</strong> (<em>str</em>) – Label_value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.measure_pv_deletion_time_bulk">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">measure_pv_deletion_time_bulk</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pv_name_list</em>, <em class="sig-param">wait_time=60</em>, <em class="sig-param">return_log_times=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.measure_pv_deletion_time_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PV deletion time of bulk PV, based on logs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PV</p></li>
<li><p><strong>pv_name_list</strong> (<em>list</em>) – List of PV Names for measuring deletion time</p></li>
<li><p><strong>wait_time</strong> (<em>int</em>) – Seconds to wait before collecting CSI log</p></li>
<li><p><strong>return_log_times</strong> (<em>bool</em>) – Determines the return value – if False, dictionary of pv_names with the deletion time
is returned; if True – the dictionary of pv_names with the tuple of (srart_deletion_time,
end_deletion_time) is returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary where the pv_names are the keys. The value of the dictionary depend on the</dt><dd><p>return_log_times argument value and are either the corresponding deletion times (when return_log_times
is False) or a tuple of (start_deletion_time, end_deletion_time) as they appear in the logs</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pv_dict (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.measure_pvc_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">measure_pvc_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.measure_pvc_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC creation time based on logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC pvc_name (str): Name of the PVC for creation time measurement</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Creation time for the PVC</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.measure_pvc_creation_time_bulk">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">measure_pvc_creation_time_bulk</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name_list</em>, <em class="sig-param">wait_time=60</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.measure_pvc_creation_time_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC creation time of bulk PVC based on logs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name_list</strong> (<em>list</em>) – List of PVC Names for measuring creation time</p></li>
<li><p><strong>wait_time</strong> (<em>int</em>) – Seconds to wait before collecting CSI log</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of pvc_name with creation time.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pvc_dict (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.measure_pvc_deletion_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">measure_pvc_deletion_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pv_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.measure_pvc_deletion_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC deletion time based on logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pv_name</strong> (<em>str</em>) – Name of the PV for creation time measurement</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Deletion time for the PVC</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.memory_leak_analysis">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">memory_leak_analysis</code><span class="sig-paren">(</span><em class="sig-param">median_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.memory_leak_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to analyse Memory leak after execution of test case Memory leak is
analyzed based on top output “RES” value of ceph-osd daemon, i.e.
<code class="docutils literal notranslate"><span class="pre">list[7]</span></code> in code.</p>
<p>More Detail on Median value: For calculating memory leak require a constant
value, which should not be start or end of test, so calculating it by
getting memory for 180 sec before TC execution and take a median out of it.
Memory value could be different for each nodes, so identify constant value
for each node and update in median_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>median_dict</strong> (<em>dict</em>) – dict of worker nodes and respective median value</p></li>
<li><p><strong>eg</strong> – median_dict = {‘worker_node_1’:102400, ‘worker_node_2’:204800, …}</p></li>
</ul>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_case</span><span class="p">(</span><span class="o">..</span><span class="p">,</span> <span class="n">memory_leak_function</span><span class="p">):</span>
    <span class="o">.....</span>
    <span class="n">median_dict</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">get_memory_leak_median_value</span><span class="p">()</span>
    <span class="o">.....</span>
    <span class="n">TC</span> <span class="n">execution</span> <span class="n">part</span><span class="p">,</span> <span class="n">memory_leak_fun</span> <span class="n">will</span> <span class="n">capture</span> <span class="n">data</span>
    <span class="o">....</span>
    <span class="n">helpers</span><span class="o">.</span><span class="n">memory_leak_analysis</span><span class="p">(</span><span class="n">median_dict</span><span class="p">)</span>
    <span class="o">....</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.modify_deployment_replica_count">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">modify_deployment_replica_count</code><span class="sig-paren">(</span><em class="sig-param">deployment_name</em>, <em class="sig-param">replica_count</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.modify_deployment_replica_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to modify deployment replica count,
i.e to scale up or down deployment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deployment_name</strong> (<em>str</em>) – Name of deployment</p></li>
<li><p><strong>replica_count</strong> (<em>int</em>) – replica count to be changed to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True in case if changes are applied. False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.modify_osd_replica_count">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">modify_osd_replica_count</code><span class="sig-paren">(</span><em class="sig-param">resource_name</em>, <em class="sig-param">replica_count</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.modify_osd_replica_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to modify osd replica count to 0 or 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of osd i.e, ‘rook-ceph-osd-0-c9c4bc7c-bkf4b’</p></li>
<li><p><strong>replica_count</strong> (<em>int</em>) – osd replica count to be changed to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True in case if changes are applied. False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.modify_statefulset_replica_count">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">modify_statefulset_replica_count</code><span class="sig-paren">(</span><em class="sig-param">statefulset_name</em>, <em class="sig-param">replica_count</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.modify_statefulset_replica_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to modify statefulset replica count,
i.e to scale up or down statefulset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>statefulset_namee</strong> (<em>str</em>) – Name of statefulset</p></li>
<li><p><strong>replica_count</strong> (<em>int</em>) – replica count to be changed to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True in case if changes are applied. False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.mon_pods_running_on_same_node">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">mon_pods_running_on_same_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.mon_pods_running_on_same_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies two mons are running on same node</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.pod_start_time">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">pod_start_time</code><span class="sig-paren">(</span><em class="sig-param">pod_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.pod_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to measure time taken for container(s) to get into running state
by measuring the difference between container’s start time (when container
went into running state) and started time (when container was actually
started)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pod_obj</strong> (<em>obj</em>) – pod object to measure start time</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns the name and start time of container(s) in a pod</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>containers_start_time(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.pull_images">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">pull_images</code><span class="sig-paren">(</span><em class="sig-param">image_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.pull_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to pull images on all nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_name</strong> (<em>str</em>) – Name of the container image to be pulled</p>
</dd>
</dl>
<p>Returns: None</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.recover_mon_quorum">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">recover_mon_quorum</code><span class="sig-paren">(</span><em class="sig-param">mon_pod_obj_list</em>, <em class="sig-param">mon_pod_running</em>, <em class="sig-param">ceph_mon_daemon_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.recover_mon_quorum" title="Permalink to this definition">¶</a></dt>
<dd><p>Recover mon quorum back by following
procedure mentioned in <a class="reference external" href="https://access.redhat.com/solutions/5898541">https://access.redhat.com/solutions/5898541</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mon_pod_obj_list</strong> (<em>list</em>) – List of mon objects</p></li>
<li><p><strong>mon_pod_running</strong> (<em>obj</em>) – A mon object which is running</p></li>
<li><p><strong>ceph_mon_daemon_id</strong> (<em>list</em>) – List of crashed ceph mon id</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.refresh_oc_login_connection">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">refresh_oc_login_connection</code><span class="sig-paren">(</span><em class="sig-param">user=None</em>, <em class="sig-param">password=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.refresh_oc_login_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to refresh oc user login
Default login using kubeadmin user and password</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<em>str</em>) – Username to login</p></li>
<li><p><strong>password</strong> (<em>str</em>) – Password to login</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.remove_label_from_worker_node">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">remove_label_from_worker_node</code><span class="sig-paren">(</span><em class="sig-param">node_list</em>, <em class="sig-param">label_key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.remove_label_from_worker_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to remove label from worker node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_list</strong> (<em>list</em>) – List of node name</p></li>
<li><p><strong>label_key</strong> (<em>str</em>) – Label_key to be remove from worker node</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.remove_ocs_object_from_list">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">remove_ocs_object_from_list</code><span class="sig-paren">(</span><em class="sig-param">kind</em>, <em class="sig-param">resource_name</em>, <em class="sig-param">object_list</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.remove_ocs_object_from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of OCS objects, the function removes the object with kind and resource from the list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> (<em>str</em>) – resource kind like CephBlockPool, pvc.</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – name of the resource.</p></li>
<li><p><strong>object_list</strong> (<em>array</em>) – Array of OCS objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of OCS objects without removed object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(array)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.remove_scc_policy">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">remove_scc_policy</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.remove_scc_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Removing ServiceAccount from scc anyuid and privileged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – ServiceAccount name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the scc_policy deletion</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.retrieve_default_ingress_crt">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">retrieve_default_ingress_crt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.retrieve_default_ingress_crt" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the default ingress certificate from the router-ca secret
to the local code runner for usage with boto3.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.rsync_kubeconf_to_node">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">rsync_kubeconf_to_node</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.rsync_kubeconf_to_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to copy kubeconfig to OCP node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>str</em>) – OCP node to copy kubeconfig if not present</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.run_cmd_verify_cli_output">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">run_cmd_verify_cli_output</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em>, <em class="sig-param">expected_output_lst=()</em>, <em class="sig-param">cephtool_cmd=False</em>, <em class="sig-param">ocs_operator_cmd=False</em>, <em class="sig-param">debug_node=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.run_cmd_verify_cli_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Run command and verify its output</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – cli command</p></li>
<li><p><strong>expected_output_lst</strong> (<em>set</em>) – A set of strings that need to be included in the command output.</p></li>
<li><p><strong>cephtool_cmd</strong> (<em>bool</em>) – command on ceph-tool pod</p></li>
<li><p><strong>ocs_operator_cmd</strong> (<em>bool</em>) – command on ocs-operator pod</p></li>
<li><p><strong>debug_node</strong> (<em>str</em>) – name of node</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True of all strings are included in the command output, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.run_io_with_rados_bench">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">run_io_with_rados_bench</code><span class="sig-paren">(</span><em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.run_io_with_rados_bench" title="Permalink to this definition">¶</a></dt>
<dd><p>A task for radosbench. Runs radosbench command on specified pod . If
parameters are not provided task assumes few default parameters.This task
runs command in synchronous fashion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kw</strong> (<em>dict</em>) – <p>a dictionary of various radosbench parameters.
ex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pool_name</span><span class="p">:</span><span class="n">pool</span>
<span class="n">pg_num</span><span class="p">:</span><span class="n">number</span> <span class="n">of</span> <span class="n">pgs</span> <span class="k">for</span> <span class="n">pool</span>
<span class="n">op</span><span class="p">:</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">operation</span> <span class="p">{</span><span class="n">read</span><span class="p">,</span> <span class="n">write</span><span class="p">}</span>
<span class="n">cleanup</span><span class="p">:</span> <span class="kc">True</span> <span class="n">OR</span> <span class="kc">False</span>
</pre></div>
</div>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return value of radosbench command</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ret</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.scale_nb_resources">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">scale_nb_resources</code><span class="sig-paren">(</span><em class="sig-param">replica=1</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.scale_nb_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Function scales noobaa resources</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>replica</strong> (<em>int</em>) – Replica count</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.select_unique_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">select_unique_pvcs</code><span class="sig-paren">(</span><em class="sig-param">pvcs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.select_unique_pvcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the PVCs with unique access mode and volume mode combination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pvcs</strong> (<em>list</em>) – List of PVC objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of selected PVC objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.set_configmap_log_level_rook_ceph_operator">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">set_configmap_log_level_rook_ceph_operator</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.set_configmap_log_level_rook_ceph_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Set ROOK_LOG_LEVEL on configmap of rook-ceph-operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>str</em>) – type of log</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.set_image_lookup">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">set_image_lookup</code><span class="sig-paren">(</span><em class="sig-param">image_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.set_image_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to enable lookup, which allows reference to the image stream tag
in the image field of the object. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ oc set image-lookup mysql
$ oc run mysql --image=mysql
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_name</strong> (<em>str</em>) – Name of the image stream to pull
the image locally</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output of set image-lookup command</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.setup_pod_directories">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">setup_pod_directories</code><span class="sig-paren">(</span><em class="sig-param">pod_obj</em>, <em class="sig-param">dir_names</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.setup_pod_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates directories on the specified pod.
Directories created under the respective test name directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_obj</strong> – A pod object on which to create directories</p></li>
<li><p><strong>dir_names</strong> – A list of directories names to create.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of all the full paths of the created directories</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.storagecluster_independent_check">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">storagecluster_independent_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.storagecluster_independent_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the storagecluster is running in independent mode
by checking the value of spec.externalStorage.enable</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if storagecluster is running on external mode False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.validate_cephfilesystem">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">validate_cephfilesystem</code><span class="sig-paren">(</span><em class="sig-param">fs_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.validate_cephfilesystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify CephFileSystem exists at Ceph and OCP</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fs_name</strong> (<em>str</em>) – The name of the Ceph FileSystem</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if CephFileSystem is created at Ceph and OCP side else</dt><dd><p>will return False with valid msg i.e Failure cause</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.validate_pod_oomkilled">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">validate_pod_oomkilled</code><span class="sig-paren">(</span><em class="sig-param">pod_name</em>, <em class="sig-param">namespace='openshift-storage'</em>, <em class="sig-param">container=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.validate_pod_oomkilled" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate pod oomkilled message are found on log</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_name</strong> (<em>str</em>) – Name of the pod</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace of the pod</p></li>
<li><p><strong>container</strong> (<em>str</em>) – Name of the container</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if oomkill messages are not found on log.</dt><dd><p>False Otherwise.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>Assertion if failed to fetch logs</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.validate_pods_are_running_and_not_restarted">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">validate_pods_are_running_and_not_restarted</code><span class="sig-paren">(</span><em class="sig-param">pod_name</em>, <em class="sig-param">pod_restart_count</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.validate_pods_are_running_and_not_restarted" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate given pod is in running state and not restarted or re-spinned</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_name</strong> (<em>str</em>) – Name of the pod</p></li>
<li><p><strong>pod_restart_count</strong> (<em>int</em>) – Restart count of pod</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace of the pod</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if pod is in running state and restart</dt><dd><p>count matches the previous one</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.validate_pv_delete">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">validate_pv_delete</code><span class="sig-paren">(</span><em class="sig-param">pv_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.validate_pv_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>validates if pv is deleted after pvc deletion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pv_name</strong> (<em>str</em>) – pv from pvc to validates</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if deletion is successful</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If pv is not deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.validate_scc_policy">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">validate_scc_policy</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">namespace</em>, <em class="sig-param">scc_name='privileged'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.validate_scc_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate serviceaccount is added to scc of privileged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – Service Account name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – The namespace for the serviceaccount creation</p></li>
<li><p><strong>scc_name</strong> (<em>str</em>) – SCC name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if sc_name is present in scc of privileged else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_block_pool_exists">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_block_pool_exists</code><span class="sig-paren">(</span><em class="sig-param">pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_block_pool_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if a Ceph block pool exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pool_name</strong> (<em>str</em>) – The name of the Ceph block pool</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the Ceph block pool exists, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_pdb_mon">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_pdb_mon</code><span class="sig-paren">(</span><em class="sig-param">disruptions_allowed</em>, <em class="sig-param">max_unavailable_mon</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_pdb_mon" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare between the PDB status and the expected PDB status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disruptions_allowed</strong> (<em>int</em>) – the expected number of disruptions_allowed</p></li>
<li><p><strong>max_unavailable_mon</strong> (<em>int</em>) – the expected number of max_unavailable_mon</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the expected pdb state equal to actual pdb state, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_pv_mounted_on_node">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_pv_mounted_on_node</code><span class="sig-paren">(</span><em class="sig-param">node_pv_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_pv_mounted_on_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if mount point of a PV exists on a node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_pv_dict</strong> (<em>dict</em>) – Node to PV list mapping
eg: {‘node1’: [‘pv1’, ‘pv2’, ‘pv3’], ‘node2’: [‘pv4’, ‘pv5’]}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Node to existing PV list mapping</dt><dd><p>eg: {‘node1’: [‘pv1’, ‘pv3’], ‘node2’: [‘pv5’]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_quota_resource_exist">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_quota_resource_exist</code><span class="sig-paren">(</span><em class="sig-param">quota_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_quota_resource_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify quota resource exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>quota_name</strong> (<em>str</em>) – The name of quota</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return True if quota_name exist in list, otherwise False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running</code><span class="sig-paren">(</span><em class="sig-param">timeout=90</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_rook_ceph_crashcollector_pods_where_rook_ceph_pods_are_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify rook-ceph-crashcollector pods running on worker nodes
where rook-ceph pods are running.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – time to wait for verifying</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if rook-ceph-crashcollector pods running on worker nodes</dt><dd><p>where rook-ceph pods are running in the given timeout. False otherwise.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.verify_volume_deleted_in_backend">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">verify_volume_deleted_in_backend</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">image_uuid</em>, <em class="sig-param">pool_name=None</em>, <em class="sig-param">timeout=180</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.verify_volume_deleted_in_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that Image/Subvolume is deleted in the backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>image_uuid</strong> (<em>str</em>) – Part of VolID which represents corresponding
image/subvolume in backend, eg:
<code class="docutils literal notranslate"><span class="pre">oc</span> <span class="pre">get</span> <span class="pre">pv/&lt;volumeName&gt;</span> <span class="pre">-o</span> <span class="pre">jsonpath='{.spec.csi.volumeHandle}'</span></code>
Output is the CSI generated VolID and looks like:
<code class="docutils literal notranslate"><span class="pre">0001-000c-rook-cluster-0000000000000001-f301898c-a192-11e9-852a-1eeeb6975c91</span></code>
where image_uuid is <code class="docutils literal notranslate"><span class="pre">f301898c-a192-11e9-852a-1eeeb6975c91</span></code></p></li>
<li><p><strong>pool_name</strong> (<em>str</em>) – Name of the rbd-pool if interface is CephBlockPool</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Wait time for the volume to be deleted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if volume is deleted before timeout.</dt><dd><p>False if volume is not deleted.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.wait_for_ct_pod_recovery">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">wait_for_ct_pod_recovery</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.wait_for_ct_pod_recovery" title="Permalink to this definition">¶</a></dt>
<dd><p>In case the of node failures scenarios, in which the selected node is
running the ceph tools pod, we’ll want to wait for the pod recovery</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True in case the ceph tools pod was recovered, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.wait_for_pv_delete">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">wait_for_pv_delete</code><span class="sig-paren">(</span><em class="sig-param">pv_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.wait_for_pv_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for PVs to delete. Delete PVs having ReclaimPolicy ‘Retain’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pv_objs</strong> (<em>list</em>) – OCS instances of kind PersistentVolume</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.wait_for_resource_count_change">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">wait_for_resource_count_change</code><span class="sig-paren">(</span><em class="sig-param">func_to_use</em>, <em class="sig-param">previous_num</em>, <em class="sig-param">namespace</em>, <em class="sig-param">change_type='increase'</em>, <em class="sig-param">min_difference=1</em>, <em class="sig-param">timeout=20</em>, <em class="sig-param">interval=2</em>, <em class="sig-param">**func_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.wait_for_resource_count_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a change in total count of PVC or pod</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func_to_use</strong> (<em>function</em>) – Function to be used to fetch resource info
Supported functions: pod.get_all_pvcs(), pod.get_all_pods()</p></li>
<li><p><strong>previous_num</strong> (<em>int</em>) – Previous number of pods/PVCs for comparison</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Name of the namespace</p></li>
<li><p><strong>change_type</strong> (<em>str</em>) – Type of change to check. Accepted values are
‘increase’ and ‘decrease’. Default is ‘increase’.</p></li>
<li><p><strong>min_difference</strong> (<em>int</em>) – Minimum required difference in PVC/pod count</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Maximum wait time in seconds</p></li>
<li><p><strong>interval</strong> (<em>int</em>) – Time in seconds to wait between consecutive checks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if difference in count is greater than or equal to</dt><dd><p>’min_difference’. False in case of timeout.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.wait_for_resource_state">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">wait_for_resource_state</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">state</em>, <em class="sig-param">timeout=60</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.wait_for_resource_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a resource to get to a given status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>OCS obj</em>) – The resource object</p></li>
<li><p><strong>state</strong> (<em>str</em>) – The status to wait for</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Time in seconds to wait</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ResourceWrongStatusException" title="ocs_ci.ocs.exceptions.ResourceWrongStatusException"><strong>ResourceWrongStatusException</strong></a> – In case the resource hasn’t
    reached the desired state</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.helpers.wait_for_rook_ceph_pod_status">
<code class="sig-prename descclassname">ocs_ci.helpers.helpers.</code><code class="sig-name descname">wait_for_rook_ceph_pod_status</code><span class="sig-paren">(</span><em class="sig-param">pod_obj</em>, <em class="sig-param">desired_status</em>, <em class="sig-param">timeout=420</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.helpers.wait_for_rook_ceph_pod_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the rook ceph pod to reach the desired status. If the pod didn’t reach the
desired status, check if the reason is that the pod is not found. If this is the case,
check in the rook ceph pod operator logs to see if the pod reached the desired status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.pod.Pod" title="ocs_ci.ocs.resources.pod.Pod"><em>ocs_ci.ocs.resources.pod.Pod</em></a>) – The rook ceph pod object</p></li>
<li><p><strong>desired_status</strong> (<em>str</em>) – The desired status of the pod to wait for</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time to wait for the pod to reach the desired status</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the rook ceph pod to reach the desired status. False, otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.longevity_helpers">
<span id="ocs-ci-helpers-longevity-helpers-module"></span><h2>ocs_ci.helpers.longevity_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.longevity_helpers" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.create_restore_verify_snapshots">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">create_restore_verify_snapshots</code><span class="sig-paren">(</span><em class="sig-param">multi_snapshot_factory</em>, <em class="sig-param">snapshot_restore_factory</em>, <em class="sig-param">pod_factory</em>, <em class="sig-param">pvc_objs</em>, <em class="sig-param">namespace</em>, <em class="sig-param">file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.create_restore_verify_snapshots" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates snapshots from each PVC in the provided list of PVCs,
Restores new PVCs out of the created snapshots
and
Verifies data integrity by checking the existence and md5sum of file in the restored PVC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>multi_snapshot_factory</strong> – Fixture to create a VolumeSnapshot of each PVC in the provided list of PVCs.</p></li>
<li><p><strong>snapshot_restore_factory</strong> – Fixture to create a new PVCs out of the VolumeSnapshot provided.</p></li>
<li><p><strong>pod_factory</strong> – Fixture to create new PODs.</p></li>
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects for which snapshots are to be created.</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace in which the PVCs are created.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – Name of the file on which FIO is performed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple of size 2 containing a list of restored PVC objects and a list of the pods attached to the</dt><dd><p>restored PVCs, respectively.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.expand_verify_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">expand_verify_pvcs</code><span class="sig-paren">(</span><em class="sig-param">pvc_objs</em>, <em class="sig-param">pod_objs</em>, <em class="sig-param">pvc_size_new</em>, <em class="sig-param">file_name</em>, <em class="sig-param">fio_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.expand_verify_pvcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands size of each PVC in the provided list of PVCs,
Verifies data integrity by checking the existence and md5sum of file in the expanded PVC
and
Runs FIO on expanded PVCs and verifies results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects which are to be expanded.</p></li>
<li><p><strong>pod_objs</strong> (<em>list</em>) – List of POD objects attached to the PVCs.</p></li>
<li><p><strong>pvc_size_new</strong> (<em>int</em>) – Size of the expanded PVC in GB.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – Name of the file on which FIO is performed.</p></li>
<li><p><strong>fio_size</strong> (<em>int</em>) – Size in MB of FIO.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.measure_pod_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">measure_pod_creation_time</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">num_of_pods</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.measure_pod_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures and Logs the POD Creation Time of all the PODs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace in which the PODs are created.</p></li>
<li><p><strong>num_of_pods</strong> (<em>int</em>) – Number of PODs created.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Logs:</dt><dd><p>POD Creation Time of all the PODs.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.measure_pod_to_pvc_attach_time">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">measure_pod_to_pvc_attach_time</code><span class="sig-paren">(</span><em class="sig-param">pod_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.measure_pod_to_pvc_attach_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures and Logs Attach Time of all PODs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pod_objs</strong> (<em>list</em>) – List of POD objects for which we have to measure the time.</p>
</dd>
</dl>
<dl class="simple">
<dt>Logs:</dt><dd><p>Attach time of all PODs, as well as the average time.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.measure_pvc_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">measure_pvc_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_objs</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.measure_pvc_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures and Logs PVC Creation Time of all PVCs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on.</p></li>
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects for which we have to measure the time.</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – Formatted time from which and on to search the relevant logs.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Logs:</dt><dd><p>PVC Creation Time of all the PVCs.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.measure_pvc_deletion_time">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">measure_pvc_deletion_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.measure_pvc_deletion_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures and Logs PVC Deletion Time of all PVCs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on.</p></li>
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects for which we have to measure the time.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Logs:</dt><dd><p>PVC Deletion Time of all the PVCs.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.longevity_helpers.write_empty_files_to_bucket">
<code class="sig-prename descclassname">ocs_ci.helpers.longevity_helpers.</code><code class="sig-name descname">write_empty_files_to_bucket</code><span class="sig-paren">(</span><em class="sig-param">mcg_obj</em>, <em class="sig-param">awscli_pod_session</em>, <em class="sig-param">bucket_name</em>, <em class="sig-param">test_directory_setup</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.longevity_helpers.write_empty_files_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Write empty files to bucket and verify if they are created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mcg_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.mcg.MCG" title="ocs_ci.ocs.resources.mcg.MCG"><em>MCG</em></a>) – An MCG object containing the MCG S3 connection credentials</p></li>
<li><p><strong>awscli_pod_session</strong> – Fixture to create a new AWSCLI pod for relaying commands.</p></li>
<li><p><strong>bucket_name</strong> (<em>str</em>) – Name of the bucket on which files are to be written.</p></li>
<li><p><strong>test_directory_setup</strong> – Fixture to setup test DIRs.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – Raises an exception if files are not created.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A set of names of all bucket objects.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Set</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.managed_services">
<span id="ocs-ci-helpers-managed-services-module"></span><h2>ocs_ci.helpers.managed_services module<a class="headerlink" href="#module-ocs_ci.helpers.managed_services" title="Permalink to this headline">¶</a></h2>
<p>Managed Services related functionalities</p>
<dl class="function">
<dt id="ocs_ci.helpers.managed_services.get_all_storageclassclaims">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">get_all_storageclassclaims</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.get_all_storageclassclaims" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all storageclassclaims</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>OCS objects of kind Storageclassclaim</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.get_ocs_osd_deployer_version">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">get_ocs_osd_deployer_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.get_ocs_osd_deployer_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get OCS OSD deployer version from CSV</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>OCS OSD deployer version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Version</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.get_storageclassclaims_of_storageclient">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">get_storageclassclaims_of_storageclient</code><span class="sig-paren">(</span><em class="sig-param">storageclient_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.get_storageclassclaims_of_storageclient" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all storageclassclaims associated with a storageclient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storageclient_name</strong> (<em>str</em>) – Name of the storageclient</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>OCS objects of kind Storageclassclaim</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.get_used_capacity">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">get_used_capacity</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.get_used_capacity" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify OSD percent used capacity greate than ceph_full_ratio</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>str</em>) – message to be logged</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The percentage of the used capacity in the cluster</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_client_operator_security">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_client_operator_security</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_client_operator_security" title="Permalink to this definition">¶</a></dt>
<dd><p>Check ocs-client-operator-controller-manager permissions</p>
<ol class="arabic simple">
<li><p>Verify <cite>runAsUser</cite> is not 0</p></li>
<li><p>Verify <cite>SecurityContext.allowPrivilegeEscalation</cite> is set to false</p></li>
<li><p>Verify <cite>SecurityContext.capabilities.drop</cite> contains ALL</p></li>
</ol>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_cluster_secrets">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_cluster_secrets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_cluster_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the secrets present in FaaS cluster</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_consumer_resources">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_consumer_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_consumer_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify resources specific to FaaS consumer</p>
<ol class="arabic simple">
<li><p>Verify CSV phase</p></li>
<li><p>Verify client endpoint</p></li>
<li><p>Check that there’s no storagecluster</p></li>
</ol>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_provider_resources">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_provider_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_provider_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify resources specific to FaaS provider cluster</p>
<ol class="arabic simple">
<li><p>Verify CSV phase</p></li>
<li><p>Verify ocs-provider-server pod is Running</p></li>
<li><p>Verify ocs-metrics-exporter pod is Running</p></li>
<li><p>Verify that Cephcluster is Ready and hostNetworking is True</p></li>
<li><p>Verify that the security groups are set up correctly</p></li>
<li><p>Check the presence of catalogsource and its state</p></li>
<li><p>Check the presence of subscription and its health</p></li>
<li><p>Check that mon PVCs have gp3-csi storageclass</p></li>
<li><p>Check managedFusionOffering release, usableCapacityInTiB and onboardingValidationKey</p></li>
<li><p>Verify the version of Prometheus</p></li>
<li><p>Verify aws volumes</p></li>
<li><p>Verify configmaps</p></li>
</ol>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_provider_storagecluster">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_provider_storagecluster</code><span class="sig-paren">(</span><em class="sig-param">sc_data</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_provider_storagecluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify provider storagecluster</p>
<ol class="arabic simple">
<li><p>allowRemoteStorageConsumers: true</p></li>
<li><p>hostNetwork: true</p></li>
<li><dl class="simple">
<dt>matchExpressions:</dt><dd><p>key: node-role.kubernetes.io/worker
operator: Exists
key: node-role.kubernetes.io/infra
operator: DoesNotExist</p>
</dd>
</dl>
</li>
<li><p>storageProviderEndpoint</p></li>
<li><dl class="simple">
<dt>annotations:</dt><dd><p>uninstall.ocs.openshift.io/cleanup-policy: delete
uninstall.ocs.openshift.io/mode: graceful</p>
</dd>
</dl>
</li>
<li><p>Check the storagecluster resources limits and requests are valid</p></li>
<li><p>Verify the Faas provider storagecluster storages</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sc_data</strong> (<em>dict</em>) – storagecluster data dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_provider_storagecluster_storages">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_provider_storagecluster_storages</code><span class="sig-paren">(</span><em class="sig-param">sc_data</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_provider_storagecluster_storages" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the Faas provider storagecluster storages</p>
<ol class="arabic simple">
<li><p>Check the storagecluster backingStorageClasses.</p></li>
<li><p>Check that the default ocs storage class is exist in the backingStorageClasses.</p></li>
<li><p>Check that the type of the default ocs storage class is “gp3”.</p></li>
<li><p>Check the defaultStorageProfile value</p></li>
<li><p>Check that the default storage profile is found in the StorageProfiles.</p></li>
<li><p>Check that the values in the storage profile are correct</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sc_data</strong> (<em>dict</em>) – The storagecluster data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_faas_resources">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_faas_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_faas_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the presence and status of resources in FaaS clusters</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_osd_distribution_on_provider">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_osd_distribution_on_provider</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_osd_distribution_on_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the OSD distribution on the provider cluster</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_osd_used_capacity_greater_than_expected">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_osd_used_capacity_greater_than_expected</code><span class="sig-paren">(</span><em class="sig-param">expected_used_capacity</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_osd_used_capacity_greater_than_expected" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify OSD percent used capacity greater than ceph_full_ratio</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expected_used_capacity</strong> (<em>float</em>) – expected used capacity</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if used_capacity greater than expected_used_capacity, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_pods_in_managed_fusion_namespace">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_pods_in_managed_fusion_namespace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_pods_in_managed_fusion_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the status of pods in the namespace managed-fusion</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_provider_aws_volumes">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_provider_aws_volumes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_provider_aws_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify provider AWS volumes:
1. Volumes for OSD have size 4096
2. Volumes for OSD have IOPS 12000
3. Namespace should be fusion-storage</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_provider_topology">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_provider_topology</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_provider_topology" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify topology in a Managed Services provider cluster</p>
<ol class="arabic simple">
<li><p>Verify replica count</p></li>
<li><p>Verify total size</p></li>
<li><p>Verify OSD size</p></li>
<li><p>Verify worker node instance type</p></li>
<li><p>Verify worker node instance count</p></li>
<li><p>Verify OSD count</p></li>
<li><p>Verify OSD CPU and memory</p></li>
</ol>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_storageclient">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_storageclient</code><span class="sig-paren">(</span><em class="sig-param">storageclient_name=None</em>, <em class="sig-param">namespace=None</em>, <em class="sig-param">provider_name=None</em>, <em class="sig-param">verify_sc=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_storageclient" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify status, values and resources related to a storageclient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storageclient_name</strong> (<em>str</em>) – Name of the storageclient to be verified. If the name is not given, it will be
assumed that only one storageclient is present in the cluster.</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace where the storageclient is present.
Default value will be taken from ENV_DATA[“cluster_namespace”]</p></li>
<li><p><strong>provider_name</strong> (<em>str</em>) – Name of the provider cluster to which the storageclient is connected.</p></li>
<li><p><strong>verify_sc</strong> (<em>bool</em>) – True to verify the storageclassclaims and storageclasses associated with the storageclient.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.managed_services.verify_storageclient_storageclass_claims">
<code class="sig-prename descclassname">ocs_ci.helpers.managed_services.</code><code class="sig-name descname">verify_storageclient_storageclass_claims</code><span class="sig-paren">(</span><em class="sig-param">storageclient</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.managed_services.verify_storageclient_storageclass_claims" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the status of storageclassclaims and the presence of the storageclass associated with the storageclient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storageclient_name</strong> (<em>str</em>) – Name of the storageclient</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.performance_lib">
<span id="ocs-ci-helpers-performance-lib-module"></span><h2>ocs_ci.helpers.performance_lib module<a class="headerlink" href="#module-ocs_ci.helpers.performance_lib" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.calculate_operation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">calculate_operation_time</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">times</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.calculate_operation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculation the total time in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of object to calculate the time - for logging only</p></li>
<li><p><strong>times</strong> (<em>dict</em>) – Dictioanry of {‘start’: datetime, ‘end’: datetime, ‘total’: int}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of seconds between start time to end time.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.csi_bulk_pvc_time_measure">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">csi_bulk_pvc_time_measure</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_objs</em>, <em class="sig-param">operation</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.csi_bulk_pvc_time_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC time (create / delete) in the CSI driver</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on</p></li>
<li><p><strong>pvc_objs</strong> (<em>list</em>) – list of the PVC objects which we want to mesure</p></li>
<li><p><strong>operation</strong> (<em>str</em>) – which operation to mesure - ‘create’ / ‘delete’</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – Formatted time from which and on to search the relevant logs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>time in seconds which took the CSI to hendale the PVC</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.csi_pvc_time_measure">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">csi_pvc_time_measure</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_obj</em>, <em class="sig-param">operation</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.csi_pvc_time_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC time (create / delete) in the CSI driver</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on</p></li>
<li><p><strong>pvc_obj</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.pvc.PVC" title="ocs_ci.ocs.resources.pvc.PVC"><em>PVC</em></a>) – the PVC object which we want to mesure</p></li>
<li><p><strong>operation</strong> (<em>str</em>) – which operation to mesure - ‘create’ / ‘delete’</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – Formatted time from which and on to search the relevant logs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>time in seconds which took the CSI to hendale the PVC</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(float)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.extruct_timestamp_from_log">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">extruct_timestamp_from_log</code><span class="sig-paren">(</span><em class="sig-param">line</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.extruct_timestamp_from_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Excructing from the log line the timestamp of a message. adidng the current year
since it is not exists in the log line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – a log line.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string of the timestamp from the log line.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.get_logfile_names">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">get_logfile_names</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">provisioning=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.get_logfile_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds names for log files pods in which logs for pvc creation are located</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on</p></li>
<li><p><strong>provisioning</strong> (<em>bool</em>) – if True, look for the provisioner log pods</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>names of the log files relevant for searching in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>log names (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.get_pvc_provision_times">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">get_pvc_provision_times</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em>, <em class="sig-param">start_time</em>, <em class="sig-param">time_type='all'</em>, <em class="sig-param">op='all'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.get_pvc_provision_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the starting/ending creation time of a PVC based on provisioner logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_name</strong> (<em>str / list</em>) – Name of the PVC(s) for creation time
the list will be list of pvc objects</p></li>
<li><p><strong>start_time</strong> (<em>time</em>) – the starttime of the test to reduce log size reading</p></li>
<li><p><strong>time_type</strong> (<em>str</em>) – the type of time to mesure : csi / total / all (csi &amp; total)</p></li>
<li><p><strong>op</strong> (<em>str</em>) – the operation to mesure : create / delete / all (create &amp; delete)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all creation and deletion times for each pvc.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictioanry</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.get_snapshot_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">get_snapshot_time</code><span class="sig-paren">(</span><em class="sig-param">snap_name</em>, <em class="sig-param">status</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.get_snapshot_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the starting/ending creation time of a snapshot based on logs</p>
<p>The time and date extraction code below has been modified to read
the month and day data in the logs.  This fixes an error where negative
time values are calculated when test runs cross midnight.  Also, previous
calculations would not set the year, and so the calculations were done
as if the year were 1900.  This is not a problem except that 1900 was
not a leap year and so the next February 29th would throw ValueErrors
for the whole day.  To avoid this problem, changes were made to also
include the current year.</p>
<p>Incorrect times will still be given for tests that cross over from
December 31 to January 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_name</strong> (<em>str / list</em>) – Name of the PVC(s) for creation time
the list will be list of pvc objects</p></li>
<li><p><strong>status</strong> (<em>str</em>) – the status that we want to get - Start / End</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – start time, starting from which the logs are searched</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time of searched snapshot operation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.measure_csi_snapshot_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">measure_csi_snapshot_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">snapshot_id</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.measure_csi_snapshot_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC creation time, provided pvc name and time after which the PVC was created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on</p></li>
<li><p><strong>snapshot_id</strong> (<em>str</em>) – Id of the snapshot which creation time is measured</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – Formatted time from which and on to search the relevant logs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(float) snapshot creation time in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.measure_pvc_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">measure_pvc_creation_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_name</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.measure_pvc_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure PVC creation time, provided pvc name and time after which the PVC was created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – an interface (RBD or CephFS) to run on</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – Name of the pvc for which we measure the time</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – Formatted time from which and on to search the relevant logs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(float) creation time for PVC in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.measure_total_snapshot_creation_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">measure_total_snapshot_creation_time</code><span class="sig-paren">(</span><em class="sig-param">snap_name</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.measure_total_snapshot_creation_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure Snapshot creation time based on logs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>snap_name</strong> (<em>str</em>) – Name of the snapshot for creation time measurement</p></li>
<li><p><strong>start_time</strong> (<em>str</em>) – start time, starting from which the logs are searched</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Creation time for the snapshot</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.pod_attach_csi_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">pod_attach_csi_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pv_name</em>, <em class="sig-param">start_time</em>, <em class="sig-param">namespace='openshift-storage'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.pod_attach_csi_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pod start/attach csi time of a pod based on csi-rbdplugin container in csi-rbdplugin pods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pv_name</strong> (<em>str</em>) – Name of the PV</p></li>
<li><p><strong>start_time</strong> (<em>time</em>) – the start time of the test to reduce log size reading</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the tests namespace</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pod attachment csi time in seconds
(time. time): Start time of node stage, End time of node publish</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<dl class="simple">
<dt>Raise:</dt><dd><p>Exception : in case that the expected time logs are not found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.pod_bulk_attach_csi_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">pod_bulk_attach_csi_time</code><span class="sig-paren">(</span><em class="sig-param">interface</em>, <em class="sig-param">pvc_objs</em>, <em class="sig-param">csi_start_time</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.pod_bulk_attach_csi_time" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interface</strong> (<em>str</em>) – The interface backed the PVC</p></li>
<li><p><strong>pvc_objs</strong> (<em>list</em>) – List of PVC objects to which pods were attached</p></li>
<li><p><strong>csi_start_time</strong> (<em>time</em>) – the start time of the test to reduce log size reading</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the tests namespace</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.read_csi_logs">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">read_csi_logs</code><span class="sig-paren">(</span><em class="sig-param">log_names</em>, <em class="sig-param">container_name</em>, <em class="sig-param">start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.read_csi_logs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reading specific CSI logs starting on a specific time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_names</strong> (<em>list</em>) – list of pods to read log from them</p></li>
<li><p><strong>container_name</strong> (<em>str</em>) – the name of the specific container in the pod</p></li>
<li><p><strong>start_time</strong> (<em>time</em>) – the time stamp which will use as starting point in the log</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of lines from all logs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.run_command">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">run_command</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">out_format='string'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Running command on the OS and return the STDOUT &amp; STDERR outputs
in case of argument is not string or list, return error message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str/list</em>) – the command to execute</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – the command timeout in seconds, default is 10 Min.</p></li>
<li><p><strong>out_format</strong> (<em>str</em>) – in which format to return the output: string / list</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – dictionary of argument as subprocess get</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all STDOUT and STDERR output as list of lines, or one string separated by NewLine</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list or str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.run_oc_command">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">run_oc_command</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.run_oc_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Running an ‘oc’ command
This function is needed in Performance tests in order to be able to run a separate command within the test
without creating additional objects which increases memory consumed by the test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – the command to run</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace where to run the command. If None
is provided then value from config will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the results of the command as list of lines</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.string_to_time">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">string_to_time</code><span class="sig-paren">(</span><em class="sig-param">time_string</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.string_to_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Converting string which present a time stamp to a time object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time_string</strong> (<em>str</em>) – the string to convert</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a time object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.wait_for_resource_bulk_status">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">wait_for_resource_bulk_status</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">resource_count</em>, <em class="sig-param">namespace</em>, <em class="sig-param">status</em>, <em class="sig-param">timeout=60</em>, <em class="sig-param">sleep_time=3</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.wait_for_resource_bulk_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Waiting for bulk of resources (from the same type) to reach the desire status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – the resoure type to wait for</p></li>
<li><p><strong>resource_count</strong> (<em>int</em>) – the number of rusource to wait for - to wait for deleteion
of resources, this should be ‘0’</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – the namespace where the resources should be</p></li>
<li><p><strong>status</strong> (<em>str</em>) – the status of the resources to be in.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – how much time to wait for the resources (in sec.)- default is 1 Minute</p></li>
<li><p><strong>sleep_time</strong> (<em>int</em>) – how much time to wait between each iteration check - default is 3 sec.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘True’ if all resources reach the desire state</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<dl class="simple">
<dt>Raise:</dt><dd><p>Exception : in case of not all resources reach the desire state.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.performance_lib.write_fio_on_pod">
<code class="sig-prename descclassname">ocs_ci.helpers.performance_lib.</code><code class="sig-name descname">write_fio_on_pod</code><span class="sig-paren">(</span><em class="sig-param">pod_obj</em>, <em class="sig-param">file_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.performance_lib.write_fio_on_pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes IO of file_size size to a pod</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod_obj</strong> – pod object to write IO</p></li>
<li><p><strong>file_size</strong> – the size of the IO to be written opn pod</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.proxy">
<span id="ocs-ci-helpers-proxy-module"></span><h2>ocs_ci.helpers.proxy module<a class="headerlink" href="#module-ocs_ci.helpers.proxy" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.helpers.proxy.get_cluster_proxies">
<code class="sig-prename descclassname">ocs_ci.helpers.proxy.</code><code class="sig-name descname">get_cluster_proxies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.proxy.get_cluster_proxies" title="Permalink to this definition">¶</a></dt>
<dd><p>Get http and https proxy configuration:</p>
<ul class="simple">
<li><p>If both <code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;proxy&quot;]</span></code> and <code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;disconnected&quot;]</span></code> are
not set or set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, return empty strings for all <code class="docutils literal notranslate"><span class="pre">http_proxy</span></code>,
<code class="docutils literal notranslate"><span class="pre">https_proxy</span></code> and <code class="docutils literal notranslate"><span class="pre">no_proxy</span></code>.</p></li>
<li><p>Next statements apply, if one of <code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;proxy&quot;]</span></code> or
<code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;disconnected&quot;]</span></code> is set to true.</p></li>
<li><p>If configuration <code class="docutils literal notranslate"><span class="pre">ENV_DATA[&quot;http_proxy&quot;]</span></code> and <code class="docutils literal notranslate"><span class="pre">ENV_DATA[&quot;no_proxy&quot;]</span></code>
(and prospectively <code class="docutils literal notranslate"><span class="pre">ENV_DATA[&quot;https_proxy&quot;]</span></code>) exists, return the
respective values. (If https_proxy not defined, use value from http_proxy.)</p></li>
<li><p>If configuration <code class="docutils literal notranslate"><span class="pre">ENV_DATA[&quot;http_proxy&quot;]</span></code> or <code class="docutils literal notranslate"><span class="pre">ENV_DATA[&quot;no_proxy&quot;]</span></code>
doesn’t exist, try to gather cluster wide proxy configuration.
(If just one of those parameters exists, the configuration value have
higher priority and the other value is gathered from cluster wide proxy
configuration object.)</p></li>
<li><p>Additionally if <code class="docutils literal notranslate"><span class="pre">http_proxy</span></code> is gathered from cluster wide proxy
configuration and <code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;disconnected&quot;]</span></code> is not defined or set to
<code class="docutils literal notranslate"><span class="pre">false</span></code>, mark the cluster as cluster behind proxy by setting
<code class="docutils literal notranslate"><span class="pre">DEPLOYMENT[&quot;proxy&quot;]</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(http_proxy, https_proxy, no_proxy)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.proxy.update_container_with_proxy_env">
<code class="sig-prename descclassname">ocs_ci.helpers.proxy.</code><code class="sig-name descname">update_container_with_proxy_env</code><span class="sig-paren">(</span><em class="sig-param">job_pod_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.proxy.update_container_with_proxy_env" title="Permalink to this definition">¶</a></dt>
<dd><p>If applicable, update Job or Pod configuration dict with http_proxy,
https_proxy and no_proxy env variables (required for disconnected clusters
and clusters behind proxy).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_pod_dict</strong> (<em>dict</em>) – dictionary with Job or Pod configuration (updated
in-place)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.pvc_ops">
<span id="ocs-ci-helpers-pvc-ops-module"></span><h2>ocs_ci.helpers.pvc_ops module<a class="headerlink" href="#module-ocs_ci.helpers.pvc_ops" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.helpers.pvc_ops.create_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.pvc_ops.</code><code class="sig-name descname">create_pvcs</code><span class="sig-paren">(</span><em class="sig-param">multi_pvc_factory</em>, <em class="sig-param">interface</em>, <em class="sig-param">project=None</em>, <em class="sig-param">status=''</em>, <em class="sig-param">storageclass=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.pvc_ops.create_pvcs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.pvc_ops.delete_pods">
<code class="sig-prename descclassname">ocs_ci.helpers.pvc_ops.</code><code class="sig-name descname">delete_pods</code><span class="sig-paren">(</span><em class="sig-param">pod_objs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.pvc_ops.delete_pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete pods</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.helpers.pvc_ops.test_create_delete_pvcs">
<code class="sig-prename descclassname">ocs_ci.helpers.pvc_ops.</code><code class="sig-name descname">test_create_delete_pvcs</code><span class="sig-paren">(</span><em class="sig-param">multi_pvc_factory</em>, <em class="sig-param">pod_factory</em>, <em class="sig-param">project=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.pvc_ops.test_create_delete_pvcs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers.sanity_helpers">
<span id="ocs-ci-helpers-sanity-helpers-module"></span><h2>ocs_ci.helpers.sanity_helpers module<a class="headerlink" href="#module-ocs_ci.helpers.sanity_helpers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.sanity_helpers.</code><code class="sig-name descname">Sanity</code><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for cluster health and functional validations</p>
<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity.create_pvc_delete">
<code class="sig-name descname">create_pvc_delete</code><span class="sig-paren">(</span><em class="sig-param">multi_pvc_factory</em>, <em class="sig-param">project=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity.create_pvc_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and deletes all types of PVCs</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity.create_resources">
<code class="sig-name descname">create_resources</code><span class="sig-paren">(</span><em class="sig-param">pvc_factory</em>, <em class="sig-param">pod_factory</em>, <em class="sig-param">bucket_factory</em>, <em class="sig-param">rgw_bucket_factory</em>, <em class="sig-param">run_io=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity.create_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanity validation: Create resources - pods, OBCs (RGW and MCG), PVCs (FS and RBD) and run IO</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvc_factory</strong> (<em>function</em>) – A call to pvc_factory function</p></li>
<li><p><strong>pod_factory</strong> (<em>function</em>) – A call to pod_factory function</p></li>
<li><p><strong>bucket_factory</strong> (<em>function</em>) – A call to bucket_factory function</p></li>
<li><p><strong>rgw_bucket_factory</strong> (<em>function</em>) – A call to rgw_bucket_factory function</p></li>
<li><p><strong>run_io</strong> (<em>bool</em>) – True for run IO, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity.delete_resources">
<code class="sig-name descname">delete_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity.delete_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanity validation - Delete resources (pods, PVCs and OBCs)</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity.health_check">
<code class="sig-name descname">health_check</code><span class="sig-paren">(</span><em class="sig-param">cluster_check=True</em>, <em class="sig-param">tries=20</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity.health_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Ceph and cluster health checks</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.Sanity.obc_put_obj_create_delete">
<code class="sig-name descname">obc_put_obj_create_delete</code><span class="sig-paren">(</span><em class="sig-param">mcg_obj</em>, <em class="sig-param">bucket_factory</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.Sanity.obc_put_obj_create_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates bucket then writes, reads and deletes objects</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.helpers.sanity_helpers.SanityExternalCluster">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.sanity_helpers.</code><code class="sig-name descname">SanityExternalCluster</code><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityExternalCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.helpers.sanity_helpers.Sanity" title="ocs_ci.helpers.sanity_helpers.Sanity"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.helpers.sanity_helpers.Sanity</span></code></a></p>
<p>Helpers for health check and functional validation
in External mode</p>
</dd></dl>

<dl class="class">
<dt id="ocs_ci.helpers.sanity_helpers.SanityManagedService">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.helpers.sanity_helpers.</code><code class="sig-name descname">SanityManagedService</code><span class="sig-paren">(</span><em class="sig-param">create_scale_pods_and_pvcs_using_kube_job_on_ms_consumers</em>, <em class="sig-param">scale_count=None</em>, <em class="sig-param">pvc_per_pod_count=5</em>, <em class="sig-param">start_io=True</em>, <em class="sig-param">io_runtime=None</em>, <em class="sig-param">pvc_size=None</em>, <em class="sig-param">max_pvc_size=30</em>, <em class="sig-param">consumer_indexes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityManagedService" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.helpers.sanity_helpers.Sanity" title="ocs_ci.helpers.sanity_helpers.Sanity"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.helpers.sanity_helpers.Sanity</span></code></a></p>
<p>Class for cluster health and functional validations for the Managed Service</p>
<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.SanityManagedService.base_create_resources_on_ms_consumers">
<code class="sig-name descname">base_create_resources_on_ms_consumers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityManagedService.base_create_resources_on_ms_consumers" title="Permalink to this definition">¶</a></dt>
<dd><p>Create resources on MS consumers.
This function uses the factory “create_scale_pods_and_pvcs_using_kube_job_on_ms_consumers”
for creating the resources - Create scale pods, PVCs, and run IO using a Kube job on MS consumers.
If it fails to create the resources, it cleans up the current resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>ocs_ci.ocs.exceptions.CommandFailed</strong></a> – In case of a command failed</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.SanityManagedService.create_resources_on_ms_consumers">
<code class="sig-name descname">create_resources_on_ms_consumers</code><span class="sig-paren">(</span><em class="sig-param">tries=1</em>, <em class="sig-param">delay=30</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityManagedService.create_resources_on_ms_consumers" title="Permalink to this definition">¶</a></dt>
<dd><p>Try creates resources for MS consumers ‘tries’ times with delay ‘delay’ between the iterations
using the method ‘base_create_resources_on_ms_consumers’. If not specified, the default value of
‘tries’ is 1 - which means that by default, it only tries to create the resources once.
In every iteration, if it fails to generate the resources, it cleans up the current resources
before continuing to the next iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tries</strong> (<em>int</em>) – The number of tries to create the resources on MS consumers</p></li>
<li><p><strong>delay</strong> (<em>int</em>) – The delay in seconds between retries</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>ocs_ci.ocs.exceptions.CommandFailed</strong></a> – In case of a command failed</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.SanityManagedService.delete_resources_on_ms_consumers">
<code class="sig-name descname">delete_resources_on_ms_consumers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityManagedService.delete_resources_on_ms_consumers" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the resources from the MS consumers</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.helpers.sanity_helpers.SanityManagedService.health_check_ms">
<code class="sig-name descname">health_check_ms</code><span class="sig-paren">(</span><em class="sig-param">cluster_check=True</em>, <em class="sig-param">tries=20</em>, <em class="sig-param">consumers_ceph_health_check=True</em>, <em class="sig-param">consumers_tries=10</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.helpers.sanity_helpers.SanityManagedService.health_check_ms" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Ceph and cluster health checks on Managed Service cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_check</strong> (<em>bool</em>) – If true, perform the cluster check. False, otherwise.</p></li>
<li><p><strong>tries</strong> (<em>int</em>) – The number of tries to perform ceph health check</p></li>
<li><p><strong>consumers_ceph_health_check</strong> (<em>bool</em>) – If true and the cluster is an MS provider cluster,
perform ceph health check on the ms consumer clusters.</p></li>
<li><p><strong>consumers_tries</strong> – The number of tries to perform ceph health check on the MS consumer clusters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.helpers">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ocs_ci.helpers" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ocs_ci.ocs.html" class="btn btn-neutral float-right" title="ocs_ci.ocs package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ocs_ci.framework.tests.html" class="btn btn-neutral float-left" title="ocs_ci.framework.tests package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, OCS-QE

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>