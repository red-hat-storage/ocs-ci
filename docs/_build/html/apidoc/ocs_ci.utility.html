

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ocs_ci.utility package &mdash; OCS-CI  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ocs_ci.utility.perf_dash package" href="ocs_ci.utility.perf_dash.html" />
    <link rel="prev" title="ocs_ci.tests package" href="ocs_ci.tests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> OCS-CI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Package documentations:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">ocs_ci modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ocs_ci.html">ocs_ci package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="ocs_ci.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.deployment.html">ocs_ci.deployment package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.framework.html">ocs_ci.framework package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.helpers.html">ocs_ci.helpers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.ocs.html">ocs_ci.ocs package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocs_ci.tests.html">ocs_ci.tests package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ocs_ci.utility package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ocs_ci.html#module-ocs_ci">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code_review.html">Code review/contribution best practices in OCS-CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guidelines.html">Coding guidelines for OCS-CI project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supported_platforms.html">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-getting-various-ocs-image-versions">usage for getting various ocs image versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-cleanup">usage for cleanup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-to-shutdown-aws-nodes-when-nodes-are-not-in-use">usage to shutdown AWS nodes when nodes are not in use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html#usage-for-ocs-build-tool">Usage for ocs-build tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing_tests.html">Writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stable_branch.html">Stable Branch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readmefiles/conf.README.html">Config directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fixture_usage.html">Guidelines for fixtures usage in OCS-CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workarounds.html">Tracking of workarounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_guidelines.html">OCS-CI Release Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usecases/index.html">Common Use cases and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multicluster_test_example.html">Multi-cluster test example</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OCS-CI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">ocs_ci</a> &raquo;</li>
        
          <li><a href="ocs_ci.html">ocs_ci package</a> &raquo;</li>
        
      <li>ocs_ci.utility package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/ocs_ci.utility.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ocs-ci-utility-package">
<h1>ocs_ci.utility package<a class="headerlink" href="#ocs-ci-utility-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ocs_ci.utility.perf_dash.html">ocs_ci.utility.perf_dash package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.perf_dash.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.perf_dash.html#module-ocs_ci.utility.perf_dash.dashboard_api">ocs_ci.utility.perf_dash.dashboard_api module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.perf_dash.html#module-ocs_ci.utility.perf_dash">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocs_ci.utility.spreadsheet.html">ocs_ci.utility.spreadsheet package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.spreadsheet.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.spreadsheet.html#module-ocs_ci.utility.spreadsheet.spreadsheet_api">ocs_ci.utility.spreadsheet.spreadsheet_api module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.spreadsheet.html#module-ocs_ci.utility.spreadsheet">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocs_ci.utility.tests.html">ocs_ci.utility.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_azure_utils">ocs_ci.utility.tests.test_azure_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_deployment_utils">ocs_ci.utility.tests.test_deployment_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_gcp">ocs_ci.utility.tests.test_gcp module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_prometheus">ocs_ci.utility.tests.test_prometheus module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_rgwutils">ocs_ci.utility.tests.test_rgwutils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_utils">ocs_ci.utility.tests.test_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_utils_timeout_sampler">ocs_ci.utility.tests.test_utils_timeout_sampler module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests.test_version">ocs_ci.utility.tests.test_version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.tests.html#module-ocs_ci.utility.tests">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocs_ci.utility.workloads.html">ocs_ci.utility.workloads package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.workloads.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.workloads.html#module-ocs_ci.utility.workloads.fio">ocs_ci.utility.workloads.fio module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.workloads.html#module-ocs_ci.utility.workloads.helpers">ocs_ci.utility.workloads.helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.workloads.html#module-ocs_ci.utility.workloads.jenkins">ocs_ci.utility.workloads.jenkins module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocs_ci.utility.workloads.html#module-ocs_ci.utility.workloads">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ocs_ci.utility.aws">
<span id="ocs-ci-utility-aws-module"></span><h2>ocs_ci.utility.aws module<a class="headerlink" href="#module-ocs_ci.utility.aws" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.aws.AWS">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">AWS</code><span class="sig-paren">(</span><em class="sig-param">region_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is wrapper class for AWS</p>
<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.append_security_group">
<code class="sig-name descname">append_security_group</code><span class="sig-paren">(</span><em class="sig-param">security_group_id</em>, <em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.append_security_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Append security group to selected ec2 nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance_id</strong> (<em>str</em>) – Instances to attach security group</p></li>
<li><p><strong>security_group_id</strong> (<em>str</em>) – Security group to attach</p></li>
<li><p><strong>out</strong> (<em>print</em>) – security group &lt;id&gt; added to selected nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.attach_volume">
<code class="sig-name descname">attach_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">instance_id</em>, <em class="sig-param">device='/dev/sdx'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.attach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach volume to an ec2 instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>Volume</em>) – Volume instance</p></li>
<li><p><strong>instance_id</strong> (<em>str</em>) – id of instance where to attach the volume</p></li>
<li><p><strong>device</strong> (<em>str</em>) – The name of the device where to attach (default: /dev/sdx)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.block_instances_access">
<code class="sig-name descname">block_instances_access</code><span class="sig-paren">(</span><em class="sig-param">security_group_id</em>, <em class="sig-param">instances_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.block_instances_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Block ec2 instances by:</p>
<ul class="simple">
<li><p>Append security group without access permissions</p></li>
<li><p>Remove original security groups</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>security_group_id</strong> (<em>str</em>) – security group without access permissions</p></li>
<li><p><strong>instances_id</strong> (<em>list</em>) – list of ec2 instances ids</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.cf_client">
<em class="property">property </em><code class="sig-name descname">cf_client</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.cf_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for cloudformation client</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instance of cloudformation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boto3.client</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.check_volume_attributes">
<code class="sig-name descname">check_volume_attributes</code><span class="sig-paren">(</span><em class="sig-param">volume_id</em>, <em class="sig-param">name_end=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">iops=None</em>, <em class="sig-param">throughput=None</em>, <em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.check_volume_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify aws volume attributes
Primarily used for faas</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume_id</strong> (<em>str</em>) – id of the volume to be checked</p></li>
<li><p><strong>name_end</strong> (<em>str</em>) – expected ending of Name tag</p></li>
<li><p><strong>size</strong> (<em>int</em>) – expected value of volume’s size</p></li>
<li><p><strong>iops</strong> (<em>int</em>) – expected value of IOPS</p></li>
<li><p><strong>throughput</strong> (<em>int</em>) – expected value of Throughput</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – expected value of kubernetes.io/created-for/pvc/namespace tag</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError if the actual value differs from the expected one</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.create_hosted_zone">
<code class="sig-name descname">create_hosted_zone</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.create_hosted_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Hosted Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Name of cluster</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Hosted Zone id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.create_security_group">
<code class="sig-name descname">create_security_group</code><span class="sig-paren">(</span><em class="sig-param">group_name</em>, <em class="sig-param">dict_permissions</em>, <em class="sig-param">vpc_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.create_security_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Create security group with predefined group name and permissions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group_name</strong> (<em>str</em>) – Group name (aws tag: “Group Name”)</p></li>
<li><p><strong>dict_permissions</strong> (<em>dict</em>) – The security group’s inbound/outbound permissions</p></li>
<li><p><strong>vpc_id</strong> (<em>str</em>) – For group to be attached</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>newly created security group id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.create_stack">
<code class="sig-name descname">create_stack</code><span class="sig-paren">(</span><em class="sig-param">s3_url</em>, <em class="sig-param">index</em>, <em class="sig-param">params_list</em>, <em class="sig-param">capabilities</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.create_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new cloudformation stack for worker creation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> (<em>str</em>) – An aws url for accessing s3 object</p></li>
<li><p><strong>index</strong> (<em>int</em>) – Integer index for stack name</p></li>
<li><p><strong>params_list</strong> (<em>list</em>) – of parameters (k,v) for create_stack</p></li>
<li><p><strong>capabilities</strong> (<em>list</em>) – of valid AWS capabilities like
CAPABILITY_NAMED_IAM etc</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>of (stack_name, stack_id)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.create_volume">
<code class="sig-name descname">create_volume</code><span class="sig-paren">(</span><em class="sig-param">availability_zone</em>, <em class="sig-param">name</em>, <em class="sig-param">encrypted=False</em>, <em class="sig-param">size=100</em>, <em class="sig-param">timeout=20</em>, <em class="sig-param">volume_type='gp2'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.create_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Create volume</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>availability_zone</strong> (<em>str</em>) – The availability zone e.g.: us-west-1b</p></li>
<li><p><strong>name</strong> (<em>str</em>) – The name of the volume</p></li>
<li><p><strong>encrypted</strong> (<em>boolean</em>) – True if encrypted, False otherwise
(default: False)</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size in GB (default: 100)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The timeout in seconds for volume creation (default: 20)</p></li>
<li><p><strong>volume_type</strong> (<em>str</em>) – ‘standard’|’io1’|’gp2’|’sc1’|’st1’
(default: gp2)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AWS Resource instance of the newly created volume</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Volume</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.create_volume_and_attach">
<code class="sig-name descname">create_volume_and_attach</code><span class="sig-paren">(</span><em class="sig-param">availability_zone</em>, <em class="sig-param">instance_id</em>, <em class="sig-param">name</em>, <em class="sig-param">device='/dev/sdx'</em>, <em class="sig-param">encrypted=False</em>, <em class="sig-param">size=100</em>, <em class="sig-param">timeout=20</em>, <em class="sig-param">volume_type='gp2'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.create_volume_and_attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Create volume and attach to instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>availability_zone</strong> (<em>str</em>) – The availability zone e.g.: us-west-1b</p></li>
<li><p><strong>instance_id</strong> (<em>str</em>) – The id of the instance where to attach the volume</p></li>
<li><p><strong>name</strong> (<em>str</em>) – The name of volume</p></li>
<li><p><strong>device</strong> (<em>str</em>) – The name of device where to attach (default: /dev/sdx)</p></li>
<li><p><strong>encrypted</strong> (<em>boolean</em>) – True if encrypted, False otherwise
(default: False)</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size in GB (default: 100)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The timeout in seconds for volume creation (default: 20)</p></li>
<li><p><strong>volume_type</strong> (<em>str</em>) – ‘standard’|’io1’|’gp2’|’sc1’|’st1’
(default: gp2)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_all_record_sets">
<code class="sig-name descname">delete_all_record_sets</code><span class="sig-paren">(</span><em class="sig-param">hosted_zone_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_all_record_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all record sets in a hosted zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hosted_zone_id</strong> (<em>str</em>) – Hosted Zone ID
example: /hostedzone/Z91022921MMOZDVPPC8D6</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_apps_record_set">
<code class="sig-name descname">delete_apps_record_set</code><span class="sig-paren">(</span><em class="sig-param">cluster_name=None</em>, <em class="sig-param">from_base_domain=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_apps_record_set" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Delete apps record set that sometimes blocks sg stack deletion.</dt><dd><p><a class="reference external" href="https://github.com/red-hat-storage/ocs-ci/issues/2549">https://github.com/red-hat-storage/ocs-ci/issues/2549</a></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Name of the cluster</p></li>
<li><p><strong>from_base_domain</strong> (<em>bool</em>) – Delete apps record set from base domain
created by Flexy</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_cf_stack_including_dependencies">
<code class="sig-name descname">delete_cf_stack_including_dependencies</code><span class="sig-paren">(</span><em class="sig-param">cfs_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_cf_stack_including_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete cloudformation stack including dependencies.</p>
<p>Some of the depending resources are not deletable, so related errors
are ignored and only logged.
Thsi method is mainly used as a WORKAROUND for folowing Flexy issue:
<a class="reference external" href="https://issues.redhat.com/browse/OCPQE-1521">https://issues.redhat.com/browse/OCPQE-1521</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cfs_name</strong> (<em>str</em>) – CloudFormation stack name to cleanup</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_cloudformation_stacks">
<code class="sig-name descname">delete_cloudformation_stacks</code><span class="sig-paren">(</span><em class="sig-param">stack_names</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_cloudformation_stacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete cloudformation stacks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stack_names</strong> (<em>list</em>) – List of cloudformation stacks</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_hosted_zone">
<code class="sig-name descname">delete_hosted_zone</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">delete_zone=True</em>, <em class="sig-param">delete_from_base_domain=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_hosted_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the hosted zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Name of the cluster</p></li>
<li><p><strong>delete_zone</strong> (<em>bool</em>) – Whether to delete complete zone</p></li>
<li><p><strong>delete_from_base_domain</strong> (<em>bool</em>) – Whether to delete record from base domain</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_record">
<code class="sig-name descname">delete_record</code><span class="sig-paren">(</span><em class="sig-param">record</em>, <em class="sig-param">hosted_zone_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the record from Hosted Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – record details to delete
e.g:{
‘Name’: ‘vavuthu-eco1.qe.rh-ocs.com.’,
‘Type’: ‘NS’,
‘TTL’: 300,
‘ResourceRecords’:[
{‘Value’: ‘ns-1389.awsdns-45.org’},
{‘Value’: ‘ns-639.awsdns-15.net’},
{‘Value’: ‘ns-1656.awsdns-15.co.uk’},
{‘Value’: ‘ns-183.awsdns-22.com’}
]
}</p></li>
<li><p><strong>hosted_zone_id</strong> (<em>str</em>) – Hosted Zone ID
example: /hostedzone/Z91022921MMOZDVPPC8D6</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_record_from_base_domain">
<code class="sig-name descname">delete_record_from_base_domain</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">base_domain=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_record_from_base_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the record for cluster name in base domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Name of the cluster</p></li>
<li><p><strong>base_domain</strong> (<em>str</em>) – Base domain name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_s3_object">
<code class="sig-name descname">delete_s3_object</code><span class="sig-paren">(</span><em class="sig-param">bucket_name</em>, <em class="sig-param">object_key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_s3_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an object from s3 bucket</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket_name</strong> (<em>str</em>) – name of a valid s3 bucket</p></li>
<li><p><strong>object_key</strong> (<em>str</em>) – the key for s3 object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_security_group">
<code class="sig-name descname">delete_security_group</code><span class="sig-paren">(</span><em class="sig-param">security_group_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_security_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete selected security group
print out: Security group &lt;id&gt; deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>security_group_id</strong> (<em>str</em>) – Id of selected security group</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.delete_volume">
<code class="sig-name descname">delete_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.delete_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an ec2 volume from AWS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>Volume</em>) – The volume to delete</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.detach_and_delete_volume">
<code class="sig-name descname">detach_and_delete_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.detach_and_delete_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach volume if attached and then delete it from AWS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>Volume</em>) – The volume to delete</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds for API calls</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.detach_volume">
<code class="sig-name descname">detach_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.detach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach volume if attached</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>Volume</em>) – The volume to delete</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds for API calls</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ec2 Volume instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Volume</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.ec2_client">
<em class="property">property </em><code class="sig-name descname">ec2_client</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.ec2_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for ec2 client</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instance of ec2</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boto3.client</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.ec2_resource">
<em class="property">property </em><code class="sig-name descname">ec2_resource</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.ec2_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for ec2 resource</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>boto3.resource instance of ec2 resource</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.elb_client">
<em class="property">property </em><code class="sig-name descname">elb_client</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.elb_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for elb client</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instance of elb client</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boto3.client</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_all_security_groups">
<code class="sig-name descname">get_all_security_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_all_security_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all security groups in AWS region</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All security groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_all_stacks">
<code class="sig-name descname">get_all_stacks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_all_stacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the cloudformation stacks</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>of all cloudformation stacks</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_availability_zone_id_by_instance_id">
<code class="sig-name descname">get_availability_zone_id_by_instance_id</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_availability_zone_id_by_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch availability zone out of ec2 node (EC2.Instances.placement)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – ID of the instance - to get availability zone info from ec2 node</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>availability_zone: The availability zone name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_cloudformation_stacks">
<code class="sig-name descname">get_cloudformation_stacks</code><span class="sig-paren">(</span><em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_cloudformation_stacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get cloudformation stacks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – The pattern of the stack name</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_cluster_subnet_ids">
<code class="sig-name descname">get_cluster_subnet_ids</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_cluster_subnet_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cluster’s subnet ids of existing cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string of space separated subnet ids</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_ec2_instance">
<code class="sig-name descname">get_ec2_instance</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_ec2_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get instance of ec2 Instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – The ID of the instance to get</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>instance of ec2 instance resource</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boto3.Instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_ec2_instance_volumes">
<code class="sig-name descname">get_ec2_instance_volumes</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_ec2_instance_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all volumes attached to an ec2 instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – The ec2 instance ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ec2 Volume instances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_hosted_zone_details">
<code class="sig-name descname">get_hosted_zone_details</code><span class="sig-paren">(</span><em class="sig-param">zone_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_hosted_zone_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Hosted zone Details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>zone_id</strong> (<em>str</em>) – Zone Id of cluster_name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_hosted_zone_id">
<code class="sig-name descname">get_hosted_zone_id</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_hosted_zone_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Zone id from given cluster_name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Name of cluster</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zone id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_hosted_zone_id_for_domain">
<code class="sig-name descname">get_hosted_zone_id_for_domain</code><span class="sig-paren">(</span><em class="sig-param">domain=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_hosted_zone_id_for_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Zone id for domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> (<em>str</em>) – Name of the domain.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zone id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_instance_id_from_private_dns_name">
<code class="sig-name descname">get_instance_id_from_private_dns_name</code><span class="sig-paren">(</span><em class="sig-param">private_dns_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_instance_id_from_private_dns_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instance id from the private dns name of the instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>private_dns_name</strong> (<em>str</em>) – The private DNS name of the instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The instance id associated to the private DNS name.</dt><dd><p>If not found returns None</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_instances_by_name_pattern">
<code class="sig-name descname">get_instances_by_name_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_instances_by_name_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get instances by Name tag pattern</p>
<p>The instance details do not contain all the values but just those we
are consuming.</p>
<p>Those parameters we are storing for instance are:
* id: id of instance
* avz: Availability Zone
* name: The value of Tag Name if define otherwise None
* vpc_id: VPC ID
* security_groups: Security groups of the instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – Pattern of tag name like:
pbalogh-testing-cluster-55jx2-worker*</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>contains dictionaries with instance details mentioned above</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_instances_response_by_name_pattern">
<code class="sig-name descname">get_instances_response_by_name_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern=None</em>, <em class="sig-param">filter_by_cluster_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_instances_response_by_name_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instances by name tag pattern. If not specified it will return
all the instances, or will return the instances
filtered by the cluster name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – Pattern of tag name like:
pbalogh-testing-cluster-55jx2-worker*</p></li>
<li><p><strong>filter_by_cluster_name</strong> – Will be used only if the ‘pattern’ param
not specified. If True it filters the instances
by the cluster name, else if False it returns all instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of instances dictionaries.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_instances_status_by_id">
<code class="sig-name descname">get_instances_status_by_id</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_instances_status_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get instances by ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – ID of the instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The instance status</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_matching_stacks">
<code class="sig-name descname">get_matching_stacks</code><span class="sig-paren">(</span><em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_matching_stacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get only the stacks which matches the pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – A raw string which is re compliant</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>of strings which are matching stack name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_ns_for_hosted_zone">
<code class="sig-name descname">get_ns_for_hosted_zone</code><span class="sig-paren">(</span><em class="sig-param">zone_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_ns_for_hosted_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Get NameServers Details from Hosted Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>zone_id</strong> (<em>str</em>) – Zone Id of cluster_name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>NameServers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_record_sets">
<code class="sig-name descname">get_record_sets</code><span class="sig-paren">(</span><em class="sig-param">domain=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_record_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the record sets in domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>domain</strong> (<em>str</em>) – Domain name to fetch the records</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of record sets</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_s3_bucket_object_url">
<code class="sig-name descname">get_s3_bucket_object_url</code><span class="sig-paren">(</span><em class="sig-param">bucket_name</em>, <em class="sig-param">object_key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_s3_bucket_object_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get s3 bucket object url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket_name</strong> (<em>str</em>) – Name of a valid s3 bucket</p></li>
<li><p><strong>object_key</strong> (<em>str</em>) – Name of the key for s3 object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An s3 url</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>s3_url (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_security_groups_by_instance_id">
<code class="sig-name descname">get_security_groups_by_instance_id</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_security_groups_by_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all attached security groups of ec2 instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – Required instance to get security groups from it</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all_sg_ids: all attached security groups id.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_stack_instance_id">
<code class="sig-name descname">get_stack_instance_id</code><span class="sig-paren">(</span><em class="sig-param">stack_name</em>, <em class="sig-param">logical_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_stack_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instance id associated with the cloudformation stack</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stack_name</strong> (<em>str</em>) – Name of the cloudformation stack</p></li>
<li><p><strong>logical_id</strong> (<em>str</em>) – LogicalResourceId of the resource
ex: “Worker0”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Id of the instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>instance_id (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_stack_name_by_instance_id">
<code class="sig-name descname">get_stack_name_by_instance_id</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_stack_name_by_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the stack name by the instance id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – The instance id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The stack name associated to the instance id.</dt><dd><p>If not found returns None</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_stack_params">
<code class="sig-name descname">get_stack_params</code><span class="sig-paren">(</span><em class="sig-param">stack_name</em>, <em class="sig-param">param_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_stack_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Get value of a particular param</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stack_name</strong> (<em>str</em>) – AWS cloudformation stack name</p></li>
<li><p><strong>param_name</strong> (<em>str</em>) – Stack parameter name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parameter value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_volume_data">
<code class="sig-name descname">get_volume_data</code><span class="sig-paren">(</span><em class="sig-param">volume_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_volume_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get volume information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume_id</strong> (<em>str</em>) – ID of the volume</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>complete volume information</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_volume_tag_value">
<code class="sig-name descname">get_volume_tag_value</code><span class="sig-paren">(</span><em class="sig-param">volume_data</em>, <em class="sig-param">tag_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_volume_tag_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of the volume’s tag</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume_data</strong> (<em>dict</em>) – complete volume information</p></li>
<li><p><strong>tag_name</strong> (<em>str</em>) – name of the tag</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the tag or None if there’s no such tag</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_volumes_by_name_pattern">
<code class="sig-name descname">get_volumes_by_name_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_volumes_by_name_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get volumes by pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – Pattern of volume name (e.g. ‘<em>cl-vol-</em>‘)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Volume information like id and attachments</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_volumes_by_tag_pattern">
<code class="sig-name descname">get_volumes_by_tag_pattern</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_volumes_by_tag_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get volumes by tag pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – Tag name</p></li>
<li><p><strong>pattern</strong> (<em>str</em>) – Pattern of tag value (e.g. ‘<em>cl-vol-</em>‘)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Volume information like id and attachments</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_vpc_id_by_instance_id">
<code class="sig-name descname">get_vpc_id_by_instance_id</code><span class="sig-paren">(</span><em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_vpc_id_by_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch vpc id out of ec2 node (EC2.Instances.vpc_id)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – ID of the instance - to get vpc id info from ec2 node</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vpc_id: The vpc id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_worker_ignition_location">
<code class="sig-name descname">get_worker_ignition_location</code><span class="sig-paren">(</span><em class="sig-param">stack_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_worker_ignition_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ignition location from given stack</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stack_name</strong> (<em>str</em>) – AWS cloudformation stack name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AWS URL ignition location</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ignition_location (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_worker_instance_profile_name">
<code class="sig-name descname">get_worker_instance_profile_name</code><span class="sig-paren">(</span><em class="sig-param">stack_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_worker_instance_profile_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the worker instance profile name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stack_name</strong> (<em>str</em>) – AWS cloudformation stack name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>instance profile name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>worker_instance_profile_name (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.get_worker_stacks">
<code class="sig-name descname">get_worker_stacks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.get_worker_stacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cloudformation stacks only for workers of this cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>of worker stacks</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.remove_security_group">
<code class="sig-name descname">remove_security_group</code><span class="sig-paren">(</span><em class="sig-param">security_group_id</em>, <em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.remove_security_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove security group from selected ec2 instance (by instance id)
print out: security group &lt;id&gt; removed from selected nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>security_group_id</strong> (<em>str</em>) – Security group to be removed</p></li>
<li><p><strong>instance_id</strong> (<em>str</em>) – Instance attached with selected security group</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.restart_ec2_instances">
<code class="sig-name descname">restart_ec2_instances</code><span class="sig-paren">(</span><em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.restart_ec2_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart ec2 instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> (<em>dict</em>) – A dictionary of instance IDs and names to restart</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.restart_ec2_instances_by_stop_and_start">
<code class="sig-name descname">restart_ec2_instances_by_stop_and_start</code><span class="sig-paren">(</span><em class="sig-param">instances</em>, <em class="sig-param">wait=False</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.restart_ec2_instances_by_stop_and_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart EC2 instances by stop and start</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instances</strong> (<em>dict</em>) – A dictionary of instance IDs and names to stop
&amp; start</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True in case wait for status is needed,
False otherwise</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for force instance stop, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.restore_instances_access">
<code class="sig-name descname">restore_instances_access</code><span class="sig-paren">(</span><em class="sig-param">security_group_id_to_remove</em>, <em class="sig-param">original_security_group_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.restore_instances_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore access to instances by removing blocking security group and
append original security group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>security_group_id_to_remove</strong> (<em>str</em>) – id of the security group</p></li>
<li><p><strong>original_security_group_dict</strong> (<em>dict</em>) – dict with:
keys: blocked instances: ec2 instances id
values: list of original security groups</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.route53_client">
<em class="property">property </em><code class="sig-name descname">route53_client</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.route53_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for route53 client</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>instance of route53 client</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boto3.client</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.s3_client">
<em class="property">property </em><code class="sig-name descname">s3_client</code><a class="headerlink" href="#ocs_ci.utility.aws.AWS.s3_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for s3 client</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>boto3.resource instance of s3</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.start_ec2_instances">
<code class="sig-name descname">start_ec2_instances</code><span class="sig-paren">(</span><em class="sig-param">instances</em>, <em class="sig-param">wait=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.start_ec2_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting an instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instances</strong> (<em>dict</em>) – A dictionary of instance IDs and names to start</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True in case wait for status is needed,
False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.stop_ec2_instances">
<code class="sig-name descname">stop_ec2_instances</code><span class="sig-paren">(</span><em class="sig-param">instances</em>, <em class="sig-param">wait=False</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.stop_ec2_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Stopping an instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instances</strong> (<em>dict</em>) – A dictionary of instance IDs and names to stop</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True in case wait for status is needed,
False otherwise</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for force instance stop, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.store_security_groups_for_instances">
<code class="sig-name descname">store_security_groups_for_instances</code><span class="sig-paren">(</span><em class="sig-param">instances_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.store_security_groups_for_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Stored all security groups attached to selected ec2 instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances_id</strong> (<em>list</em>) – ec2 instance_id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>security_group_dict: keys: blocked instances: ec2_instances ids</dt><dd><p>values: list of original security groups of each instance</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.terminate_ec2_instances">
<code class="sig-name descname">terminate_ec2_instances</code><span class="sig-paren">(</span><em class="sig-param">instances</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.terminate_ec2_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate an instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instances</strong> (<em>dict</em>) – A dictionary of instance IDs and names</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True in case wait for status is needed,
False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.update_hosted_zone_record">
<code class="sig-name descname">update_hosted_zone_record</code><span class="sig-paren">(</span><em class="sig-param">zone_id</em>, <em class="sig-param">record_name</em>, <em class="sig-param">data</em>, <em class="sig-param">type</em>, <em class="sig-param">operation_type</em>, <em class="sig-param">ttl=60</em>, <em class="sig-param">raw_data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.update_hosted_zone_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Route53 DNS record</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zone_id</strong> (<em>str</em>) – Zone id of DNS record</p></li>
<li><p><strong>record_name</strong> (<em>str</em>) – Record Name without domain
eg: api.apps.ocp-baremetal-auto</p></li>
<li><p><strong>data</strong> (<em>str</em>) – Data to be added for DNS Record</p></li>
<li><p><strong>type</strong> (<em>str</em>) – DNS record type</p></li>
<li><p><strong>operation_type</strong> (<em>str</em>) – Operation Type (Allowed Values:- Add, Delete)</p></li>
<li><p><strong>ttl</strong> (<em>int</em>) – Default set to 60 sec</p></li>
<li><p><strong>raw_data</strong> (<em>list</em>) – Data to be added as a record</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The response from change_resource_record_sets</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.upload_file_to_s3_bucket">
<code class="sig-name descname">upload_file_to_s3_bucket</code><span class="sig-paren">(</span><em class="sig-param">bucket_name</em>, <em class="sig-param">object_key</em>, <em class="sig-param">file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.upload_file_to_s3_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload objects to s3 bucket</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket_name</strong> (<em>str</em>) – Name of a valid s3 bucket</p></li>
<li><p><strong>object_key</strong> (<em>str</em>) – the key for the s3 object</p></li>
<li><p><strong>file_path</strong> (<em>str</em>) – path for the file to be uploaded</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.wait_for_instances_to_stop">
<code class="sig-name descname">wait_for_instances_to_stop</code><span class="sig-paren">(</span><em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.wait_for_instances_to_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the instances to reach status stopped</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> – A dictionary of instance IDs and names</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>botocore.exceptions.WaiterError</strong> – If it failed to reach the expected status stopped</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.wait_for_instances_to_stop_or_terminate">
<code class="sig-name descname">wait_for_instances_to_stop_or_terminate</code><span class="sig-paren">(</span><em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.wait_for_instances_to_stop_or_terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the instances to reach statuses stopped or terminated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> – A dictionary of instance IDs and names</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>botocore.exceptions.WaiterError</strong> – If it failed to reach the expected statuses stopped or terminated</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.wait_for_instances_to_terminate">
<code class="sig-name descname">wait_for_instances_to_terminate</code><span class="sig-paren">(</span><em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.wait_for_instances_to_terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the instances to reach status terminated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> – A dictionary of instance IDs and names</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>botocore.exceptions.WaiterError</strong> – If it failed to reach the expected status terminated</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.aws.AWS.wait_for_record_set">
<code class="sig-name descname">wait_for_record_set</code><span class="sig-paren">(</span><em class="sig-param">response_list</em>, <em class="sig-param">max_attempts=10</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.AWS.wait_for_record_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for Record to be created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_attempts</strong> (<em>int</em>) – Max Attempt’s for Waiting</p></li>
<li><p><strong>response_list</strong> (<em>list</em>) – List of response</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="ocs_ci.utility.aws.AWSTimeoutException">
<em class="property">exception </em><code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">AWSTimeoutException</code><a class="headerlink" href="#ocs_ci.utility.aws.AWSTimeoutException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="exception">
<dt id="ocs_ci.utility.aws.StackStatusError">
<em class="property">exception </em><code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">StackStatusError</code><a class="headerlink" href="#ocs_ci.utility.aws.StackStatusError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.check_root_volume">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">check_root_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.check_root_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether given EBS volume is root device or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>dict</em>) – EBS volume dictionary</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if EBS volume is root device, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.create_and_attach_ebs_volumes">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">create_and_attach_ebs_volumes</code><span class="sig-paren">(</span><em class="sig-param">worker_pattern</em>, <em class="sig-param">size=100</em>, <em class="sig-param">count=1</em>, <em class="sig-param">device_names=('sdx'</em>, <em class="sig-param">)</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.create_and_attach_ebs_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create volumes on workers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worker_pattern</strong> (<em>string</em>) – Worker name pattern e.g.:
cluster-55jx2-worker*</p></li>
<li><p><strong>size</strong> (<em>int</em>) – Size in GB (default: 100)</p></li>
<li><p><strong>count</strong> (<em>int</em>) – number of EBS volumes to attach to worker node, if it’s</p></li>
<li><p><strong>device_names</strong> (<em>list</em>) – list of the devices like [“sda”, “sdb”]. Length of list needs
to match count!</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedInput" title="ocs_ci.ocs.exceptions.UnexpectedInput"><strong>UnexpectedInput</strong></a> – In case the device_names length doesn’t match count.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.create_and_attach_volume_for_all_workers">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">create_and_attach_volume_for_all_workers</code><span class="sig-paren">(</span><em class="sig-param">device_size=None</em>, <em class="sig-param">worker_suffix='worker'</em>, <em class="sig-param">count=1</em>, <em class="sig-param">device_letters='ghijklmnopxyz'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.create_and_attach_volume_for_all_workers" title="Permalink to this definition">¶</a></dt>
<dd><p>Create volumes on workers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_size</strong> (<em>int</em>) – Size in GB, if not specified value from:
config.ENV_DATA[“device_size”] will be used</p></li>
<li><p><strong>worker_suffix</strong> (<em>str</em>) – Worker name suffix (default: worker)</p></li>
<li><p><strong>count</strong> (<em>int</em>) – number of EBS volumes to attach to worker node</p></li>
<li><p><strong>device_letters</strong> (<em>str</em>) – device letters from which generate device names.
e.g. for “abc” and if count=2 it will generate [“sda”, “sdb”]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.delete_cluster_buckets">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">delete_cluster_buckets</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.delete_cluster_buckets" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete s3 buckets corresponding to a particular OCS cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – name of the cluster the buckets belong to</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.destroy_volumes">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">destroy_volumes</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.destroy_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy cluster volumes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – The name of the cluster</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.get_data_volumes">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">get_data_volumes</code><span class="sig-paren">(</span><em class="sig-param">deviceset_pvs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.get_data_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instance data volumes (which doesn’t include root FS)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deviceset_pvs</strong> (<em>list</em>) – PVC objects of the deviceset PVs</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ec2 Volume instances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.get_instances_ids_and_names">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">get_instances_ids_and_names</code><span class="sig-paren">(</span><em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.get_instances_ids_and_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instances IDs and names according to nodes dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instances</strong> (<em>list</em>) – Nodes dictionaries, returned by ‘oc get node -o yaml’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The ID keys and the name values of the instances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.get_rhel_worker_instances">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">get_rhel_worker_instances</code><span class="sig-paren">(</span><em class="sig-param">cluster_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.get_rhel_worker_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of rhel worker instance IDs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_path</strong> (<em>str</em>) – The cluster path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of instance IDs of rhel workers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.get_stack_name_from_instance_dict">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">get_stack_name_from_instance_dict</code><span class="sig-paren">(</span><em class="sig-param">instance_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.get_stack_name_from_instance_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the stack name by the given instance dictionary from AWS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_dict</strong> (<em>dict</em>) – The instance dictionary from AWS</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The stack name of the given instance dictionary from AWS.</dt><dd><p>If not found returns None</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.get_vpc_id_by_node_obj">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">get_vpc_id_by_node_obj</code><span class="sig-paren">(</span><em class="sig-param">aws_obj</em>, <em class="sig-param">instances</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.get_vpc_id_by_node_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>This function getting vpc id by randomly selecting instances out of user aws deployment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aws_obj</strong> (<em>obj</em>) – AWS() object</p></li>
<li><p><strong>instances</strong> (<em>dict</em>) – cluster ec2 instances objects</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vpc_id: The vpc id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.terminate_rhel_workers">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">terminate_rhel_workers</code><span class="sig-paren">(</span><em class="sig-param">worker_list</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.terminate_rhel_workers" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the RHEL worker EC2 instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>worker_list</strong> (<em>list</em>) – Instance IDs of rhel workers</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.FailedToDeleteInstance" title="ocs_ci.ocs.exceptions.FailedToDeleteInstance"><strong>exceptions.FailedToDeleteInstance</strong></a> – if failed to terminate</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.aws.update_config_from_s3">
<code class="sig-prename descclassname">ocs_ci.utility.aws.</code><code class="sig-name descname">update_config_from_s3</code><span class="sig-paren">(</span><em class="sig-param">bucket_name='ocs-ci-data'</em>, <em class="sig-param">filename='auth.yaml'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.aws.update_config_from_s3" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the config file that has secrets/configs from the S3 and update the config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket_name</strong> (<em>string</em>) – name of the bucket</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – name of the file in bucket</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns the updated file contents as python dict
None: In case the private bucket could not be accessed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.azure_utils">
<span id="ocs-ci-utility-azure-utils-module"></span><h2>ocs_ci.utility.azure_utils module<a class="headerlink" href="#module-ocs_ci.utility.azure_utils" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with OCP/OCS Cluster on Azure platform level.</p>
<dl class="class">
<dt id="ocs_ci.utility.azure_utils.AZURE">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.azure_utils.</code><code class="sig-name descname">AZURE</code><span class="sig-paren">(</span><em class="sig-param">subscription_id=None</em>, <em class="sig-param">tenant_id=None</em>, <em class="sig-param">client_id=None</em>, <em class="sig-param">client_secret=None</em>, <em class="sig-param">cluster_resource_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Utility wrapper class for Azure OCP cluster. Design of the class follows
similar AWS class.</p>
<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.az_login">
<code class="sig-name descname">az_login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.az_login" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.cluster_resource_group">
<em class="property">property </em><code class="sig-name descname">cluster_resource_group</code><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.cluster_resource_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Azure resource group of the OCP cluster. This group is created
by openshift-installer during OCP deployment.</p>
<p>If the value is not yet available and it’s not specified anywhere, it
returns None.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.compute_client">
<em class="property">property </em><code class="sig-name descname">compute_client</code><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.compute_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for Azure vm resource</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ComputeManagementClient instance for managing Azure vm resource</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.credentials">
<em class="property">property </em><code class="sig-name descname">credentials</code><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Property for azure service principle credentials used to authenticate
the client.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.detach_volume">
<code class="sig-name descname">detach_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">node</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.detach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach volume if attached</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>disk</em>) – disk object required to delete a volume</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS"><em>OCS</em></a>) – The OCS object representing the node</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds for API calls</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_data_volumes">
<code class="sig-name descname">get_data_volumes</code><span class="sig-paren">(</span><em class="sig-param">deviceset_pvs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_data_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the instance data disk objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deviceset_pvs</strong> (<em>list</em>) – PVC objects of the deviceset PVs</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Azure Vm disk objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_disk_state">
<code class="sig-name descname">get_disk_state</code><span class="sig-paren">(</span><em class="sig-param">volume_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_disk_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the state of the disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume_name</strong> (<em>str</em>) – Name of the volume/disk</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Azure Vm disk state</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_node_by_attached_volume">
<code class="sig-name descname">get_node_by_attached_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_node_by_attached_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the Azure Vm instance that has the volume attached to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>Disk</em>) – The disk object to get the Azure Vm according to</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Azure Vm instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vm</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_storage_account_properties">
<code class="sig-name descname">get_storage_account_properties</code><span class="sig-paren">(</span><em class="sig-param">storage_account_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_storage_account_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the properties of the storage account whose name is passed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storage_account_name</strong> (<em>str</em>) – Name of the storage account</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Properties of the storage account in string format.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_storage_accounts">
<code class="sig-name descname">get_storage_accounts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_storage_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of storage accounts in azure resource group</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of Azure storage accounts</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_storage_accounts_names">
<code class="sig-name descname">get_storage_accounts_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_storage_accounts_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of names of storage accounts in azure resource group</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of Azure storage accounts name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_vm_instance">
<code class="sig-name descname">get_vm_instance</code><span class="sig-paren">(</span><em class="sig-param">vm_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_vm_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get instance of Azure vm Instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_name</strong> (<em>str</em>) – The name of the Azure instance to get</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>instance of Azure vm instance resource</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vm</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_vm_names">
<code class="sig-name descname">get_vm_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_vm_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of vms in azure resource group</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of Azure vm names</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.get_vm_power_status">
<code class="sig-name descname">get_vm_power_status</code><span class="sig-paren">(</span><em class="sig-param">vm_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.get_vm_power_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the power status of VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_name</strong> (<em>str</em>) – Azure VM name</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns :</dt><dd><p>str: Power status of Azure VM</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.resource_client">
<em class="property">property </em><code class="sig-name descname">resource_client</code><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.resource_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Azure ResourceManagementClient instance</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.restart_vm_instances">
<code class="sig-name descname">restart_vm_instances</code><span class="sig-paren">(</span><em class="sig-param">vm_names</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.restart_vm_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart Azure vm instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_names</strong> (<em>list</em>) – Names of azure vm instances</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.restart_vm_instances_by_stop_and_start">
<code class="sig-name descname">restart_vm_instances_by_stop_and_start</code><span class="sig-paren">(</span><em class="sig-param">vm_names</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.restart_vm_instances_by_stop_and_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop and Start Azure vm instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm_names</strong> (<em>list</em>) – Names of azure vm instances</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for non-graceful VM shutdown, False for
graceful VM shutdown</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.start_vm_instances">
<code class="sig-name descname">start_vm_instances</code><span class="sig-paren">(</span><em class="sig-param">vm_names</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.start_vm_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Start Azure vm instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_names</strong> (<em>list</em>) – Names of azure vm instances</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.stop_vm_instances">
<code class="sig-name descname">stop_vm_instances</code><span class="sig-paren">(</span><em class="sig-param">vm_names</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.stop_vm_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop Azure vm instances</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm_names</strong> (<em>list</em>) – Names of azure vm instances</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for non-graceful VM shutdown, False for
graceful VM shutdown</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AZURE.storage_client">
<em class="property">property </em><code class="sig-name descname">storage_client</code><a class="headerlink" href="#ocs_ci.utility.azure_utils.AZURE.storage_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Azure Stroage Management Client instance</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.azure_utils.</code><code class="sig-name descname">AzureAroUtil</code><span class="sig-paren">(</span><em class="sig-param">subscription_id=None</em>, <em class="sig-param">tenant_id=None</em>, <em class="sig-param">client_id=None</em>, <em class="sig-param">client_secret=None</em>, <em class="sig-param">cluster_resource_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.azure_utils.AZURE" title="ocs_ci.utility.azure_utils.AZURE"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.azure_utils.AZURE</span></code></a></p>
<p>Utility wrapper class for Azure ARO OCP cluster.</p>
<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.create_cluster">
<code class="sig-name descname">create_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.create_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OCP cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – in the case, the cluster is not installed
    successfully.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.create_network">
<code class="sig-name descname">create_network</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.create_network" title="Permalink to this definition">¶</a></dt>
<dd><p>Create network related stuff for the cluster.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.delete_dns_records">
<code class="sig-name descname">delete_dns_records</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">resource_group</em>, <em class="sig-param">base_domain</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.delete_dns_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete DNS records for Azure ARO cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p></li>
<li><p><strong>resource_group</strong> (<em>str</em>) – Base resource group</p></li>
<li><p><strong>base_domain</strong> (<em>str</em>) – Base domain for the ARO Cluster</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.destroy_cluster">
<code class="sig-name descname">destroy_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">resource_group</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.destroy_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the cluster in Azure ARO.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name .</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.get_aro_ocp_version">
<code class="sig-name descname">get_aro_ocp_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.get_aro_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get OCP version available in Azure ARO.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>version of ARO OCP currently available, matching the version from config.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnsupportedPlatformVersionError" title="ocs_ci.ocs.exceptions.UnsupportedPlatformVersionError"><strong>UnsupportedPlatformVersionError</strong></a> – In case the version is not supported yet available
    for the Azure ARO.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.get_cluster_details">
<code class="sig-name descname">get_cluster_details</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.get_cluster_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the cluster which is taken from the az command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cluster details</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.get_kubeconfig">
<code class="sig-name descname">get_kubeconfig</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">resource_group</em>, <em class="sig-param">path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.get_kubeconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Export kubeconfig to provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name or ID.</p></li>
<li><p><strong>resource_group</strong> (<em>str</em>) – Base resource group</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Path where to create kubeconfig file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.set_dns_records">
<code class="sig-name descname">set_dns_records</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">resource_group</em>, <em class="sig-param">base_domain</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.set_dns_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Set DNS records for Azure ARO cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p></li>
<li><p><strong>resource_group</strong> (<em>str</em>) – Base resource group</p></li>
<li><p><strong>base_domain</strong> (<em>str</em>) – Base domain for the ARO Cluster</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.azure_utils.AzureAroUtil.write_kubeadmin_password">
<code class="sig-name descname">write_kubeadmin_password</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">resource_group</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.AzureAroUtil.write_kubeadmin_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Get kubeadmin password for cluster</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.azure_utils.azure_storageaccount_check">
<code class="sig-prename descclassname">ocs_ci.utility.azure_utils.</code><code class="sig-name descname">azure_storageaccount_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.azure_storageaccount_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Testing that Azure storage account, post deployment.</p>
<p>Testing for property ‘allow_blob_public_access’ to be ‘false’</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.azure_utils.load_cluster_resource_group">
<code class="sig-prename descclassname">ocs_ci.utility.azure_utils.</code><code class="sig-name descname">load_cluster_resource_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.load_cluster_resource_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Read terraform tfvars.json file created by <code class="docutils literal notranslate"><span class="pre">openshift-installer</span></code> in a
cluster dir to get azure <code class="docutils literal notranslate"><span class="pre">resource</span> <span class="pre">group</span></code> of an OCP cluster. All Azure
resources of the cluster are placed in this group.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string with resource group name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TerrafromFileNotFoundException" title="ocs_ci.ocs.exceptions.TerrafromFileNotFoundException"><strong>TerrafromFileNotFoundException</strong></a> – When the terraform tfvars file is not found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.azure_utils.load_service_principal_dict">
<code class="sig-prename descclassname">ocs_ci.utility.azure_utils.</code><code class="sig-name descname">load_service_principal_dict</code><span class="sig-paren">(</span><em class="sig-param">filepath='/Users/danielosypenko/.azure/osServicePrincipal.json'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.azure_utils.load_service_principal_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Load Azure Service Principal from osServicePrincipal.json file and parse it
into a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – path of the</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with the service principal details (3 IDs and 1 secret)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.baremetal">
<span id="ocs-ci-utility-baremetal-module"></span><h2>ocs_ci.utility.baremetal module<a class="headerlink" href="#module-ocs_ci.utility.baremetal" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.baremetal.BAREMETAL">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.baremetal.</code><code class="sig-name descname">BAREMETAL</code><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>wrapper for Baremetal</p>
<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.get_ipmi_ctx">
<code class="sig-name descname">get_ipmi_ctx</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">user</em>, <em class="sig-param">password</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.get_ipmi_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get ipmi handler
:param host: Host mgmt address
:type host: str
:param user: User Name for accessing mgmt console
:type user: str
:param password: Password for accessing mgmt console
:type password: str</p>
<p>Returns (object): ipmi handler</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.get_nodes_ipmi_ctx">
<code class="sig-name descname">get_nodes_ipmi_ctx</code><span class="sig-paren">(</span><em class="sig-param">baremetal_machine</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.get_nodes_ipmi_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Node Ipmi handler</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>baremetal_machine</strong> – BM objects</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.get_power_status">
<code class="sig-name descname">get_power_status</code><span class="sig-paren">(</span><em class="sig-param">ipmi_ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.get_power_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get BM Power status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ipmi_ctx</strong> (<em>object</em>) – Ipmi host handler</p>
</dd>
</dl>
<p>Returns: (bool): bm power status</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.restart_baremetal_machines">
<code class="sig-name descname">restart_baremetal_machines</code><span class="sig-paren">(</span><em class="sig-param">baremetal_machine</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.restart_baremetal_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart Baremetal Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>baremetal_machine</strong> (<em>list</em>) – BM objects</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for BM ungraceful power off, False for
graceful BM shutdown</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.start_baremetal_machines">
<code class="sig-name descname">start_baremetal_machines</code><span class="sig-paren">(</span><em class="sig-param">baremetal_machine</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.start_baremetal_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Start Baremetal Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>baremetal_machine</strong> (<em>list</em>) – BM objects</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for BMs to start</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.start_baremetal_machines_with_ipmi_ctx">
<code class="sig-name descname">start_baremetal_machines_with_ipmi_ctx</code><span class="sig-paren">(</span><em class="sig-param">ipmi_ctxs</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.start_baremetal_machines_with_ipmi_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Start Baremetal Machines using Ipmi ctx</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipmi_ctxs</strong> (<em>list</em>) – List of BM ipmi_ctx</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for BMs to start</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.stop_baremetal_machines">
<code class="sig-name descname">stop_baremetal_machines</code><span class="sig-paren">(</span><em class="sig-param">baremetal_machine</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.stop_baremetal_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop Baremetal Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>baremetal_machine</strong> (<em>list</em>) – BM objects</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for BM ungraceful power off, False for
graceful BM shutdown</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – If baremetal machine is still up</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.baremetal.BAREMETAL.verify_machine_is_down">
<code class="sig-name descname">verify_machine_is_down</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.baremetal.BAREMETAL.verify_machine_is_down" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifiy Baremetal machine is completely power off</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>object</em>) – Node objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if machine is down, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.bootstrap">
<span id="ocs-ci-utility-bootstrap-module"></span><h2>ocs_ci.utility.bootstrap module<a class="headerlink" href="#module-ocs_ci.utility.bootstrap" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.bootstrap.gather_bootstrap">
<code class="sig-prename descclassname">ocs_ci.utility.bootstrap.</code><code class="sig-name descname">gather_bootstrap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.bootstrap.gather_bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather debugging data for a failing-to-bootstrap control plane.
Data is placed in the <cite>gather_bootstrap</cite> directory under the log directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NodeNotFoundError" title="ocs_ci.ocs.exceptions.NodeNotFoundError"><strong>NodeNotFoundError</strong></a> – If we are unable to retrieve the IP of any master
    nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.bootstrap.get_gather_bootstrap_node_data">
<code class="sig-prename descclassname">ocs_ci.utility.bootstrap.</code><code class="sig-name descname">get_gather_bootstrap_node_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.bootstrap.get_gather_bootstrap_node_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve node IPs required by the gather bootstrap command</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnsupportedPlatformError" title="ocs_ci.ocs.exceptions.UnsupportedPlatformError"><strong>UnsupportedPlatformError</strong></a> – If we do not support gathering bootstrap
    data for the configured provider</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Public IP of the bootstrap node and Private IPs of master nodes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.bootstrap.get_node_data_aws">
<code class="sig-prename descclassname">ocs_ci.utility.bootstrap.</code><code class="sig-name descname">get_node_data_aws</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.bootstrap.get_node_data_aws" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve bootstrap public IP and master node private IPs running in aws</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NodeNotFoundError" title="ocs_ci.ocs.exceptions.NodeNotFoundError"><strong>NodeNotFoundError</strong></a> – If we are unable to find the bootstrap node or IP</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bootstrap and master node IP data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.bootstrap.get_node_data_vsphere">
<code class="sig-prename descclassname">ocs_ci.utility.bootstrap.</code><code class="sig-name descname">get_node_data_vsphere</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.bootstrap.get_node_data_vsphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve bootstrap public IP and master node private IPs running in vsphere</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NodeNotFoundError" title="ocs_ci.ocs.exceptions.NodeNotFoundError"><strong>NodeNotFoundError</strong></a> – If we are unable to find the bootstrap node or IP</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bootstrap and master node IP data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.connection">
<span id="ocs-ci-utility-connection-module"></span><h2>ocs_ci.utility.connection module<a class="headerlink" href="#module-ocs_ci.utility.connection" title="Permalink to this headline">¶</a></h2>
<p>Module that connects to remote server and execute operations on remote server</p>
<dl class="class">
<dt id="ocs_ci.utility.connection.Connection">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.connection.</code><code class="sig-name descname">Connection</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">user=None</em>, <em class="sig-param">private_key=None</em>, <em class="sig-param">password=None</em>, <em class="sig-param">stdout=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that connects to remote server</p>
<dl class="method">
<dt id="ocs_ci.utility.connection.Connection.exec_cmd">
<code class="sig-name descname">exec_cmd</code><span class="sig-paren">(</span><em class="sig-param">cmd</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.connection.Connection.exec_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes command on server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cmd</strong> (<em>str</em>) – Command to run on server</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple which contains command return code, output and error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.csr">
<span id="ocs-ci-utility-csr-module"></span><h2>ocs_ci.utility.csr module<a class="headerlink" href="#module-ocs_ci.utility.csr" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.csr.approve_csrs">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">approve_csrs</code><span class="sig-paren">(</span><em class="sig-param">pending_csrs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.approve_csrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Approves the CSRs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>csrs</strong> (<em>list</em>) – List of CSRs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.approve_pending_csr">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">approve_pending_csr</code><span class="sig-paren">(</span><em class="sig-param">expected=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.approve_pending_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>After node addition CSR could be in pending state, we have to approve it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expected</strong> (<em>int</em>) – Expected number of CSRs. By default, it will approve
all the pending CSRs if exists.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.PendingCSRException" title="ocs_ci.ocs.exceptions.PendingCSRException"><strong>exceptions.PendingCSRException</strong></a> – </p></li>
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutExpiredError" title="ocs_ci.ocs.exceptions.TimeoutExpiredError"><strong>exceptions.TimeoutExpiredError</strong></a> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.check_no_pending_csr">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">check_no_pending_csr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.check_no_pending_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether we have any pending CSRs.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.PendingCSRException" title="ocs_ci.ocs.exceptions.PendingCSRException"><strong>exceptions.PendingCSRException</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.get_csr_resource">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">get_csr_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.get_csr_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the latest CSR data</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>CSR data</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.ocp.OCP" title="ocs_ci.ocs.ocp.OCP">ocp.OCP</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.get_nodes_csr">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">get_nodes_csr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.get_nodes_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the CSRs</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Dictionary with node as keys and CSRs as values</dt><dd><dl class="simple">
<dt>e.g:{</dt><dd><p>‘control-plane-1’: [‘csr-6hx8z’],
‘compute-2’: [‘csr-blz2n’],
‘compute-0’: [‘csr-p46bz’],
‘control-plane-2’: [‘csr-tzhn5’],
‘control-plane-0’: [‘csr-wm4g5’]
}</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.get_pending_csr">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">get_pending_csr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.get_pending_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the pending CSRs</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of pending CSRs</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.csr.wait_for_all_nodes_csr_and_approve">
<code class="sig-prename descclassname">ocs_ci.utility.csr.</code><code class="sig-name descname">wait_for_all_nodes_csr_and_approve</code><span class="sig-paren">(</span><em class="sig-param">timeout=900</em>, <em class="sig-param">sleep=10</em>, <em class="sig-param">expected_node_num=None</em>, <em class="sig-param">ignore_existing_csr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.csr.wait_for_all_nodes_csr_and_approve" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for CSR to generate for nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>int</em>) – Time in seconds to wait</p></li>
<li><p><strong>sleep</strong> (<em>int</em>) – Sampling time in seconds</p></li>
<li><p><strong>expected_node_num</strong> (<em>int</em>) – Number of nodes to verify CSR is generated</p></li>
<li><p><strong>ignore_existing_csr</strong> (<em>dct</em>) – Existing CSR to ignore</p></li>
<li><p><strong>e.g</strong> – <p>{
‘compute-1’: [‘csr-64vkw’]
}</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all nodes are generated CSR</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutExpiredError" title="ocs_ci.ocs.exceptions.TimeoutExpiredError"><strong>TimeoutExpiredError</strong></a> – in case CSR not found</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.decorators">
<span id="ocs-ci-utility-decorators-module"></span><h2>ocs_ci.utility.decorators module<a class="headerlink" href="#module-ocs_ci.utility.decorators" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.decorators.switch_to_default_cluster_index_at_last">
<code class="sig-prename descclassname">ocs_ci.utility.decorators.</code><code class="sig-name descname">switch_to_default_cluster_index_at_last</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.decorators.switch_to_default_cluster_index_at_last" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for switching to the default cluster index after the function execution.
This decorator will primarily be used in the ‘teardown’ and ‘finalizer’ methods when we want to make sure
that the next test will start with the default cluster index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>function</em>) – The function we want to decorate</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.decorators.switch_to_orig_index_at_last">
<code class="sig-prename descclassname">ocs_ci.utility.decorators.</code><code class="sig-name descname">switch_to_orig_index_at_last</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.decorators.switch_to_orig_index_at_last" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for switching to the original index after the function execution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>function</em>) – The function we want to decorate</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.deployment">
<span id="ocs-ci-utility-deployment-module"></span><h2>ocs_ci.utility.deployment module<a class="headerlink" href="#module-ocs_ci.utility.deployment" title="Permalink to this headline">¶</a></h2>
<p>Utility functions that are used as a part of OCP or OCS deployments</p>
<dl class="function">
<dt id="ocs_ci.utility.deployment.create_external_secret">
<code class="sig-prename descclassname">ocs_ci.utility.deployment.</code><code class="sig-name descname">create_external_secret</code><span class="sig-paren">(</span><em class="sig-param">ocs_version=None</em>, <em class="sig-param">apply=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment.create_external_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates secret data for external cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ocs_version</strong> (<em>str</em>) – OCS version</p></li>
<li><p><strong>apply</strong> (<em>bool</em>) – True if want to use apply instead of create command</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment.get_cluster_prefix">
<code class="sig-prename descclassname">ocs_ci.utility.deployment.</code><code class="sig-name descname">get_cluster_prefix</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">special_rules</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment.get_cluster_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse out the “prefix” of a cluster name. Note this is not the same thing as the
CLUSTER_PREFIX in jenkins. In fact we will parse that value out. This  “cluster
prefix” is used to check cloud providers to see if a particular user already has
a cluster created. This is to stop people from using too many cloud resources at
one time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – name of the cluster</p></li>
<li><p><strong>special_rules</strong> (<em>dict</em>) – dictionary containing special prefix rules that allow
clusters to remain alive longer than our default value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cluster name prefix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment.get_ocp_ga_version">
<code class="sig-prename descclassname">ocs_ci.utility.deployment.</code><code class="sig-name descname">get_ocp_ga_version</code><span class="sig-paren">(</span><em class="sig-param">channel</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment.get_ocp_ga_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the latest GA version for</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channel</strong> (<em>str</em>) – the OCP version channel to retrieve GA version for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>latest GA version for the provided channel.</dt><dd><p>An empty string is returned if no version exists.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.deployment_openshift_logging">
<span id="ocs-ci-utility-deployment-openshift-logging-module"></span><h2>ocs_ci.utility.deployment_openshift_logging module<a class="headerlink" href="#module-ocs_ci.utility.deployment_openshift_logging" title="Permalink to this headline">¶</a></h2>
<p>This module deploys the openshift-logging on the cluster
EFK stack</p>
<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.check_health_of_clusterlogging">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">check_health_of_clusterlogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.check_health_of_clusterlogging" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><dl class="simple">
<dt>Checks for ElasticSearch, curator, fluentd and kibana pods in</dt><dd><p>openshift-logging namespace</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>And check for the health of cluster logging, If status is green then the</dt><dd><p>cluster is healthy,if status is red then health is bad</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Gives all the pods that are present in the namespace</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.create_clusterlogging_operator_group">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">create_clusterlogging_operator_group</code><span class="sig-paren">(</span><em class="sig-param">yaml_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.create_clusterlogging_operator_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of operator-group for clusterlogging
operator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create operator group for
cluster-logging operator</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of the operator group to create for
cluster-logging operator</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if operator group for cluster-logging is created</dt><dd><p>successfully, false otherwise</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>create_clusterlogging_operator_group(yaml_file=constants.CL_OG_YAML)</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.create_elasticsearch_operator_group">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">create_elasticsearch_operator_group</code><span class="sig-paren">(</span><em class="sig-param">yaml_file</em>, <em class="sig-param">resource_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.create_elasticsearch_operator_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of operator-group for Elastic-search operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create operator group for
elastic-search</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of the operator group to create for
elastic-search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if operator group for elastic search is created</dt><dd><p>successfully, false otherwise</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create_elasticsearch_operator_group</span><span class="p">(</span>
    <span class="n">constants</span><span class="o">.</span><span class="n">EO_OG_YAML</span><span class="p">,</span> <span class="s1">&#39;openshift-operators-redhat&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.create_instance">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">create_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.create_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>The function is used to create instance for
cluster-logging</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.create_instance_in_clusterlogging">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">create_instance_in_clusterlogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.create_instance_in_clusterlogging" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of instance for clusterlogging that creates PVCs,
ElasticSearch, curator fluentd and kibana pods and checks for all
the pods and PVCs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sc_name</strong> (<em>str</em>) – Storage class name to create PVCs</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Contains all detailed information of the</dt><dd><p>instance such as pods that got created, its resources and limits
values, storage class and size details etc.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.create_namespace">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">create_namespace</code><span class="sig-paren">(</span><em class="sig-param">yaml_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.create_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of namespace “openshift-operators-redhat”
for Elasticsearch-operator and “openshift-logging”
for ClusterLogging-operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create namespace</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>create_namespace(yaml_file=constants.EO_NAMESPACE_YAML)</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.get_clusterlogging_subscription">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">get_clusterlogging_subscription</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.get_clusterlogging_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of subscription for clusterlogging to subscribe
a namespace to an operator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create subscription for
the namespace</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of the subscription</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Subscription exists or not</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>cl_create_subscription(yaml_file=constants.CL_SUB_YAML)</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.get_elasticsearch_subscription">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">get_elasticsearch_subscription</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.get_elasticsearch_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Creation of Subscription for the namespace
to subscribe a Namespace to an Operator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create subscription for
a namespace</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of the subscription</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Subscription exists or not</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>create_elasticsearch_subscription(constants.EO_SUB_YAML)</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.install_logging">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">install_logging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.install_logging" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.deployment_openshift_logging.set_rbac">
<code class="sig-prename descclassname">ocs_ci.utility.deployment_openshift_logging.</code><code class="sig-name descname">set_rbac</code><span class="sig-paren">(</span><em class="sig-param">yaml_file</em>, <em class="sig-param">resource_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.deployment_openshift_logging.set_rbac" title="Permalink to this definition">¶</a></dt>
<dd><p>Setting Role Based Access Control to grant Prometheus
permission to access the openshift-operators-redhat namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_file</strong> (<em>str</em>) – Path to yaml file to create RBAC
(ROLE BASED ACCESS CONTROL)</p></li>
<li><p><strong>resource_name</strong> (<em>str</em>) – Name of the resource for which we give RBAC
permissions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if RBAC is set successfully,</dt><dd><p>false otherwise</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>set_rbac(constants.EO_RBAC_YAML, ‘prometheus-k8s’)</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.environment_check">
<span id="ocs-ci-utility-environment-check-module"></span><h2>ocs_ci.utility.environment_check module<a class="headerlink" href="#module-ocs_ci.utility.environment_check" title="Permalink to this headline">¶</a></h2>
<p>Util for environment check before and after test to compare and find stale
leftovers</p>
<dl class="function">
<dt id="ocs_ci.utility.environment_check.assign_get_values">
<code class="sig-prename descclassname">ocs_ci.utility.environment_check.</code><code class="sig-name descname">assign_get_values</code><span class="sig-paren">(</span><em class="sig-param">env_status_dict</em>, <em class="sig-param">key</em>, <em class="sig-param">kind=None</em>, <em class="sig-param">exclude_labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.environment_check.assign_get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigning kind status into env_status_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_status_dict</strong> (<em>dict</em>) – Dictionary which is
copy.deepcopy(ENV_STATUS_DICT)</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Name of the resource</p></li>
<li><p><strong>kind</strong> (<em>OCP obj</em>) – OCP object for a resource</p></li>
<li><p><strong>exclude_labels</strong> (<em>list</em>) – App labels to ignore leftovers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.environment_check.compare_dicts">
<code class="sig-prename descclassname">ocs_ci.utility.environment_check.</code><code class="sig-name descname">compare_dicts</code><span class="sig-paren">(</span><em class="sig-param">before</em>, <em class="sig-param">after</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.environment_check.compare_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Comparing 2 dicts and providing diff list of [added items, removed items]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>before</strong> (<em>dict</em>) – Dictionary before execution</p></li>
<li><p><strong>after</strong> (<em>dict</em>) – Dictionary after execution</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of 2 lists - (‘added’ and ‘removed’ are lists)
None: If both parameters are None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.environment_check.get_environment_status">
<code class="sig-prename descclassname">ocs_ci.utility.environment_check.</code><code class="sig-name descname">get_environment_status</code><span class="sig-paren">(</span><em class="sig-param">env_dict</em>, <em class="sig-param">exclude_labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.environment_check.get_environment_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the environment status per kind in KINDS and save it in a dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env_dict</strong> (<em>dict</em>) – Dictionary that is a copy.deepcopy(ENV_STATUS_DICT)</p></li>
<li><p><strong>exclude_labels</strong> (<em>list</em>) – App labels to ignore leftovers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.environment_check.get_status_after_execution">
<code class="sig-prename descclassname">ocs_ci.utility.environment_check.</code><code class="sig-name descname">get_status_after_execution</code><span class="sig-paren">(</span><em class="sig-param">exclude_labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.environment_check.get_status_after_execution" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the environment status and assign it into ENV_STATUS_PRE dictionary.
In addition compare the dict before the execution and after using DeepDiff</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exclude_labels</strong> (<em>list</em>) – App labels to ignore leftovers</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ResourceLeftoversException" title="ocs_ci.ocs.exceptions.ResourceLeftoversException"><strong>ResourceLeftoversException</strong></a> – In case there are leftovers in the
    environment after the execution</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.environment_check.get_status_before_execution">
<code class="sig-prename descclassname">ocs_ci.utility.environment_check.</code><code class="sig-name descname">get_status_before_execution</code><span class="sig-paren">(</span><em class="sig-param">exclude_labels=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.environment_check.get_status_before_execution" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the environment status and assign it into ENV_STATUS_PRE dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exclude_labels</strong> (<em>list</em>) – App labels to ignore leftovers</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.flexy">
<span id="ocs-ci-utility-flexy-module"></span><h2>ocs_ci.utility.flexy module<a class="headerlink" href="#module-ocs_ci.utility.flexy" title="Permalink to this headline">¶</a></h2>
<p>Utility functions related to OCP deployment done via Flexy</p>
<dl class="function">
<dt id="ocs_ci.utility.flexy.configure_allowed_domains_in_proxy">
<code class="sig-prename descclassname">ocs_ci.utility.flexy.</code><code class="sig-name descname">configure_allowed_domains_in_proxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.flexy.configure_allowed_domains_in_proxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure squid proxy server - add domains which needs to be accessible
from disconnected cluster for test execution.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.flexy.load_cluster_info">
<code class="sig-prename descclassname">ocs_ci.utility.flexy.</code><code class="sig-name descname">load_cluster_info</code><span class="sig-paren">(</span><em class="sig-param">cluster_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.flexy.load_cluster_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse cluster_info.json and cluster_info.yaml files generated by Flexy and
load relevant configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_config</strong> (<a class="reference internal" href="ocs_ci.framework.html#ocs_ci.framework.MultiClusterConfig" title="ocs_ci.framework.MultiClusterConfig"><em>MultiClusterConfig</em></a>) – config object of a specific cluster in case of multiclsuter
scenario, if its single cluster we will go ahead with the config</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.gcp">
<span id="ocs-ci-utility-gcp-module"></span><h2>ocs_ci.utility.gcp module<a class="headerlink" href="#module-ocs_ci.utility.gcp" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with OCP/OCS Cluster on Google Cloud platform level.</p>
<p>It’s using <a class="reference external" href="https://libcloud.readthedocs.io/en/latest/compute/drivers/gce.html">libcloud</a> module as much as possible, but if that is not feasible,
we can use module from <a class="reference external" href="https://cloud.google.com/python/docs/reference">Google Cloud python libraries</a> as well. This is not
the case so far.</p>
<dl class="class">
<dt id="ocs_ci.utility.gcp.GoogleCloudUtil">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.gcp.</code><code class="sig-name descname">GoogleCloudUtil</code><span class="sig-paren">(</span><em class="sig-param">region_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.gcp.GoogleCloudUtil" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Utility wrapper class for Google Cloud OCP cluster. Design of the class
follows similar AWS and Azure class.</p>
<dl class="method">
<dt id="ocs_ci.utility.gcp.GoogleCloudUtil.compute_driver">
<em class="property">property </em><code class="sig-name descname">compute_driver</code><a class="headerlink" href="#ocs_ci.utility.gcp.GoogleCloudUtil.compute_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Driver instance for GCP.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.gcp.GoogleCloudUtil.service_account">
<em class="property">property </em><code class="sig-name descname">service_account</code><a class="headerlink" href="#ocs_ci.utility.gcp.GoogleCloudUtil.service_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with GCP service account details, which contains
authentication keys and cluster details loaded from <em>Service Account
Key file</em>.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="ocs_ci.utility.gcp.SERVICE_ACCOUNT_KEY_FILEPATH">
<code class="sig-prename descclassname">ocs_ci.utility.gcp.</code><code class="sig-name descname">SERVICE_ACCOUNT_KEY_FILEPATH</code><em class="property"> = '/Users/danielosypenko/.gcp/osServiceAccount.json'</em><a class="headerlink" href="#ocs_ci.utility.gcp.SERVICE_ACCOUNT_KEY_FILEPATH" title="Permalink to this definition">¶</a></dt>
<dd><p>absolute filepath of json file with service account key</p>
<p>This is json key file of <code class="docutils literal notranslate"><span class="pre">sg-serv-account</span></code> service account, which has full
admin rights in given GCP project. The same key file is used by openshift
installer during OCP installation to create all cluster resources from virtual
machines to hostnames. Modules from ocs-ci are using the same key to get full
cluster access as well.</p>
<p>For more details, see <a class="reference external" href="https://cloud.google.com/iam/docs/reference/rest/v1/projects.serviceAccounts.keys">GCP documentation on ServiceAccountKey resource</a></p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.gcp.load_service_account_key_dict">
<code class="sig-prename descclassname">ocs_ci.utility.gcp.</code><code class="sig-name descname">load_service_account_key_dict</code><span class="sig-paren">(</span><em class="sig-param">filepath='/Users/danielosypenko/.gcp/osServiceAccount.json'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.gcp.load_service_account_key_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Load GCP Service Account key from osServiceAccount.json file and parse it
into a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – path of the osServiceAccount.json file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with the service account details</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.ibmcloud">
<span id="ocs-ci-utility-ibmcloud-module"></span><h2>ocs_ci.utility.ibmcloud module<a class="headerlink" href="#module-ocs_ci.utility.ibmcloud" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with IBM Cloud Cluster.</p>
<dl class="class">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">IBMCloud</code><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for Ibm Cloud</p>
<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.attach_volume">
<code class="sig-name descname">attach_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.attach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach volume to node on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>str</em>) – volume id.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS"><em>OCS</em></a>) – worker node id to attach.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.delete_volume_id">
<code class="sig-name descname">delete_volume_id</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.delete_volume_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes Volumeid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>str</em>) – The volume to be deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.detach_volume">
<code class="sig-name descname">detach_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em>, <em class="sig-param">node=None</em>, <em class="sig-param">delete_from_backend=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.detach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach volume from node on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>volume</strong> (<em>str</em>) – volume id.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="ocs_ci.ocs.resources.html#ocs_ci.ocs.resources.ocs.OCS" title="ocs_ci.ocs.resources.ocs.OCS"><em>OCS</em></a>) – worker node id to detach.</p></li>
<li><p><strong>delete_from_backend</strong> (<em>bool</em>) – True for deleting the disk from the
storage backend, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.get_data_volumes">
<code class="sig-name descname">get_data_volumes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.get_data_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns volumes in IBM Cloud for cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>volumes in IBM Cloud for cluster.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.get_node_by_attached_volume">
<code class="sig-name descname">get_node_by_attached_volume</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.get_node_by_attached_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the node by attached volume on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>str</em>) – volume id.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NodeHasNoAttachedVolume" title="ocs_ci.ocs.exceptions.NodeHasNoAttachedVolume"><strong>NodeHasNoAttachedVolume</strong></a> – In case the volume is not attached to node</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>worker id</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.get_volume_id">
<code class="sig-name descname">get_volume_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.get_volume_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Volumeid with the name taken from constants</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>volume id if the volume exists otherwise create</dt><dd><p>new volume</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.is_volume_attached">
<code class="sig-name descname">is_volume_attached</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.is_volume_attached" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if volume is attached to node or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>str</em>) – The volume to check for to attached</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘True’ if volume is attached otherwise ‘False’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.restart_nodes">
<code class="sig-name descname">restart_nodes</code><span class="sig-paren">(</span><em class="sig-param">nodes</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.restart_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboot the nodes on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>list</em>) – The worker node instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.restart_nodes_by_stop_and_start">
<code class="sig-name descname">restart_nodes_by_stop_and_start</code><span class="sig-paren">(</span><em class="sig-param">nodes</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.restart_nodes_by_stop_and_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboot the nodes which are not ready on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>list</em>) – The OCS objects of the nodes</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for force VM stop, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ibmcloud.IBMCloud.wait_for_volume_attach">
<code class="sig-name descname">wait_for_volume_attach</code><span class="sig-paren">(</span><em class="sig-param">volume</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.IBMCloud.wait_for_volume_attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks volume is attached to node or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volume</strong> (<em>str</em>) – The volume to wait for to be attached</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if the volume has been attached to the</dt><dd><p>instance, False otherwise</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.add_deployment_dependencies">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">add_deployment_dependencies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.add_deployment_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Adding dependencies for IBM Cloud deployment</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.create_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">create_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.create_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OCP cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – in the case, the cluster is not installed
    successfully.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.destroy_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">destroy_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.destroy_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the cluster on IBM Cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name or ID.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.get_cluster_details">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">get_cluster_details</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.get_cluster_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the cluster which is taken from the ibmcloud command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name or ID</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.get_ibmcloud_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">get_ibmcloud_ocp_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.get_ibmcloud_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get OCP version available in IBM Cloud.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.get_kubeconfig">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">get_kubeconfig</code><span class="sig-paren">(</span><em class="sig-param">cluster</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.get_kubeconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Export kubeconfig to provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name or ID.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Path where to create kubeconfig file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.is_cluster_installed">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">is_cluster_installed</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.is_cluster_installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if cluster is installed and return True if so, False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name or ID</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.list_clusters">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">list_clusters</code><span class="sig-paren">(</span><em class="sig-param">provider=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.list_clusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the cluster which is taken from the ibmcloud command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>provider</strong> (<em>str</em>) – Provider type (classic, vpc-classic, vpc-gen2).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.login">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Login to IBM Cloud cluster</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ibmcloud.run_ibmcloud_cmd">
<code class="sig-prename descclassname">ocs_ci.utility.ibmcloud.</code><code class="sig-name descname">run_ibmcloud_cmd</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">secrets=None</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">ignore_error=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ibmcloud.run_ibmcloud_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function for <cite>run_cmd</cite> which if needed will perform IBM Cloud login
command before running the ibmcloud command. In the case run_cmd will fail
because the IBM cloud got disconnected, it will login and re-try.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – command to run</p></li>
<li><p><strong>secrets</strong> (<em>list</em>) – A list of secrets to be masked with asterisks
This kwarg is popped in order to not interfere with
subprocess.run(<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout for the command, defaults to 600 seconds.</p></li>
<li><p><strong>ignore_error</strong> (<em>bool</em>) – True if ignore non zero return code and do not
raise the exception.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.ipam">
<span id="ocs-ci-utility-ipam-module"></span><h2>ocs_ci.utility.ipam module<a class="headerlink" href="#module-ocs_ci.utility.ipam" title="Permalink to this headline">¶</a></h2>
<p>This module will interact with IPAM server</p>
<dl class="class">
<dt id="ocs_ci.utility.ipam.IPAM">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.ipam.</code><code class="sig-name descname">IPAM</code><span class="sig-paren">(</span><em class="sig-param">appiapp</em>, <em class="sig-param">ipam=None</em>, <em class="sig-param">token=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ipam.IPAM" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>IPAM class</p>
<dl class="method">
<dt id="ocs_ci.utility.ipam.IPAM.assign_ip">
<code class="sig-name descname">assign_ip</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">subnet</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ipam.IPAM.assign_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserve IP in IPAM server for a given host</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>) – hostname to reserve IP in IPAM server</p></li>
<li><p><strong>subnet</strong> (<em>str</em>) – subnet to reserve IP</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Reserved IP</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>HTTPError</strong> – in case of HTTP error</p></li>
<li><p><strong>ConnectionError</strong> – in case of Connection Error</p></li>
<li><p><strong>Timeout</strong> – in case of Timeout</p></li>
<li><p><strong>RequestException</strong> – Any Exception from requests</p></li>
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.IPAMAssignUpdateFailed" title="ocs_ci.ocs.exceptions.IPAMAssignUpdateFailed"><strong>IPAMAssignUpdateFailed</strong></a> – if it fails to assign IP</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ipam.IPAM.assign_ips">
<code class="sig-name descname">assign_ips</code><span class="sig-paren">(</span><em class="sig-param">hosts</em>, <em class="sig-param">subnet</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ipam.IPAM.assign_ips" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign IPs to the hosts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hosts</strong> (<em>list</em>) – List of hosts to reserve IP in IPAM server</p></li>
<li><p><strong>subnet</strong> (<em>str</em>) – subnet to reserve IPs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of Reserved IP’s</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ipam.IPAM.release_ip">
<code class="sig-name descname">release_ip</code><span class="sig-paren">(</span><em class="sig-param">hostname</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ipam.IPAM.release_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Release IP from IPAM server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hostname</strong> (<em>str</em>) – Hostname to release IP</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.IPAMReleaseUpdateFailed" title="ocs_ci.ocs.exceptions.IPAMReleaseUpdateFailed"><strong>IPAMReleaseUpdateFailed</strong></a> – If it fails to release IP from IPAM server</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ipam.IPAM.release_ips">
<code class="sig-name descname">release_ips</code><span class="sig-paren">(</span><em class="sig-param">hosts</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ipam.IPAM.release_ips" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases host IP’s from IPAM server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hosts</strong> (<em>list</em>) – List of host names to release IP’s</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.kms">
<span id="ocs-ci-utility-kms-module"></span><h2>ocs_ci.utility.kms module<a class="headerlink" href="#module-ocs_ci.utility.kms" title="Permalink to this headline">¶</a></h2>
<p>This module contains KMS related class and methods
currently supported KMSs: Vault and HPCS</p>
<dl class="class">
<dt id="ocs_ci.utility.kms.HPCS">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">HPCS</code><a class="headerlink" href="#ocs_ci.utility.kms.HPCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.kms.KMS" title="ocs_ci.utility.kms.KMS"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.kms.KMS</span></code></a></p>
<p>A class which handles deployment and other
configs related to HPCS</p>
<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup the backend resources in case of external</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.create_hpcs_csi_kms_connection_details">
<code class="sig-name descname">create_hpcs_csi_kms_connection_details</code><span class="sig-paren">(</span><em class="sig-param">namespace='openshift-storage'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.create_hpcs_csi_kms_connection_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Create hpcs specific csi kms connection details
configmap resource</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.create_ibm_kp_kms_secret">
<code class="sig-name descname">create_ibm_kp_kms_secret</code><span class="sig-paren">(</span><em class="sig-param">namespace='openshift-storage'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.create_ibm_kp_kms_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>create hpcs specific csi kms secret resource</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.create_ocs_hpcs_resources">
<code class="sig-name descname">create_ocs_hpcs_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.create_ocs_hpcs_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes care of creating ocp resources for
secrets like hpcs customer root key, service api key, etc.
Assumption is hpcs section in AUTH file contains hpcs service
instance id, base url, token url, api key and customer root key.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.delete_resource">
<code class="sig-name descname">delete_resource</code><span class="sig-paren">(</span><em class="sig-param">resource_name</em>, <em class="sig-param">resource_type</em>, <em class="sig-param">resource_namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.delete_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Given resource type, resource name and namespace, this function will
delete oc resource</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource_name</strong> – name of the resource</p></li>
<li><p><strong>resource_type</strong> – type of resource such as secret</p></li>
<li><p><strong>resource_namespace</strong> – namespace in which resource is present</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.deploy">
<code class="sig-name descname">deploy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>This function delegates the deployment of hpcs
based on OCP or vault standalone external mode deployment</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.deploy_hpcs_external">
<code class="sig-name descname">deploy_hpcs_external</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.deploy_hpcs_external" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes care of deployment and configuration
for external mode hpcs deployment. We are assuming that
an external hpcs service already exists and we will be just
configuring the necessary OCP objects for OCS like secrets, token etc</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.gather_hpcs_config">
<code class="sig-name descname">gather_hpcs_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.gather_hpcs_config" title="Permalink to this definition">¶</a></dt>
<dd><p>This function populates the hpcs configuration</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.gather_init_hpcs_conf">
<code class="sig-name descname">gather_init_hpcs_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.gather_init_hpcs_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather hpcs configuration and init the vars
This function currently gathers only for external mode</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.get_token_for_ibm_api_key">
<code class="sig-name descname">get_token_for_ibm_api_key</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.get_token_for_ibm_api_key" title="Permalink to this definition">¶</a></dt>
<dd><p>This function retrieves the access token in exchange of
an IBM API key</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>access token for authentication with IBM endpoints</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.list_hpcs_keys">
<code class="sig-name descname">list_hpcs_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.list_hpcs_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>This function lists the keys present in a HPCS instance</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of keys in a HPCS instance</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.post_deploy_verification">
<code class="sig-name descname">post_deploy_verification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.post_deploy_verification" title="Permalink to this definition">¶</a></dt>
<dd><p>Validating the OCS deployment from hpcs perspective</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.HPCS.validate_external_hpcs">
<code class="sig-name descname">validate_external_hpcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.HPCS.validate_external_hpcs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is for post OCS deployment HPCS
verification</p>
<p>Following checks will be done
1. check osd encryption keys in the HPCS path
2. check noobaa keys in the HPCS path
3. check storagecluster CR for ‘kms’ enabled</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NotFoundError" title="ocs_ci.ocs.exceptions.NotFoundError"><strong>NotFoundError</strong></a> – if key not found in HPCS OR in the resource CR</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.kms.KMIP">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">KMIP</code><a class="headerlink" href="#ocs_ci.utility.kms.KMIP" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.kms.KMS" title="ocs_ci.utility.kms.KMS"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.kms.KMS</span></code></a></p>
<p>A class which handles deployment and other
configs related to KMIP (Thales CipherTrust Manager)</p>
<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.check_key_exists_in_ciphertrust">
<code class="sig-name descname">check_key_exists_in_ciphertrust</code><span class="sig-paren">(</span><em class="sig-param">key_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.check_key_exists_in_ciphertrust" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a key with the key_id is present in CipherTrust Manager</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_id</strong> (<em>str</em>) – ID of the key to be checked for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True, if the key exists in CipherTrust Manager</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup for KMIP</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.create_ciphertrust_key">
<code class="sig-name descname">create_ciphertrust_key</code><span class="sig-paren">(</span><em class="sig-param">key_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.create_ciphertrust_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a key in Ciphertrust Manager to be used for PV encryption</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_name</strong> (<em>str</em>) – Name of the key to be created</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ID of the key created in CipherTrust</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.create_kmip_csi_kms_connection_details">
<code class="sig-name descname">create_kmip_csi_kms_connection_details</code><span class="sig-paren">(</span><em class="sig-param">namespace='openshift-storage'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.create_kmip_csi_kms_connection_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Create KMIP specific csi-kms-connection-details
configmap resource</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.create_kmip_secret">
<code class="sig-name descname">create_kmip_secret</code><span class="sig-paren">(</span><em class="sig-param">type='ocs'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.create_kmip_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Create secret containing the certificates and unique identifier (only for PV encryption)
from CipherTrust Manager KMS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>type</strong> (<em>str</em>) – csi, if the secret is being created for PV/Storageclass encryption
ocs, if the secret is for clusterwide encryption</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name of the kmip secret</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.create_odf_kmip_resources">
<code class="sig-name descname">create_odf_kmip_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.create_odf_kmip_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Create secret containing certs and the ocs-kms-connection-details confignmap</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.delete_ciphertrust_key">
<code class="sig-name descname">delete_ciphertrust_key</code><span class="sig-paren">(</span><em class="sig-param">key_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.delete_ciphertrust_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete key from CipherTrust Manager</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_id</strong> (<em>str</em>) – ID of the key to be deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.deploy">
<code class="sig-name descname">deploy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>This function delegates the deployment of KMS using KMIP.
Thales CipherTrust Manager is the only supported vendor for now.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.deploy_kmip_ciphertrust">
<code class="sig-name descname">deploy_kmip_ciphertrust</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.deploy_kmip_ciphertrust" title="Permalink to this definition">¶</a></dt>
<dd><p>This function configures the resources required to use Thales CipherTrust Manager with ODF</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.get_key_info_ciphertrust">
<code class="sig-name descname">get_key_info_ciphertrust</code><span class="sig-paren">(</span><em class="sig-param">key_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.get_key_info_ciphertrust" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve information about a given key</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_id</strong> (<em>str</em>) – ID of the key in CipherTrust</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>(dict): Dictionary with key details</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.get_key_list_ciphertrust">
<code class="sig-name descname">get_key_list_ciphertrust</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.get_key_list_ciphertrust" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists all keys in CipherTrust Manager</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list containing the IDs of the keys</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.get_noobaa_key_id">
<code class="sig-name descname">get_noobaa_key_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.get_noobaa_key_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the key ID used for encryption by Noobaa</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Key ID used by NooBaa for encryption</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.get_osd_key_ids">
<code class="sig-name descname">get_osd_key_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.get_osd_key_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the key ID used for OSD encryption stored in their respective secrets</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of key IDs from all OSDs</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.post_deploy_verification">
<code class="sig-name descname">post_deploy_verification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.post_deploy_verification" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify ODF deployment using KMIP</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.update_kmip_env_vars">
<code class="sig-name descname">update_kmip_env_vars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.update_kmip_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the environment variable for CipherTrust to allow running ksctl CLI cmds</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMIP.validate_ciphertrust_deployment">
<code class="sig-name descname">validate_ciphertrust_deployment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMIP.validate_ciphertrust_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify whether OSD and NooBaa keys are stored in CipherTrust Manager</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.kms.KMS">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">KMS</code><span class="sig-paren">(</span><em class="sig-param">provider=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is base class for any KMS integration</p>
<dl class="method">
<dt id="ocs_ci.utility.kms.KMS.create_csi_kms_resources">
<code class="sig-name descname">create_csi_kms_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMS.create_csi_kms_resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMS.create_resource">
<code class="sig-name descname">create_resource</code><span class="sig-paren">(</span><em class="sig-param">resource_data</em>, <em class="sig-param">prefix=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMS.create_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dictionary of resource data, this function will
creates oc resource</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource_data</strong> (<em>dict</em>) – yaml dictionary for resource</p></li>
<li><p><strong>prefix</strong> (<em>str</em>) – prefix for NamedTemporaryFile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMS.deploy">
<code class="sig-name descname">deploy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMS.deploy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.KMS.post_deploy_verification">
<code class="sig-name descname">post_deploy_verification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.KMS.post_deploy_verification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.kms.Vault">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">Vault</code><a class="headerlink" href="#ocs_ci.utility.kms.Vault" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.kms.KMS" title="ocs_ci.utility.kms.KMS"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.kms.KMS</span></code></a></p>
<p>A class which handles deployment and other
configs related to vault</p>
<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup the backend resources in case of external</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_namespace">
<code class="sig-name descname">create_namespace</code><span class="sig-paren">(</span><em class="sig-param">vault_namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a vault namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vault_namespace</strong> (<em>str</em>) – name of the vault namespace</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.VaultOperationError" title="ocs_ci.ocs.exceptions.VaultOperationError"><strong>VaultOperationError</strong></a> – If namespace is not created successfully</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_ocs_kube_auth_resources">
<code class="sig-name descname">create_ocs_kube_auth_resources</code><span class="sig-paren">(</span><em class="sig-param">sa_name='odf-vault-auth'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_ocs_kube_auth_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will create the serviceaccount and clusterrolebindings
required for kubernetes auth</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sa_name</strong> (<em>str</em>) – Name of the service account in ODF</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_ocs_vault_cert_resources">
<code class="sig-name descname">create_ocs_vault_cert_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_ocs_vault_cert_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicitly create secrets like ca cert, client cert, client key
Assumption is vault section in AUTH file contains base64 encoded
(with padding) ca, client certs, client key</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_ocs_vault_resources">
<code class="sig-name descname">create_ocs_vault_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_ocs_vault_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes care of creating ocp resources for
secrets like ca cert, client cert, client key and vault token
Assumption is vault section in AUTH file contains base64 encoded
(with padding) ca, client certs, client key and vault path token</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_tenant_configmap">
<code class="sig-name descname">create_tenant_configmap</code><span class="sig-paren">(</span><em class="sig-param">tenant_namespace</em>, <em class="sig-param">**vault_config</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_tenant_configmap" title="Permalink to this definition">¶</a></dt>
<dd><p>This functional will create a configmap in the tenant namespace to override
the vault config in csi-kms-connection-details configmap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tenant_namespace</strong> (<em>str</em>) – Tenant namespace</p></li>
<li><p><strong>vaultBackend</strong> (<em>str</em>) – KV version to be used, either kv or kv-v2</p></li>
<li><p><strong>vaultBackendPath</strong> (<em>str</em>) – The backend path in Vault where the encryption
keys will be stored</p></li>
<li><p><strong>vaultNamespace</strong> (<em>str</em>) – Namespace in Vault, if exists, where the backend
path is created</p></li>
<li><p><strong>vaultRole</strong> (<em>str</em>) – (Vaulttenantsa) The role name in Vault configured with
kube auth method for the given policy and tenant namespace</p></li>
<li><p><strong>vaultAuthPath</strong> (<em>str</em>) – (Vaulttenantsa) The path where kubernetes auth
method is enabled</p></li>
<li><p><strong>vaultAuthNamespace</strong> (<em>str</em>) – (Vaulttenantsa) The namespace where kubernetes
auth method is enabled, if exists</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_tenant_sa">
<code class="sig-name descname">create_tenant_sa</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_tenant_sa" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will create the serviceaccount in the tenant namespace to
authenticate to Vault when vaulttenantsa KMS type is used for PV encryption.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – The tenant namespace where the service account will be created</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_token_reviewer_resources">
<code class="sig-name descname">create_token_reviewer_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_token_reviewer_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will create the rbd-csi-vault-token-review SA, clusterRole
and clusterRoleBindings required for the kubernetes auth method with
vaulttenantsa encryption type.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – Exception if the command fails</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_vault_csi_kms_connection_details">
<code class="sig-name descname">create_vault_csi_kms_connection_details</code><span class="sig-paren">(</span><em class="sig-param">kv_version</em>, <em class="sig-param">vault_auth_method='vaulttokens'</em>, <em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_vault_csi_kms_connection_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Create vault specific csi kms connection details
configmap resource</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_vault_csi_kms_token">
<code class="sig-name descname">create_vault_csi_kms_token</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_vault_csi_kms_token" title="Permalink to this definition">¶</a></dt>
<dd><p>create vault specific csi kms secret resource</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – then value from config will be used.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.create_vault_kube_auth_role">
<code class="sig-name descname">create_vault_kube_auth_role</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">role_name='csi-kubernetes'</em>, <em class="sig-param">sa_name='ceph-csi-vault-sa'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.create_vault_kube_auth_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a role for tenant authentication in Vault</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – namespace in ODF cluster</p></li>
<li><p><strong>role_name</strong> (<em>str</em>) – Name of the role in Vault</p></li>
<li><p><strong>sa_name</strong> (<em>str</em>) – Service account in the tenant namespace to be used for authentication</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.deploy">
<code class="sig-name descname">deploy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>This function delegates the deployment of vault
based on OCP or vault standalone external mode deployment</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.deploy_vault_external">
<code class="sig-name descname">deploy_vault_external</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.deploy_vault_external" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes care of deployment and configuration
for external mode vault deployment. We are assuming that
an external vault service already exists and we will be just
configuring the necessary OCP objects for OCS like secrets, token etc</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.deploy_vault_internal">
<code class="sig-name descname">deploy_vault_internal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.deploy_vault_internal" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes care of deployment and configuration for
internal mode vault deployment on OCP</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.gather_init_vault_conf">
<code class="sig-name descname">gather_init_vault_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.gather_init_vault_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather vault configuration and init the vars
This function currently gathers only for external mode
Gathering for internal mode woulde be different</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.gather_vault_config">
<code class="sig-name descname">gather_vault_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.gather_vault_config" title="Permalink to this definition">¶</a></dt>
<dd><p>This function populates the vault configuration</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.generate_vault_token">
<code class="sig-name descname">generate_vault_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.generate_vault_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a token for self.vault_policy_name</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>vault token</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_backend_path">
<code class="sig-name descname">get_vault_backend_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_backend_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the vault backend path used for this deployment
This can be obtained from kubernetes secret resource
‘ocs-kms-connection-details’</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>apiVersion: v1
data:
  KMS_PROVIDER: vault
  KMS_SERVICE_NAME: vault
  VAULT_ADDR: https://xx.xx.xx.xx:8200
  VAULT_BACKEND_PATH: ocs
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_connection_info">
<code class="sig-name descname">get_vault_connection_info</code><span class="sig-paren">(</span><em class="sig-param">resource_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_connection_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get resource info from ocs-kms-connection-defatils</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_name</strong> (<em>str</em>) – name of the resource</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_kube_auth_role">
<code class="sig-name descname">get_vault_kube_auth_role</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_kube_auth_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the role name from ocs-kms-connection-details configmap</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_namespace">
<code class="sig-name descname">get_vault_namespace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>From kms connection details resource obtain
namespace</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_path_token">
<code class="sig-name descname">get_vault_path_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_path_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch token from kubernetes secret
we need this to find the vault policy
default name in case of ocs is ‘ocs-kms-token’</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>apiVersion: v1
data:
  token: cy5DRXBKV0lVbzNFQjM1VHlGMFNURzZQWms=
kind: Secret
metadata:
  name: ocs-kms-token
namespace: openshift-storage
type: Opaque
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.get_vault_policy">
<code class="sig-name descname">get_vault_policy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.get_vault_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the policy name based on token from vault</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.post_deploy_verification">
<code class="sig-name descname">post_deploy_verification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.post_deploy_verification" title="Permalink to this definition">¶</a></dt>
<dd><p>Validating the OCS deployment from vault perspective</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.remove_vault_backend_path">
<code class="sig-name descname">remove_vault_backend_path</code><span class="sig-paren">(</span><em class="sig-param">vault_namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.remove_vault_backend_path" title="Permalink to this definition">¶</a></dt>
<dd><p>remove vault path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vault_namespace</strong> (<em>str</em>) – Namespace in Vault, if exists, where the backend path is created</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.remove_vault_namespace">
<code class="sig-name descname">remove_vault_namespace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.remove_vault_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup the namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KMSResourceCleanupError</strong> – If namespace deletion fails</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.remove_vault_policy">
<code class="sig-name descname">remove_vault_policy</code><span class="sig-paren">(</span><em class="sig-param">vault_namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.remove_vault_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup the policy we used</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>vault</em>) – Namespace in Vault, if exists, where the backend path is created</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.setup_vault_client_cert">
<code class="sig-name descname">setup_vault_client_cert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.setup_vault_client_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>For Vault cli interaction with the server we need client cert
to talk to HTTPS on the vault server</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.update_vault_env_vars">
<code class="sig-name descname">update_vault_env_vars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.update_vault_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>In order to run vault CLI we need following env vars
VAULT_ADDR and VAULT_TOKEN</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.validate_external_vault">
<code class="sig-name descname">validate_external_vault</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.validate_external_vault" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is for post OCS deployment vault
verification</p>
<p>Following checks will be done
1. check osd encryption keys in the vault path
2. check noobaa keys in the vault path
3. check storagecluster CR for ‘kms’ enabled</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.NotFoundError" title="ocs_ci.ocs.exceptions.NotFoundError"><strong>NotFoundError</strong></a> – if key not found in vault OR in the resource CR</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_backend_path_exists">
<code class="sig-name descname">vault_backend_path_exists</code><span class="sig-paren">(</span><em class="sig-param">backend_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_backend_path_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if vault backend path already exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>backend_path</strong> (<em>str</em>) – name of the vault backend path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if exists else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_create_backend_path">
<code class="sig-name descname">vault_create_backend_path</code><span class="sig-paren">(</span><em class="sig-param">backend_path=None</em>, <em class="sig-param">kv_version=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_create_backend_path" title="Permalink to this definition">¶</a></dt>
<dd><p>create vault path to be used by OCS</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>VaultOperationError exception</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_create_namespace">
<code class="sig-name descname">vault_create_namespace</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_create_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a vault namespace if it doesn’t exists</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_create_policy">
<code class="sig-name descname">vault_create_policy</code><span class="sig-paren">(</span><em class="sig-param">policy_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_create_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a vault policy and generate token</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>VaultOperationError exception</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_kube_auth_setup">
<code class="sig-name descname">vault_kube_auth_setup</code><span class="sig-paren">(</span><em class="sig-param">auth_path=None</em>, <em class="sig-param">auth_namespace=None</em>, <em class="sig-param">token_reviewer_name='rbd-csi-vault-token-review'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_kube_auth_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup kubernetes auth method in Vault</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>auth_path</strong> (<em>str</em>) – The path where kubernetes auth is to be enabled.
If not provided default ‘kubernetes’ path is used</p></li>
<li><p><strong>auth_namespace</strong> (<em>str</em>) – The vault namespace where kubernetes auth is
to be enabled, if applicable</p></li>
<li><p><strong>token_reviewer_name</strong> (<em>str</em>) – Name of the token-reviewer serviceaccount
in openshift-storage namespace</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.VaultOperationError" title="ocs_ci.ocs.exceptions.VaultOperationError"><strong>VaultOperationError</strong></a> – if kube auth method setup fails</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_namespace_exists">
<code class="sig-name descname">vault_namespace_exists</code><span class="sig-paren">(</span><em class="sig-param">vault_namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_namespace_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if vault namespace already exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vault_namespace</strong> (<em>str</em>) – name of the vault namespace</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if exists else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_sealed">
<code class="sig-name descname">vault_sealed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_sealed" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>if vault is sealed then return True else False</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.kms.Vault.vault_unseal">
<code class="sig-name descname">vault_unseal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.Vault.vault_unseal" title="Permalink to this definition">¶</a></dt>
<dd><p>Unseal vault if sealed</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.VaultOperationError" title="ocs_ci.ocs.exceptions.VaultOperationError"><strong>VaultOperationError</strong></a> – In case unseal operation failed</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.get_encryption_kmsid">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">get_encryption_kmsid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.get_encryption_kmsid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get encryption kmsid from ‘csi-kms-connection-details’
configmap resource</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of KMS IDs available</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>kmsid (list)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.KMSConnectionDetailsError" title="ocs_ci.ocs.exceptions.KMSConnectionDetailsError"><strong>KMSConnectionDetailsError</strong></a> – if csi kms connection detail doesn’t exist</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.get_kms_deployment">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">get_kms_deployment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.get_kms_deployment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.get_ksctl_cli">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">get_ksctl_cli</code><span class="sig-paren">(</span><em class="sig-param">bin_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.get_ksctl_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Download ksctl to interact with CipherTrust Manager via CLI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.is_key_present_in_path">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">is_key_present_in_path</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.is_key_present_in_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if key is present in the backend Path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Name of the key</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Vault backend path name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if key is present in the backend path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.is_kms_enabled">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">is_kms_enabled</code><span class="sig-paren">(</span><em class="sig-param">dont_raise=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.is_kms_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks StorageCluster yaml if kms is configured.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if KMS is configured else False</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.remove_kmsid">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">remove_kmsid</code><span class="sig-paren">(</span><em class="sig-param">kmsid</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.remove_kmsid" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will remove all the details for the given kmsid from the csi-kms-connection-details configmap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kmsid</strong> (<em>str</em>) – kmsid to be remove_kmsid</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.KMSResourceCleaneupError" title="ocs_ci.ocs.exceptions.KMSResourceCleaneupError"><strong>KMSResourceCleaneupError</strong></a> – If the kmsid entry is not deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.remove_token_reviewer_resources">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">remove_token_reviewer_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.remove_token_reviewer_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the SA, clusterRole and clusterRoleBindings for token reviewer</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.update_csi_kms_vault_connection_details">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">update_csi_kms_vault_connection_details</code><span class="sig-paren">(</span><em class="sig-param">update_config</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.update_csi_kms_vault_connection_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the vault connection details in the resource
csi-kms-connection-details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>update_config</strong> (<em>dict</em>) – A dictionary of vault info to be updated</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.kms.vault_kv_list">
<code class="sig-prename descclassname">ocs_ci.utility.kms.</code><code class="sig-name descname">vault_kv_list</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.kms.vault_kv_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List kv from a given path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Vault backend path name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>of kv present in the path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.load_balancer">
<span id="ocs-ci-utility-load-balancer-module"></span><h2>ocs_ci.utility.load_balancer module<a class="headerlink" href="#module-ocs_ci.utility.load_balancer" title="Permalink to this headline">¶</a></h2>
<p>Module that contains all operations related to load balancer in a cluster</p>
<dl class="class">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.load_balancer.</code><code class="sig-name descname">LoadBalancer</code><span class="sig-paren">(</span><em class="sig-param">host=None</em>, <em class="sig-param">user=None</em>, <em class="sig-param">private_key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that handles all operations related to load balancer</p>
<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.modify_haproxy_service">
<code class="sig-name descname">modify_haproxy_service</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.modify_haproxy_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify haproxy service</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.reload_daemon">
<code class="sig-name descname">reload_daemon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.reload_daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload daemon-reload</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.remove_boostrap_in_proxy">
<code class="sig-name descname">remove_boostrap_in_proxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.remove_boostrap_in_proxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes bootstrap IP from haproxy.conf</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.remove_compute_node_in_proxy">
<code class="sig-name descname">remove_compute_node_in_proxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.remove_compute_node_in_proxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes compute node IP’s from haproxy.conf</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.rename_haproxy">
<code class="sig-name descname">rename_haproxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.rename_haproxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename haproxy configuration file from haproxy.conf to haproxy.cfg</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.rename_haproxy_conf_and_reload">
<code class="sig-name descname">rename_haproxy_conf_and_reload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.rename_haproxy_conf_and_reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename haproxy config and restart haproxy service</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.restart_haproxy">
<code class="sig-name descname">restart_haproxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.restart_haproxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts haproxy service</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successful restarts of haproxy, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.restart_service">
<code class="sig-name descname">restart_service</code><span class="sig-paren">(</span><em class="sig-param">service_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.restart_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts the given service</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.load_balancer.LoadBalancer.update_haproxy_with_nodes">
<code class="sig-name descname">update_haproxy_with_nodes</code><span class="sig-paren">(</span><em class="sig-param">nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.load_balancer.LoadBalancer.update_haproxy_with_nodes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>list</em>) – List of nodes to update in haproxy</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.localstorage">
<span id="ocs-ci-utility-localstorage-module"></span><h2>ocs_ci.utility.localstorage module<a class="headerlink" href="#module-ocs_ci.utility.localstorage" title="Permalink to this headline">¶</a></h2>
<p>This module contains local-storage related methods</p>
<dl class="function">
<dt id="ocs_ci.utility.localstorage.check_local_volume_local_volume_set">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">check_local_volume_local_volume_set</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.check_local_volume_local_volume_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to check if Local-volume and Local volume set is present or not</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict for localvolume and localvolumeset</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.localstorage.check_pvs_created">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">check_pvs_created</code><span class="sig-paren">(</span><em class="sig-param">num_pvs_required</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.check_pvs_created" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that exact number of PVs were created and are in the Available state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_pvs_required</strong> (<em>int</em>) – number of PVs required</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – if the number of PVs are not in the Available state</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.localstorage.fetch_all_device_paths">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">fetch_all_device_paths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.fetch_all_device_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all device paths inside worker nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List containing all device paths</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.localstorage.get_local_volume_cr">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">get_local_volume_cr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.get_local_volume_cr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get localVolumeCR object</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Local Volume object handler</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>local volume (obj)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.localstorage.get_lso_channel">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">get_lso_channel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.get_lso_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the channel to use for installing the local storage operator</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>local storage operator channel</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.localstorage.get_new_device_paths">
<code class="sig-prename descclassname">ocs_ci.utility.localstorage.</code><code class="sig-name descname">get_new_device_paths</code><span class="sig-paren">(</span><em class="sig-param">device_sets_required</em>, <em class="sig-param">osd_size_capacity_requested</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.localstorage.get_new_device_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Get new device paths to add capacity over Baremetal cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_sets_required</strong> (<em>int</em>) – Count of device sets to be added</p></li>
<li><p><strong>osd_size_capacity_requested</strong> (<em>int</em>) – Requested OSD size capacity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List containing added device paths</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.lvm_utils">
<span id="ocs-ci-utility-lvm-utils-module"></span><h2>ocs_ci.utility.lvm_utils module<a class="headerlink" href="#module-ocs_ci.utility.lvm_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.lvcreate">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">lvcreate</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">lv_name</em>, <em class="sig-param">vg_name</em>, <em class="sig-param">size</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.lvcreate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.make_partition">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">make_partition</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">device</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em>, <em class="sig-param">gpt=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.make_partition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario1">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario1</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em>, <em class="sig-param">dmcrypt=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario1" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type1 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario1_dmcrypt">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario1_dmcrypt</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario1_dmcrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type2 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt(overridden to True)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario2">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario2</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em>, <em class="sig-param">dmcrypt=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario2" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type3 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario2_dmcrypt">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario2_dmcrypt</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario2_dmcrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type4 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt(overridden to True)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario3">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario3</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em>, <em class="sig-param">dmcrypt=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario3" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type5 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.osd_scenario3_dmcrypt">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">osd_scenario3_dmcrypt</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.osd_scenario3_dmcrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>OSD scenario type6 generator
:param osd: osd node
:param devices_dict: dict of devices of the osd node supplied
:param dmcrypt: False by default</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>generated scenario, dmcrypt(overridden to True)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.pvcreate">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">pvcreate</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">devices</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.pvcreate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvm_utils.vgcreate">
<code class="sig-prename descclassname">ocs_ci.utility.lvm_utils.</code><code class="sig-name descname">vgcreate</code><span class="sig-paren">(</span><em class="sig-param">osd</em>, <em class="sig-param">vg_name</em>, <em class="sig-param">devices</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvm_utils.vgcreate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.lvmo_utils">
<span id="ocs-ci-utility-lvmo-utils-module"></span><h2>ocs_ci.utility.lvmo_utils module<a class="headerlink" href="#module-ocs_ci.utility.lvmo_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.delete_lvm_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">delete_lvm_cluster</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.delete_lvm_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete lvm cluster if exists</p>
<dl class="simple">
<dt>raise:</dt><dd><p>execption if lvmcluster cant be deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.get_lvm_cluster_name">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">get_lvm_cluster_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.get_lvm_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get LVM clustername Dynamically</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str) lvm cluster name.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.get_sno_blockdevices">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">get_sno_blockdevices</code><span class="sig-paren">(</span><em class="sig-param">node='sno-edge-0'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.get_sno_blockdevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets list of storage devices by it’s names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>str</em>) – node name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of storage devices full-names (str)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.get_sno_disks_by_path">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">get_sno_disks_by_path</code><span class="sig-paren">(</span><em class="sig-param">node='sno-edge-0'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.get_sno_disks_by_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of storage devices by it’s path as listed on node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>str</em>) – node name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of storage devices full-path (str)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.lvmo_health_check">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">lvmo_health_check</code><span class="sig-paren">(</span><em class="sig-param">tries=20</em>, <em class="sig-param">delay=30</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.lvmo_health_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Priodic check LVMO cluster health</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tries</strong> (<em>int</em>) – number of retries.</p></li>
<li><p><strong>delay</strong> (<em>int</em>) – delay between retries.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if cluster is healthy, raise exception otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.lvmo_utils.lvmo_health_check_base">
<code class="sig-prename descclassname">ocs_ci.utility.lvmo_utils.</code><code class="sig-name descname">lvmo_health_check_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.lvmo_utils.lvmo_health_check_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Check health of lvm cluster by checking the following:
lvm cluster cr status,
lvm pods status</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if all checks passed, raise exception otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.managedservice">
<span id="ocs-ci-utility-managedservice-module"></span><h2>ocs_ci.utility.managedservice module<a class="headerlink" href="#module-ocs_ci.utility.managedservice" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.managedservice.generate_onboarding_token">
<code class="sig-prename descclassname">ocs_ci.utility.managedservice.</code><code class="sig-name descname">generate_onboarding_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.managedservice.generate_onboarding_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Onboarding token for consumer cluster via following steps:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Download ticketgen.sh script from:</dt><dd><p><a class="reference external" href="https://raw.githubusercontent.com/jarrpa/ocs-operator/ticketgen/hack/ticketgen/ticketgen.sh">https://raw.githubusercontent.com/jarrpa/ocs-operator/ticketgen/hack/ticketgen/ticketgen.sh</a></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Save private key from AUTH[“managed_service”][“private_key”] to</dt><dd><p>temporary file.</p>
</dd>
</dl>
</li>
<li><p>Run ticketgen.sh script to generate Onboarding token.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – In case the script ticketgen.sh fails.</p></li>
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ConfigurationError" title="ocs_ci.ocs.exceptions.ConfigurationError"><strong>ConfigurationError</strong></a> – when AUTH[“managed_service”][“private_key”] not is not defined</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Onboarding token</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.managedservice.get_storage_provider_endpoint">
<code class="sig-prename descclassname">ocs_ci.utility.managedservice.</code><code class="sig-name descname">get_storage_provider_endpoint</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.managedservice.get_storage_provider_endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Get get_storage_provider_endpoint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of storage provider endpoint</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.managedservice.remove_header_footer_from_key">
<code class="sig-prename descclassname">ocs_ci.utility.managedservice.</code><code class="sig-name descname">remove_header_footer_from_key</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.managedservice.remove_header_footer_from_key" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will remove header and footer from key (like:
—–BEGIN RSA PRIVATE KEY—–
—–END RSA PRIVATE KEY—–
) and return the key on one line.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>one line key string without header and footer</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.memory">
<span id="ocs-ci-utility-memory-module"></span><h2>ocs_ci.utility.memory module<a class="headerlink" href="#module-ocs_ci.utility.memory" title="Permalink to this headline">¶</a></h2>
<p>Module for memory related util functions.</p>
<dl class="class">
<dt id="ocs_ci.utility.memory.MemoryMonitor">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">MemoryMonitor</code><span class="sig-paren">(</span><em class="sig-param">interval</em>, <em class="sig-param">function</em>, <em class="sig-param">args=None</em>, <em class="sig-param">kwargs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.memory.MemoryMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Timer</span></code></p>
<p>class to implement threading.Timer running func in a background</p>
<dl class="method">
<dt id="ocs_ci.utility.memory.MemoryMonitor.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.memory.MemoryMonitor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.catch_empty_mem_df">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">catch_empty_mem_df</code><span class="sig-paren">(</span><em class="sig-param">df: pandas.core.frame.DataFrame</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.memory.catch_empty_mem_df" title="Permalink to this definition">¶</a></dt>
<dd><p>routine function to catch psutil failures and fill memory dataframe with failure markers,
therefore we may see number of failures and ignore them on examination stage</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.get_consumed_ram">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">get_consumed_ram</code><span class="sig-paren">(</span><em class="sig-param">proc: psutil.Process = psutil.Process(pid=18125</em>, <em class="sig-param">name='Python'</em>, <em class="sig-param">status='running'</em>, <em class="sig-param">started='17:09:25')</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.memory.get_consumed_ram" title="Permalink to this definition">¶</a></dt>
<dd><p>Get consumed RAM(rss) for the process
rss is the Resident Set Size, which is the actual physical memory the process is using</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.get_consumed_virt_mem">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">get_consumed_virt_mem</code><span class="sig-paren">(</span><em class="sig-param">proc: psutil.Process = psutil.Process(pid=18125</em>, <em class="sig-param">name='Python'</em>, <em class="sig-param">status='running'</em>, <em class="sig-param">started='17:09:25')</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.memory.get_consumed_virt_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Get consumed Virtual mem for the process
vms is the Virtual Memory Size which is the virtual memory that process is using</p>
<p>! Important notice !
‘vms’ will be larger than physical memory capacity:
Shared libraries and frameworks are counted as part of the virtual memory for
every application that uses them, e.g. if you have 100 processes
running on a computer, and a 5 MB library used by all those processes,
then that library is counted as 500 MB of virtual memory.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.get_peak_sum_mem">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">get_peak_sum_mem</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; tuple<a class="headerlink" href="#ocs_ci.utility.memory.get_peak_sum_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>get peak summarized memory stats for the test. Each test df file created anew.
spikes defined per measurment (once in three seconds by default -&gt; start_monitor_memory())</p>
</dd></dl>

<dl class="data">
<dt id="ocs_ci.utility.memory.mon">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">mon</code><em class="property">: ocs_ci.utility.memory.MemoryMonitor</em><em class="property"> = None</em><a class="headerlink" href="#ocs_ci.utility.memory.mon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.peak_mem_stats_human_readable">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">peak_mem_stats_human_readable</code><span class="sig-paren">(</span><em class="sig-param">stat: &lt;module 'ocs_ci.ocs.constants' from '/Users/danielosypenko/Work/automation_4/ocs-ci/ocs_ci/ocs/constants.py'&gt;</em>, <em class="sig-param">csv_path: str = None</em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="headerlink" href="#ocs_ci.utility.memory.peak_mem_stats_human_readable" title="Permalink to this definition">¶</a></dt>
<dd><p>make peak mem stats dataframe human-readable
dataframe columns = [name, proc_start, proc_end, rss_peak]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stat</strong> (<em>constants</em>) – stat either ‘rss’ or ‘vms’ (constants.RAM | constants.VIRT)</p></li>
<li><p><strong>csv_path</strong> (<em>str</em>) – path to csv file with structure: index,pid,name,ts,rss,vms,status;
will be ignored in case if df != None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>peak memory stats dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.read_peak_mem_stats">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">read_peak_mem_stats</code><span class="sig-paren">(</span><em class="sig-param">stat: &lt;module 'ocs_ci.ocs.constants' from '/Users/danielosypenko/Work/automation_4/ocs-ci/ocs_ci/ocs/constants.py'&gt;</em>, <em class="sig-param">df: pandas.core.frame.DataFrame = None</em>, <em class="sig-param">csv_path: str = None</em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="headerlink" href="#ocs_ci.utility.memory.read_peak_mem_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Read peak memory stats from Dataframe or csv file. Processes with stat above avg will be taken
Table will be reduced to only processes with stat &gt; avg(stat) if number of processes will be
larger than 10</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stat</strong> (<em>constants</em>) – stat either ‘rss’ or ‘vms’ (constants.RAM | constants.VIRT)</p></li>
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – dataframe object with structure: index,pid,name,ts,rss,vms,status</p></li>
<li><p><strong>csv_path</strong> (<em>str</em>) – path to csv file with structure: index,pid,name,ts,rss,vms,status;
will be ignored in case if df != None</p></li>
</ul>
</dd>
</dl>
<p>Returns: pd.DataFrame similar to:
name                                     proc_start             proc_end                rss_peak
0                    Google Chrome  2022-12-23 14:25:36      2022-12-23 14:27:32         156 MB
1  Google Chrome Helper (Renderer)  2022-12-23 14:25:39      2022-12-23 14:27:32         784 MB
2                           Python  2022-12-23 14:25:22      2022-12-23 14:27:32         228 MB</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.start_monitor_memory">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">start_monitor_memory</code><span class="sig-paren">(</span><em class="sig-param">interval: int = 3</em>, <em class="sig-param">create_csv: bool = False</em><span class="sig-paren">)</span> &#x2192; ocs_ci.utility.memory.MemoryMonitor<a class="headerlink" href="#ocs_ci.utility.memory.start_monitor_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Start memory monitor Timer process</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval</strong> (<em>int</em>) – interval in sec to read measurements. Min interval is 2 sec</p></li>
<li><p><strong>create_csv</strong> (<em>bool</em>) – create csv during test run. With this option it is possible
to upload file as artifact (to be done) or preserve csv file in the system</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>monitor object MemoryMonitor(Timer)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ocs_ci.utility.memory.MemoryMonitor" title="ocs_ci.utility.memory.MemoryMonitor">MemoryMonitor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.memory.stop_monitor_memory">
<code class="sig-prename descclassname">ocs_ci.utility.memory.</code><code class="sig-name descname">stop_monitor_memory</code><span class="sig-paren">(</span><em class="sig-param">save_csv: bool = False</em><span class="sig-paren">)</span> &#x2192; tuple<a class="headerlink" href="#ocs_ci.utility.memory.stop_monitor_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop MemoryMonitor(Timer) and read memory stats</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>save_csv</strong> – saves csv temporarily, until main process is dead if save_csv = True;
require create_csv=True at start_monitor_memory(…)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.metadata_utils">
<span id="ocs-ci-utility-metadata-utils-module"></span><h2>ocs_ci.utility.metadata_utils module<a class="headerlink" href="#module-ocs_ci.utility.metadata_utils" title="Permalink to this headline">¶</a></h2>
<p>Module that contains all operations related to add metadata feature in a cluster</p>
<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.available_subvolumes">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">available_subvolumes</code><span class="sig-paren">(</span><em class="sig-param">sc_name</em>, <em class="sig-param">toolbox_pod</em>, <em class="sig-param">fs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.available_subvolumes" title="Permalink to this definition">¶</a></dt>
<dd><p>To fetch available subvolumes for cephfs or rbd</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sc_name</strong> (<em>str</em>) – storage class</p></li>
<li><p><strong>toolbox_pod</strong> (<em>str</em>) – ceph tool box pod</p></li>
<li><p><strong>fs</strong> (<em>str</em>) – file system</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>subvolumes available for rbd or cephfs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.check_setmetadata_availability">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">check_setmetadata_availability</code><span class="sig-paren">(</span><em class="sig-param">pod_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.check_setmetadata_availability" title="Permalink to this definition">¶</a></dt>
<dd><p>Check setmetadata parameter is available or not for cephfs and rbd plugin pods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pod_obj</strong> (<em>obj</em>) – pod object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.created_subvolume">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">created_subvolume</code><span class="sig-paren">(</span><em class="sig-param">available_subvolumes</em>, <em class="sig-param">updated_subvolumes</em>, <em class="sig-param">sc_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.created_subvolume" title="Permalink to this definition">¶</a></dt>
<dd><p>To fetch created subvolume for cephfs or rbd</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>available_subvolumes</strong> (<em>list</em>) – List of available subvolumes</p></li>
<li><p><strong>updated_subvolumes</strong> (<em>list</em>) – Updated list of subvolumes</p></li>
<li><p><strong>sc_name</strong> (<em>str</em>) – storage class</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name of subvolume created</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.disable_metadata">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">disable_metadata</code><span class="sig-paren">(</span><em class="sig-param">config_map_obj</em>, <em class="sig-param">pod_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.disable_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable CSI_ENABLE_METADATA</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_map_obj</strong> (<em>obj</em>) – configmap object</p></li>
<li><p><strong>pod_obj</strong> (<em>obj</em>) – pod object</p></li>
</ul>
</dd>
</dl>
<p>Steps:
1:- Disable CSI_ENABLE_METADATA flag via patch request
2:- Check csi-cephfsplugin provisioner and csi-rbdplugin-provisioner
pods are up and running
3:- Check ‘setmatadata’ is not set for csi-cephfsplugin-provisioner
and csi-rbdplugin-provisioner pods</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.enable_metadata">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">enable_metadata</code><span class="sig-paren">(</span><em class="sig-param">config_map_obj</em>, <em class="sig-param">pod_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.enable_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable CSI_ENABLE_METADATA</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_map_obj</strong> (<em>obj</em>) – configmap object</p></li>
<li><p><strong>pod_obj</strong> (<em>obj</em>) – pod object</p></li>
</ul>
</dd>
</dl>
<p>Steps:
1:- Enable CSI_ENABLE_METADATA flag via patch request
2:- Check csi-cephfsplugin provisioner and csi-rbdplugin-provisioner
pods are up and running
3:- Check ‘setmatadata’ is set for csi-cephfsplugin-provisioner
and csi-rbdplugin-provisioner pods</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cluster name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.fetch_metadata">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">fetch_metadata</code><span class="sig-paren">(</span><em class="sig-param">sc_name</em>, <em class="sig-param">fs</em>, <em class="sig-param">toolbox_pod</em>, <em class="sig-param">created_subvol</em>, <em class="sig-param">snapshot=False</em>, <em class="sig-param">available_subvolumes=None</em>, <em class="sig-param">updated_subvolumes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.fetch_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>To fetch metadata details created for cephfs or rbd</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sc_name</strong> (<em>str</em>) – storage class</p></li>
<li><p><strong>toolbox_pod</strong> (<em>str</em>) – ceph tool box pod</p></li>
<li><p><strong>fs</strong> (<em>str</em>) – file system</p></li>
<li><p><strong>created_subvol</strong> (<em>str</em>) – Created sub volume</p></li>
<li><p><strong>snapshot</strong> (<em>bool</em>) – snapshot or not</p></li>
<li><p><strong>available_subvolumes</strong> (<em>list</em>) – List of available subvolumes</p></li>
<li><p><strong>updated_subvolumes</strong> (<em>list</em>) – Updated list of subvolumes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>metadata details</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>json</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.metadata_utils.validate_metadata">
<code class="sig-prename descclassname">ocs_ci.utility.metadata_utils.</code><code class="sig-name descname">validate_metadata</code><span class="sig-paren">(</span><em class="sig-param">metadata</em>, <em class="sig-param">clustername</em>, <em class="sig-param">pv_name=None</em>, <em class="sig-param">pvc_name=None</em>, <em class="sig-param">namespace=None</em>, <em class="sig-param">volumesnapshot_name=None</em>, <em class="sig-param">volumesnapshot_content=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.metadata_utils.validate_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>To validate the metadata details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metadata</strong> (<em>json</em>) – metadata details</p></li>
<li><p><strong>clustername</strong> (<em>str</em>) – cluster name</p></li>
<li><p><strong>pv_name</strong> (<em>str</em>) – name of the pv</p></li>
<li><p><strong>pvc_name</strong> (<em>str</em>) – name of the pvc</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – namespace</p></li>
<li><p><strong>volumesnapshot_name</strong> (<em>str</em>) – name of the volumesnapshot</p></li>
<li><p><strong>volumesnapshot_content</strong> (<em>str</em>) – volumesnapshot content</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.mirror_openshift">
<span id="ocs-ci-utility-mirror-openshift-module"></span><h2>ocs_ci.utility.mirror_openshift module<a class="headerlink" href="#module-ocs_ci.utility.mirror_openshift" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.mirror_openshift.prepare_mirror_openshift_credential_files">
<code class="sig-prename descclassname">ocs_ci.utility.mirror_openshift.</code><code class="sig-name descname">prepare_mirror_openshift_credential_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.mirror_openshift.prepare_mirror_openshift_credential_files" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is a context manager.</p>
<dl class="simple">
<dt>Prepare local files containing username and password for mirror.openshift.com:</dt><dd><p>data/mirror_openshift_user,
data/mirror_openshift_password.</p>
</dd>
</dl>
<p>Those files are used as variable files for repo files (stored in /etc/yum/vars/
on the target RHEL nodes or pods).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple containing two strings - file names for username file and password file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(tuple)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ConfigurationError" title="ocs_ci.ocs.exceptions.ConfigurationError"><strong>ConfigurationError</strong></a> – if mirror_openshift credentials are not provided in auth.yaml file</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.monitoring_tool">
<span id="ocs-ci-utility-monitoring-tool-module"></span><h2>ocs_ci.utility.monitoring_tool module<a class="headerlink" href="#module-ocs_ci.utility.monitoring_tool" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.monitoring_tool.check_go_version">
<code class="sig-prename descclassname">ocs_ci.utility.monitoring_tool.</code><code class="sig-name descname">check_go_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.monitoring_tool.check_go_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check installed ‘go’ version</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.monitoring_tool.comparetool_deviation_check">
<code class="sig-prename descclassname">ocs_ci.utility.monitoring_tool.</code><code class="sig-name descname">comparetool_deviation_check</code><span class="sig-paren">(</span><em class="sig-param">first_file</em>, <em class="sig-param">second_file</em>, <em class="sig-param">deviation_list</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.monitoring_tool.comparetool_deviation_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to run ‘comparetool’ and verify deviation_list accordingly to comparetool output</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>first_file</strong> (<em>Path</em>) – path to the file, standing first in comparetool args to compare</p></li>
<li><p><strong>second_file</strong> (<em>Path</em>) – path to the file, standing second in comparetool args to compare</p></li>
<li><p><strong>deviation_list</strong> (<em>list</em>) – list of deviation strings expected to be in comparetool output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.monitoring_tool.convert_yaml_file_to_json_file">
<code class="sig-prename descclassname">ocs_ci.utility.monitoring_tool.</code><code class="sig-name descname">convert_yaml_file_to_json_file</code><span class="sig-paren">(</span><em class="sig-param">file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.monitoring_tool.convert_yaml_file_to_json_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Util to convert yaml file to json file and replace an ext of the files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>Path</em>) – path to the file to convert</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to the new file, yaml converted to json</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Path</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.nfs_utils">
<span id="ocs-ci-utility-nfs-utils-module"></span><h2>ocs_ci.utility.nfs_utils module<a class="headerlink" href="#module-ocs_ci.utility.nfs_utils" title="Permalink to this headline">¶</a></h2>
<p>Module that contains all operations related to nfs feature in a cluster</p>
<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.create_nfs_load_balancer_service">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">create_nfs_load_balancer_service</code><span class="sig-paren">(</span><em class="sig-param">storage_cluster_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.create_nfs_load_balancer_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the nfs loadbalancer service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storage_cluster_obj</strong> (<em>obj</em>) – storage cluster object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.delete_nfs_load_balancer_service">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">delete_nfs_load_balancer_service</code><span class="sig-paren">(</span><em class="sig-param">storage_cluster_obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.delete_nfs_load_balancer_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the nfs loadbalancer service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>storage_cluster_obj</strong> (<em>obj</em>) – storage cluster object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.nfs_disable">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">nfs_disable</code><span class="sig-paren">(</span><em class="sig-param">storage_cluster_obj</em>, <em class="sig-param">config_map_obj</em>, <em class="sig-param">pod_obj</em>, <em class="sig-param">sc</em>, <em class="sig-param">nfs_ganesha_pod_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.nfs_disable" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable nfs feature and ROOK_CSI_ENABLE_NFS
Steps:
1:- Disable nfs feature for storage-cluster
2:- Disable ROOK_CSI_ENABLE_NFS via patch request
3:- Delete CephNFS, ocs nfs Service and the nfs StorageClass
4:- Wait untill nfs-ganesha pod deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage_cluster_obj</strong> (<em>obj</em>) – storage cluster object</p></li>
<li><p><strong>config_map_obj</strong> (<em>obj</em>) – config map object</p></li>
<li><p><strong>pod_obj</strong> (<em>obj</em>) – pod object</p></li>
<li><p><strong>sc</strong> (<em>str</em>) – nfs storage class</p></li>
<li><p><strong>nfs_ganesha_pod_name</strong> (<em>str</em>) – rook-ceph-nfs * pod name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.nfs_enable">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">nfs_enable</code><span class="sig-paren">(</span><em class="sig-param">storage_cluster_obj</em>, <em class="sig-param">config_map_obj</em>, <em class="sig-param">pod_obj</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.nfs_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable nfs feature and ROOK_CSI_ENABLE_NFS
Steps:
1:- Enable nfs feature for storage-cluster
2:- Enable ROOK_CSI_ENABLE_NFS via patch request
3:- Check nfs-ganesha server is up and running
4:- Check csi-nfsplugin pods are up and running</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage_cluster_obj</strong> (<em>obj</em>) – storage cluster object</p></li>
<li><p><strong>config_map_obj</strong> (<em>obj</em>) – config map object</p></li>
<li><p><strong>pod_obj</strong> (<em>obj</em>) – pod object</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – namespace name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nfs-ganesha pod name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.skip_test_if_nfs_client_unavailable">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">skip_test_if_nfs_client_unavailable</code><span class="sig-paren">(</span><em class="sig-param">nfs_client_ip</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.skip_test_if_nfs_client_unavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip the tests if a valid nfs client ip is not
available for outside mounts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nfs_client_ip</strong> (<em>str</em>) – nfs client ip address</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.nfs_utils.unmount">
<code class="sig-prename descclassname">ocs_ci.utility.nfs_utils.</code><code class="sig-name descname">unmount</code><span class="sig-paren">(</span><em class="sig-param">con</em>, <em class="sig-param">test_folder</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.nfs_utils.unmount" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmount existing mount points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>con</strong> (<em>obj</em>) – connection object</p></li>
<li><p><strong>test_folder</strong> (<em>str</em>) – Mount path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.ocp_upgrade">
<span id="ocs-ci-utility-ocp-upgrade-module"></span><h2>ocs_ci.utility.ocp_upgrade module<a class="headerlink" href="#module-ocs_ci.utility.ocp_upgrade" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.ocp_upgrade.pause_machinehealthcheck">
<code class="sig-prename descclassname">ocs_ci.utility.ocp_upgrade.</code><code class="sig-name descname">pause_machinehealthcheck</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ocp_upgrade.pause_machinehealthcheck" title="Permalink to this definition">¶</a></dt>
<dd><p>During the upgrade process, nodes in the cluster might become temporarily
unavailable. In the case of worker nodes, the machine health check might
identify such nodes as unhealthy and reboot them. To avoid rebooting such
nodes, pause all the MachineHealthCheck resources before updating the
cluster.
This step is based on OCP documentation for OCP 4.9 and above.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ocp_upgrade.resume_machinehealthcheck">
<code class="sig-prename descclassname">ocs_ci.utility.ocp_upgrade.</code><code class="sig-name descname">resume_machinehealthcheck</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ocp_upgrade.resume_machinehealthcheck" title="Permalink to this definition">¶</a></dt>
<dd><p>Resume the machine health checks after updating the cluster. To resume the
check, remove the pause annotation from the MachineHealthCheck resource.</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.ocs_build">
<span id="ocs-ci-utility-ocs-build-module"></span><h2>ocs_ci.utility.ocs_build module<a class="headerlink" href="#module-ocs_ci.utility.ocs_build" title="Permalink to this headline">¶</a></h2>
<p>This module is used to return latest OCS internal build for specified OCS
version.</p>
<dl class="function">
<dt id="ocs_ci.utility.ocs_build.init_arg_parser">
<code class="sig-prename descclassname">ocs_ci.utility.ocs_build.</code><code class="sig-name descname">init_arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ocs_build.init_arg_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Init argument parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Parsed arguments</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ocs_build.main">
<code class="sig-prename descclassname">ocs_ci.utility.ocs_build.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ocs_build.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.openshift_console">
<span id="ocs-ci-utility-openshift-console-module"></span><h2>ocs_ci.utility.openshift_console module<a class="headerlink" href="#module-ocs_ci.utility.openshift_console" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.openshift_console.OpenshiftConsole">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.openshift_console.</code><code class="sig-name descname">OpenshiftConsole</code><span class="sig-paren">(</span><em class="sig-param">browser='chrome'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_console.OpenshiftConsole" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="ocs_ci.utility.openshift_console.OpenshiftConsole.run_openshift_console">
<code class="sig-name descname">run_openshift_console</code><span class="sig-paren">(</span><em class="sig-param">suite</em>, <em class="sig-param">env_vars=None</em>, <em class="sig-param">timeout=1500</em>, <em class="sig-param">log_suffix=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_console.OpenshiftConsole.run_openshift_console" title="Permalink to this definition">¶</a></dt>
<dd><p>Run openshift console suite</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suite</strong> (<em>str</em>) – openshift console suite to execute</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em>) – env variables to expose for openshift console</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – timeout for test-gui.sh script</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.OpenshiftConsoleSuiteNotDefined" title="ocs_ci.ocs.exceptions.OpenshiftConsoleSuiteNotDefined"><strong>OpenshiftConsoleSuiteNotDefined</strong></a> – if suite is not defined</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.openshift_console.OpenshiftConsole.setup_console_prereq">
<code class="sig-name descname">setup_console_prereq</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_console.OpenshiftConsole.setup_console_prereq" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup openshift console prerequisites</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnsupportedBrowser" title="ocs_ci.ocs.exceptions.UnsupportedBrowser"><strong>UnsupportedBrowser</strong></a> – in case the browser is not supported</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.openshift_dedicated">
<span id="ocs-ci-utility-openshift-dedicated-module"></span><h2>ocs_ci.utility.openshift_dedicated module<a class="headerlink" href="#module-ocs_ci.utility.openshift_dedicated" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with Openshift Dedciated Cluster.</p>
<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.create_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">create_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.create_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OCP cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.destroy_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">destroy_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.destroy_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the cluster on Openshift Dedicated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name or ID.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.download_ocm_cli">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">download_ocm_cli</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.download_ocm_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to download OCM cli</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>path to the installer</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.get_cluster_details">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">get_cluster_details</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.get_cluster_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the cluster which is taken from the OCM command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.get_credentials">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">get_credentials</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.get_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Get json with cluster credentials</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cluster credentials</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>json</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.get_kubeadmin_password">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">get_kubeadmin_password</code><span class="sig-paren">(</span><em class="sig-param">cluster</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.get_kubeadmin_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Export password for kubeadmin to provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Path where to create kubeadmin-password file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.get_kubeconfig">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">get_kubeconfig</code><span class="sig-paren">(</span><em class="sig-param">cluster</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.get_kubeconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Export kubeconfig to provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Path where to create kubeconfig file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.list_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">list_cluster</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.list_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the openshift dedciated clusters which is taken from the OCM command.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.openshift_dedicated.login">
<code class="sig-prename descclassname">ocs_ci.utility.openshift_dedicated.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.openshift_dedicated.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Login to OCM client</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.pagerduty">
<span id="ocs-ci-utility-pagerduty-module"></span><h2>ocs_ci.utility.pagerduty module<a class="headerlink" href="#module-ocs_ci.utility.pagerduty" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.pagerduty.</code><code class="sig-name descname">PagerDutyAPI</code><span class="sig-paren">(</span><em class="sig-param">token=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is wrapper class for PagerDuty API:
<a class="reference external" href="https://developer.pagerduty.com/api-reference/">https://developer.pagerduty.com/api-reference/</a></p>
<p>In order to use the API, there must be set api_key. That is taken from
AUTH/pagerduty/api_key in config.</p>
<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.check_incident_cleared">
<code class="sig-name descname">check_incident_cleared</code><span class="sig-paren">(</span><em class="sig-param">summary</em>, <em class="sig-param">measure_end_time</em>, <em class="sig-param">time_min=420</em>, <em class="sig-param">pagerduty_service_ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.check_incident_cleared" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that all incidents with provided summary are cleared.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary</strong> (<em>str</em>) – Incident summary</p></li>
<li><p><strong>measure_end_time</strong> (<em>int</em>) – Timestamp of measurement end</p></li>
<li><p><strong>time_min</strong> (<em>int</em>) – Number of seconds to wait for incidents to be cleared
since measurement end</p></li>
<li><p><strong>pagerduty_service_ids</strong> (<em>list</em>) – service ids used in incidents get query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.create">
<code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">payload=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Post resources from PagerDuty API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – Represents part of uri that specifies given
resource</p></li>
<li><p><strong>payload</strong> (<em>dict</em>) – Provide parameters to POST API call.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from PagerDuty api</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">resource</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete resource from PagerDuty API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>str</em>) – Represents part of uri that specifies given
resource</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from PagerDuty api</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">payload=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get resources from PagerDuty API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – Represents part of uri that specifies given
resource</p></li>
<li><p><strong>payload</strong> (<em>dict</em>) – Provide parameters to GET API call.
e.g. for <cite>incidents</cite> resource this can be
{“service_ids[]”: &lt;id&gt;, “since”: “2021-07-15T00:00:00Z”, “time_zone”: “UTC”}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from PagerDuty api</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.get_escalation_policy_id">
<code class="sig-name descname">get_escalation_policy_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.get_escalation_policy_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get account escalation policy from PagerDuty API by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Escalation policy id</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.get_integration_dict">
<code class="sig-name descname">get_integration_dict</code><span class="sig-paren">(</span><em class="sig-param">vendor_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.get_integration_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a structure prepared to be a payload for integration creation via API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vendor_name</strong> (<em>str</em>) – Name of vendor that is used in integration</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Structure containing all data required to by PagerDuty API</dt><dd><p>in order to create an integration</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.get_service_dict">
<code class="sig-name descname">get_service_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.get_service_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a structure prepared to be a payload for service creation via API.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Structure containing all data required to by PagerDuty API</dt><dd><p>in order to create a service</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.get_vendor_id">
<code class="sig-name descname">get_vendor_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.get_vendor_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get id of vendor with provided name from PagerDuty API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Vendor name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vendor id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.pagerduty.PagerDutyAPI.wait_for_incident_cleared">
<code class="sig-name descname">wait_for_incident_cleared</code><span class="sig-paren">(</span><em class="sig-param">summary</em>, <em class="sig-param">timeout=1200</em>, <em class="sig-param">sleep=5</em>, <em class="sig-param">pagerduty_service_ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.PagerDutyAPI.wait_for_incident_cleared" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for incident to be cleared.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary</strong> (<em>str</em>) – Incident summary</p></li>
<li><p><strong>sleep</strong> (<em>int</em>) – Number of seconds to sleep in between incidents search</p></li>
<li><p><strong>pagerduty_service_ids</strong> (<em>list</em>) – service ids used in incidents get query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of incident records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.pagerduty.check_incident_list">
<code class="sig-prename descclassname">ocs_ci.utility.pagerduty.</code><code class="sig-name descname">check_incident_list</code><span class="sig-paren">(</span><em class="sig-param">summary</em>, <em class="sig-param">urgency</em>, <em class="sig-param">incidents</em>, <em class="sig-param">status='triggered'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.check_incident_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Check list of incidents that there are incidents with requested label
in summary and specific urgency. If some incident is missing then this check
fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary</strong> (<em>str</em>) – String that is part of incident summary</p></li>
<li><p><strong>urgency</strong> (<em>str</em>) – Incident urgency</p></li>
<li><p><strong>incidents</strong> (<em>list</em>) – List of incidents to check</p></li>
<li><p><strong>status</strong> (<em>str</em>) – Incident status</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of incidents that match search requirements</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.pagerduty.set_pagerduty_faas_secret">
<code class="sig-prename descclassname">ocs_ci.utility.pagerduty.</code><code class="sig-name descname">set_pagerduty_faas_secret</code><span class="sig-paren">(</span><em class="sig-param">integration_key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.set_pagerduty_faas_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Update managed-fusion-agent-config secret. This is valid only on Fusion aaS platform.
managed-fusion-agent-config secret is expected to be present prior to the update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>integration_key</strong> (<em>str</em>) – Integration key taken from PagerDuty Prometheus integration</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.pagerduty.set_pagerduty_integration_secret">
<code class="sig-prename descclassname">ocs_ci.utility.pagerduty.</code><code class="sig-name descname">set_pagerduty_integration_secret</code><span class="sig-paren">(</span><em class="sig-param">integration_key</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.pagerduty.set_pagerduty_integration_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Update ocs-converged-pagerduty secret. This is valid only on ODF Managed Service.
ocs-converged-pagerduty secret is expected to be present prior to the update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>integration_key</strong> (<em>str</em>) – Integration key taken from PagerDuty Prometheus integration</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.powernodes">
<span id="ocs-ci-utility-powernodes-module"></span><h2>ocs_ci.utility.powernodes module<a class="headerlink" href="#module-ocs_ci.utility.powernodes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.powernodes.PowerNodes">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.powernodes.</code><code class="sig-name descname">PowerNodes</code><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for PowerNodes</p>
<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.iskvm">
<code class="sig-name descname">iskvm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.iskvm" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if this environment is libvirt or kvm.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if this is kvm environment, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.restart_powernodes_machines">
<code class="sig-name descname">restart_powernodes_machines</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout</em>, <em class="sig-param">wait</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.restart_powernodes_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart PowerNode Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – PowerNode objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state,
and ‘ready’ state.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True if need to wait till the restarted node reaches timeout</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for PowerNode ungraceful power off, False for
graceful PowerNode shutdown - for future use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.restart_powernodes_machines_powervs">
<code class="sig-name descname">restart_powernodes_machines_powervs</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout</em>, <em class="sig-param">wait</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.restart_powernodes_machines_powervs" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart PowerNode Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – PowerNode objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state,
and ‘ready’ state.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True if need to wait till the restarted node reaches timeout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.start_powernodes_machines">
<code class="sig-name descname">start_powernodes_machines</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">wait=True</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.start_powernodes_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Start PowerNode Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – List of PowerNode machines</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state,
and ‘ready’ state.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for PowerNodes to start - for future use</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for PowerNode ungraceful power off, False for
graceful PowerNode shutdown - for future use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.start_powernodes_machines_powervs">
<code class="sig-name descname">start_powernodes_machines_powervs</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.start_powernodes_machines_powervs" title="Permalink to this definition">¶</a></dt>
<dd><p>Start PowerNode Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – List of PowerNode machines</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state,
and ‘ready’ state.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for PowerNodes to start - for future use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.stop_powernodes_machines">
<code class="sig-name descname">stop_powernodes_machines</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">wait=True</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.stop_powernodes_machines" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop PowerNode Machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – PowerNode objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True if need to wait till the restarted node reaches timeout
- for future use</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for PowerNode ungraceful power off, False for
graceful PowerNode shutdown - for future use</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – If PowerNode machine is still up</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.stop_powernodes_machines_powervs">
<code class="sig-name descname">stop_powernodes_machines_powervs</code><span class="sig-paren">(</span><em class="sig-param">powernode_machines</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.stop_powernodes_machines_powervs" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop PowerNode Machines - PowerVS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>powernode_machines</strong> (<em>list</em>) – PowerNodes objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for node to reach ‘not ready’ state</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – True if need to wait till the restarted node reaches timeout
- for future use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.powernodes.PowerNodes.verify_machine_is_down">
<code class="sig-name descname">verify_machine_is_down</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.powernodes.PowerNodes.verify_machine_is_down" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if PowerNode is completely powered off</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>object</em>) – Node objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if machine is down, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.prometheus">
<span id="ocs-ci-utility-prometheus-module"></span><h2>ocs_ci.utility.prometheus module<a class="headerlink" href="#module-ocs_ci.utility.prometheus" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">PrometheusAPI</code><span class="sig-paren">(</span><em class="sig-param">user=None</em>, <em class="sig-param">password=None</em>, <em class="sig-param">threading_lock=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is wrapper class for Prometheus API.</p>
<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.check_alert_cleared">
<code class="sig-name descname">check_alert_cleared</code><span class="sig-paren">(</span><em class="sig-param">label</em>, <em class="sig-param">measure_end_time</em>, <em class="sig-param">time_min=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.check_alert_cleared" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that all alerts with provided label are cleared.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<em>str</em>) – Alerts label</p></li>
<li><p><strong>measure_end_time</strong> (<em>int</em>) – Timestamp of measurement end</p></li>
<li><p><strong>time_min</strong> (<em>int</em>) – Number of seconds to wait for alert to be cleared
since measurement end</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.generate_cert">
<code class="sig-name descname">generate_cert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.generate_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate CA certificate from kubeconfig for API.</p>
<p>TODO: find proper way how to generate/load cert files.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">resource</em>, <em class="sig-param">payload=None</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get alerts from Prometheus API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>str</em>) – Represents part of uri that specifies given
resource</p></li>
<li><p><strong>payload</strong> (<em>dict</em>) – Provide parameters to GET API call.
e.g. for <cite>alerts</cite> resource this can be
{‘silenced’: False, ‘inhibited’: False}</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Number of seconds to wait for Prometheus endpoint to
get available if it is not available</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from Prometheus alerts api</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">timestamp=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">validate=True</em>, <em class="sig-param">mute_logs=False</em>, <em class="sig-param">log_debug=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Prometheus <a class="reference external" href="https://prometheus.io/docs/prometheus/latest/querying/api/#instant-queries">instant query</a>. This is a simple wrapper over
<code class="docutils literal notranslate"><span class="pre">get()</span></code> method with plumbing code for instant queries, additional
validation and logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Prometheus expression query string.</p></li>
<li><p><strong>timestamp</strong> (<em>str</em>) – Evaluation timestamp (rfc3339 or unix timestamp).
Optional.</p></li>
<li><p><strong>timeout</strong> (<em>str</em>) – Evaluation timeout in duration format. Optional.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) – Perform basic validation on the response.
Optional, <code class="docutils literal notranslate"><span class="pre">True</span></code> is the default. Use <code class="docutils literal notranslate"><span class="pre">False</span></code> when you
expect query to fail eg. during negative testing.</p></li>
<li><p><strong>mute_logs</strong> (<em>bool</em>) – True for muting the logs, False otherwise</p></li>
<li><p><strong>log_debug</strong> (<em>bool</em>) – True for logging in debug, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Result of the query (value(s) for a single timestamp)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.query_range">
<code class="sig-name descname">query_range</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em>, <em class="sig-param">step</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">validate=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.query_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Prometheus <a class="reference external" href="https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries">range query</a>. This is a simple wrapper over
<code class="docutils literal notranslate"><span class="pre">get()</span></code> method with plumbing code for range queries, additional
validation and logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Prometheus expression query string.</p></li>
<li><p><strong>start</strong> (<em>str</em>) – start timestamp (rfc3339 or unix timestamp)</p></li>
<li><p><strong>end</strong> (<em>str</em>) – end timestamp (rfc3339 or unix timestamp)</p></li>
<li><p><strong>step</strong> (<em>float</em>) – Query resolution step width as float number of
seconds.</p></li>
<li><p><strong>timeout</strong> (<em>str</em>) – Evaluation timeout in duration format. Optional.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) – Perform basic validation on the response.
Optional, <code class="docutils literal notranslate"><span class="pre">True</span></code> is the default. Use <code class="docutils literal notranslate"><span class="pre">False</span></code> when you
expect query to fail eg. during negative testing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>result of the query</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.refresh_connection">
<code class="sig-name descname">refresh_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.refresh_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Login into OCP, refresh endpoint and token.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.prometheus.PrometheusAPI.wait_for_alert">
<code class="sig-name descname">wait_for_alert</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">state=None</em>, <em class="sig-param">timeout=1200</em>, <em class="sig-param">sleep=5</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.PrometheusAPI.wait_for_alert" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for alerts that have requested name and state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Alert name</p></li>
<li><p><strong>state</strong> (<em>str</em>) – Alert state, if provided then there are searched
alerts with provided state. If not provided then alerts are
searched for absence of the alert. Loop that looks for alerts
is broken when there are no alerts returned from API. This
is done because API is not returning any alerts that are not
in pending or firing state</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Number of seconds for how long the alert should
be searched</p></li>
<li><p><strong>sleep</strong> (<em>int</em>) – Number of seconds to sleep in between alert search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of alert records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.check_alert_list">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">check_alert_list</code><span class="sig-paren">(</span><em class="sig-param">label</em>, <em class="sig-param">msg</em>, <em class="sig-param">alerts</em>, <em class="sig-param">states</em>, <em class="sig-param">severity='warning'</em>, <em class="sig-param">ignore_more_occurences=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.check_alert_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Check list of alerts that there are alerts with requested label and
message for each provided state. If some alert is missing then this check
fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<em>str</em>) – Alert label</p></li>
<li><p><strong>msg</strong> (<em>str</em>) – Alert message</p></li>
<li><p><strong>alerts</strong> (<em>list</em>) – List of alerts to check</p></li>
<li><p><strong>states</strong> (<em>list</em>) – List of states to check, order is important</p></li>
<li><p><strong>ignore_more_occurences</strong> (<em>bool</em>) – If true then there is checkced only
occurence of alert with requested label, message and state but
it is not checked if there is more of occurences than one.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.check_query_range_result_enum">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">check_query_range_result_enum</code><span class="sig-paren">(</span><em class="sig-param">result</em>, <em class="sig-param">good_values</em>, <em class="sig-param">bad_values=()</em>, <em class="sig-param">exp_metric_num=None</em>, <em class="sig-param">exp_delay=None</em>, <em class="sig-param">exp_good_time=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.check_query_range_result_enum" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that result of range query matches given expectations. Useful
for metrics which convey status (eg. ceph health, ceph_osd_up), so that
you can assume that during a given period, it’s value should match
given single (or tuple of) value(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<em>list</em>) – Data from <code class="docutils literal notranslate"><span class="pre">query_range()</span></code> method.</p></li>
<li><p><strong>good_values</strong> (<em>tuple</em>) – Tuple of values considered good</p></li>
<li><p><strong>bad_values</strong> (<em>tuple</em>) – Tuple of values considered bad, indicating a
problem (optional, use if you need to distinguish bad and
invalid values)</p></li>
<li><p><strong>exp_metric_num</strong> (<em>int</em>) – expected number of data series in the result,
optional (eg. for <code class="docutils literal notranslate"><span class="pre">ceph_health_status</span></code> this would be 1, but
for something like <code class="docutils literal notranslate"><span class="pre">ceph_osd_up</span></code> this will be a number of
OSDs in the cluster)</p></li>
<li><p><strong>exp_delay</strong> (<em>int</em>) – Number of seconds from the start of the query
time range for which we should tolerate bad values. This is
useful if you change cluster state and processing of this
change is expected to take some time.</p></li>
<li><p><strong>exp_good_time</strong> (<em>int</em>) – Number of seconds during which we should see
good values in the metrics data. When this time passess values
can go bad (but can’t be invalid). If not specified, good values
should be presend during the whole time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if result matches given expectations, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.check_query_range_result_limits">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">check_query_range_result_limits</code><span class="sig-paren">(</span><em class="sig-param">result</em>, <em class="sig-param">good_min</em>, <em class="sig-param">good_max</em>, <em class="sig-param">exp_metric_num=None</em>, <em class="sig-param">exp_delay=None</em>, <em class="sig-param">exp_good_time=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.check_query_range_result_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that result of range query matches given expectations. Useful
for metrics which convey continuous value, eg. storage or cpu utilization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<em>list</em>) – Data from <code class="docutils literal notranslate"><span class="pre">query_range()</span></code> method.</p></li>
<li><p><strong>good_min</strong> (<em>float</em>) – Min. value which is considered good.</p></li>
<li><p><strong>good_max</strong> (<em>float</em>) – Max. value which is still considered as good.</p></li>
<li><p><strong>exp_metric_num</strong> (<em>int</em>) – expected number of data series in the result,
optional (eg. for <code class="docutils literal notranslate"><span class="pre">ceph_health_status</span></code> this would be 1, but
for something like <code class="docutils literal notranslate"><span class="pre">ceph_osd_up</span></code> this will be a number of
OSDs in the cluster)</p></li>
<li><p><strong>exp_delay</strong> (<em>int</em>) – Number of seconds from the start of the query
time range for which we should tolerate bad values. This is
useful if you change cluster state and processing of this
change is expected to take some time.</p></li>
<li><p><strong>exp_good_time</strong> (<em>int</em>) – Number of seconds during which we should see
good values in the metrics data. When this time passess values
can go bad (but can’t be invalid). If not specified, good values
should be presend during the whole time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if result matches given expectations, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.check_query_range_result_viafunction">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">check_query_range_result_viafunction</code><span class="sig-paren">(</span><em class="sig-param">result</em>, <em class="sig-param">is_value_good</em>, <em class="sig-param">is_value_bad=&lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">exp_metric_num=None</em>, <em class="sig-param">exp_delay=None</em>, <em class="sig-param">exp_good_time=None</em>, <em class="sig-param">is_float=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.check_query_range_result_viafunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that result of range query matches expectations expressed via
<code class="docutils literal notranslate"><span class="pre">is_value_good</span></code> (and optionally <code class="docutils literal notranslate"><span class="pre">is_value_bad</span></code>) functions, which takes
a value and returns True if the value is good (or bad).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<em>list</em>) – Data from <code class="docutils literal notranslate"><span class="pre">query_range()</span></code> method.</p></li>
<li><p><strong>is_value_good</strong> (<em>function</em>) – returns True for a good value</p></li>
<li><p><strong>is_value_bad</strong> (<em>function</em>) – returns True for a bad balue, indicating a
problem (optional, use if you need to distinguish bad and invalid
values)</p></li>
<li><p><strong>exp_metric_num</strong> (<em>int</em>) – expected number of data series in the result,
optional (eg. for <code class="docutils literal notranslate"><span class="pre">ceph_health_status</span></code> this would be 1, but
for something like <code class="docutils literal notranslate"><span class="pre">ceph_osd_up</span></code> this will be a number of
OSDs in the cluster)</p></li>
<li><p><strong>exp_delay</strong> (<em>int</em>) – Number of seconds from the start of the query
time range for which we should tolerate bad values. This is
useful if you change cluster state and processing of this
change is expected to take some time.</p></li>
<li><p><strong>exp_good_time</strong> (<em>int</em>) – Number of seconds during which we should see
good values in the metrics data. When this time passess values
can go bad (but can’t be invalid). If not specified, good values
should be presend during the whole time.</p></li>
<li><p><strong>is_float</strong> (<em>bool</em>) – assume that the value is float, otherwise assume int</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if result matches given expectations, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.log_parsing_error">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">log_parsing_error</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">resp_content</em>, <em class="sig-param">ex</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.log_parsing_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an error raised during parsing of a prometheus query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>dict</em>) – Full specification of a prometheus query.</p></li>
<li><p><strong>resp_content</strong> (<em>bytes</em>) – Response from prometheus</p></li>
<li><p><strong>ex</strong> (<em>Exception</em>) – Exception raised during parsing of prometheus reply.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.prometheus.validate_status">
<code class="sig-prename descclassname">ocs_ci.utility.prometheus.</code><code class="sig-name descname">validate_status</code><span class="sig-paren">(</span><em class="sig-param">content</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.prometheus.validate_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate content data from Prometheus. If this fails, Prometheus instance
or a query is so broken that test can’t be performed. We assume that
Prometheus reports “success” even for queries which returns nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>content</strong> (<em>dict</em>) – data from Prometheus</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – when content is not a dict</p></li>
<li><p><strong>ValueError</strong> – when status of the content is not success</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.proxy">
<span id="ocs-ci-utility-proxy-module"></span><h2>ocs_ci.utility.proxy module<a class="headerlink" href="#module-ocs_ci.utility.proxy" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.proxy.update_kubeconfig_with_proxy_url_for_client">
<code class="sig-prename descclassname">ocs_ci.utility.proxy.</code><code class="sig-name descname">update_kubeconfig_with_proxy_url_for_client</code><span class="sig-paren">(</span><em class="sig-param">kubeconfig</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.proxy.update_kubeconfig_with_proxy_url_for_client" title="Permalink to this definition">¶</a></dt>
<dd><p>If it is a proxy environment and client_http_proxy is defined, update
each cluster configuration in kubeconfig with proxy-url parameter to
redirect client access through proxy server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kubeconfig</strong> (<em>str</em>) – path to kubeconfig file</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.psiutils">
<span id="ocs-ci-utility-psiutils-module"></span><h2>ocs_ci.utility.psiutils module<a class="headerlink" href="#module-ocs_ci.utility.psiutils" title="Permalink to this headline">¶</a></h2>
<p>A module for all PSI-openstack related utilities</p>
<dl class="class">
<dt id="ocs_ci.utility.psiutils.PSIUtils">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.psiutils.</code><code class="sig-name descname">PSIUtils</code><span class="sig-paren">(</span><em class="sig-param">psi_conf</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for handling PSI functionalities</p>
<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.attach_volume">
<code class="sig-name descname">attach_volume</code><span class="sig-paren">(</span><em class="sig-param">vol</em>, <em class="sig-param">instance_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.attach_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach the given volume to the specific PSI openstack instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vol</strong> (<em>Volume</em>) – cinder volume object</p></li>
<li><p><strong>instance_id</strong> (<em>str</em>) – uuid of the instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.check_expected_vol_status">
<code class="sig-name descname">check_expected_vol_status</code><span class="sig-paren">(</span><em class="sig-param">vol</em>, <em class="sig-param">expected_state</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.check_expected_vol_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check status of the volume and return true if it matches
the expected state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vol</strong> (<em>cinderclient.volume</em>) – Volume object for which state needs
to be checked</p></li>
<li><p><strong>expected_state</strong> (<em>str</em>) – Expected state of the volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if state is same as expected else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.check_vol_deleted">
<code class="sig-name descname">check_vol_deleted</code><span class="sig-paren">(</span><em class="sig-param">vol</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.check_vol_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether its delete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vol</strong> (<em>cinderclient.Volume</em>) – volume object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if deleted else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.create_volume">
<code class="sig-name descname">create_volume</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">size=100</em>, <em class="sig-param">volume_type='tripleo'</em>, <em class="sig-param">metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.create_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to create openstack volumes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – display name of the volume</p></li>
<li><p><strong>size</strong> (<em>int</em>) – of the volume in GBs</p></li>
<li><p><strong>volume_type</strong> (<em>str</em>) – type of volume to be created</p></li>
<li><p><strong>metadata</strong> (<em>dict</em>) – Any {k,v} to be associated with volume</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cinderclient.Client.Volumes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Volume</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.detach_and_delete_vols">
<code class="sig-name descname">detach_and_delete_vols</code><span class="sig-paren">(</span><em class="sig-param">volumes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.detach_and_delete_vols" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach and delete volumes from the list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>volumes</strong> (<em>list</em>) – of Volume objects</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.get_instances_with_pattern">
<code class="sig-name descname">get_instances_with_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.get_instances_with_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get instances matching pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – Pattern for matching instance name
note: we are looking for only ‘name’ param for
pattern matching</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>novaclient.base.ListWithMeta</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.psiutils.PSIUtils.get_volumes_with_tag">
<code class="sig-name descname">get_volumes_with_tag</code><span class="sig-paren">(</span><em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.psiutils.PSIUtils.get_volumes_with_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Get PSI volumes having this tag (k,v)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> (<em>dict</em>) – of desired (k,v)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>of cinderclient.&lt;vers&gt;.volumes object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.reporting">
<span id="ocs-ci-utility-reporting-module"></span><h2>ocs_ci.utility.reporting module<a class="headerlink" href="#module-ocs_ci.utility.reporting" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.reporting.get_polarion_id">
<code class="sig-prename descclassname">ocs_ci.utility.reporting.</code><code class="sig-name descname">get_polarion_id</code><span class="sig-paren">(</span><em class="sig-param">upgrade=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.reporting.get_polarion_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the polarion_id of the deployment or upgrade</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>upgrade</strong> (<em>bool</em>) – get upgrade_id if true, else get deployment_id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>polarion_id of the deployment or upgrade</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.reporting.get_rp_launch_attributes">
<code class="sig-prename descclassname">ocs_ci.utility.reporting.</code><code class="sig-name descname">get_rp_launch_attributes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.reporting.get_rp_launch_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve information from the config to use as launch attributes in ReportPortal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ReportPortal launch attributes</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.reporting.get_rp_launch_description">
<code class="sig-prename descclassname">ocs_ci.utility.reporting.</code><code class="sig-name descname">get_rp_launch_description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.reporting.get_rp_launch_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct and return the ReportPortal launch description.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ReportPortal launch description</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.reporting.get_rp_launch_name">
<code class="sig-prename descclassname">ocs_ci.utility.reporting.</code><code class="sig-name descname">get_rp_launch_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.reporting.get_rp_launch_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct and return the ReportPortal launch name
:returns: ReportPortal launch name
:rtype: str</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.reporting.update_live_must_gather_image">
<code class="sig-prename descclassname">ocs_ci.utility.reporting.</code><code class="sig-name descname">update_live_must_gather_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.reporting.update_live_must_gather_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Update live must gather image in the config.</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.retry">
<span id="ocs-ci-utility-retry-module"></span><h2>ocs_ci.utility.retry module<a class="headerlink" href="#module-ocs_ci.utility.retry" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.retry.retry">
<code class="sig-prename descclassname">ocs_ci.utility.retry.</code><code class="sig-name descname">retry</code><span class="sig-paren">(</span><em class="sig-param">exception_to_check</em>, <em class="sig-param">tries=4</em>, <em class="sig-param">delay=3</em>, <em class="sig-param">backoff=2</em>, <em class="sig-param">text_in_exception=None</em>, <em class="sig-param">func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.retry.retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retry calling the decorated function using exponential backoff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exception_to_check</strong> – the exception to check. may be a tuple of exceptions to check</p></li>
<li><p><strong>tries</strong> – number of times to try (not retry) before giving up</p></li>
<li><p><strong>delay</strong> – initial delay between retries in seconds</p></li>
<li><p><strong>backoff</strong> – backoff multiplier e.g. value of 2 will double the delay each retry</p></li>
<li><p><strong>text_in_exception</strong> – Retry only when text_in_exception is in the text of exception</p></li>
<li><p><strong>func</strong> – function for garbage collector</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.rgwutils">
<span id="ocs-ci-utility-rgwutils-module"></span><h2>ocs_ci.utility.rgwutils module<a class="headerlink" href="#module-ocs_ci.utility.rgwutils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.rgwutils.get_rgw_count">
<code class="sig-prename descclassname">ocs_ci.utility.rgwutils.</code><code class="sig-name descname">get_rgw_count</code><span class="sig-paren">(</span><em class="sig-param">ocs_version</em>, <em class="sig-param">is_upgrade</em>, <em class="sig-param">version_before_upgrade</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rgwutils.get_rgw_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Get RGW Count</p>
<dl class="simple">
<dt>RGW Count is 2 if:</dt><dd><p>OCS 4.5 unless upgraded from a prior version
OCS 4.6</p>
</dd>
</dl>
<p>Otherwise, RGW Count is 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ocs_version</strong> (<em>str</em><em>, </em><em>float</em>) – OCS Version</p></li>
<li><p><strong>is_upgrade</strong> (<em>bool</em>) – If cluster was upgraded to current version</p></li>
<li><p><strong>version_before_upgrade</strong> (<em>str</em><em>, </em><em>float</em>) – OCS Version prior to upgrade</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>RGW Count</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.rhv">
<span id="ocs-ci-utility-rhv-module"></span><h2>ocs_ci.utility.rhv module<a class="headerlink" href="#module-ocs_ci.utility.rhv" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with RHV Cluster</p>
<dl class="class">
<dt id="ocs_ci.utility.rhv.RHV">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.rhv.</code><code class="sig-name descname">RHV</code><span class="sig-paren">(</span><em class="sig-param">url=None</em>, <em class="sig-param">username=None</em>, <em class="sig-param">password=None</em>, <em class="sig-param">insecure=True</em>, <em class="sig-param">ca_file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for  RHV</p>
<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.add_disk">
<code class="sig-name descname">add_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">size</em>, <em class="sig-param">disk_format='RAW'</em>, <em class="sig-param">disk_interface='VIRTIO_SCSI'</em>, <em class="sig-param">sparse=None</em>, <em class="sig-param">pass_discard=None</em>, <em class="sig-param">storage_domain_id=None</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.add_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches disk to VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>types.Vm</em>) – Vm instance</p></li>
<li><p><strong>size</strong> (<em>int</em>) – size of disk in GB</p></li>
<li><p><strong>disk_format</strong> (<em>str</em>) – underlying storage format of disks (default: “RAW”)</p></li>
<li><p><strong>disk_interface</strong> (<em>str</em>) – underlying storage interface of disks
communication with controller (default: ‘VIRTIO_SCSI’)</p></li>
<li><p><strong>sparse</strong> (<em>bool</em>) – disk allocation policy. True for sparse,
false for preallocated (default: None)</p></li>
<li><p><strong>pass_discard</strong> (<em>bool</em>) – True if the virtual machine passes discard
commands to the storage, False otherwise (default: None)</p></li>
<li><p><strong>storage_domain_id</strong> (<em>str</em>) – A unique identifier for the storage domain</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The timeout in seconds for disk status OK (default: 120)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.add_disks">
<code class="sig-name descname">add_disks</code><span class="sig-paren">(</span><em class="sig-param">num_disks</em>, <em class="sig-param">vm</em>, <em class="sig-param">size</em>, <em class="sig-param">disk_format='RAW'</em>, <em class="sig-param">disk_interface='VIRTIO_SCSI'</em>, <em class="sig-param">sparse=None</em>, <em class="sig-param">pass_discard=None</em>, <em class="sig-param">storage_domain_id=None</em>, <em class="sig-param">timeout=120</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.add_disks" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds multiple disks to the VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_disks</strong> – number of disks to add</p></li>
<li><p><strong>vm</strong> (<em>types.Vm</em>) – Vm instance</p></li>
<li><p><strong>size</strong> (<em>int</em>) – size of disk in GB</p></li>
<li><p><strong>disk_format</strong> (<em>str</em>) – underlying storage format of disks (default: “RAW”)</p></li>
<li><p><strong>disk_interface</strong> (<em>str</em>) – underlying storage interface of disks
communication with controller (default: ‘VIRTIO_SCSI’)</p></li>
<li><p><strong>sparse</strong> (<em>bool</em>) – disk allocation policy. True for sparse,
false for preallocated (default: None)</p></li>
<li><p><strong>pass_discard</strong> (<em>bool</em>) – True if the virtual machine passes discard
commands to the storage, False otherwise (default: None)</p></li>
<li><p><strong>storage_domain_id</strong> (<em>str</em>) – A unique identifier for the storage domain</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The timeout in seconds for disk status OK (default: 120)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.close_engine_connection">
<code class="sig-name descname">close_engine_connection</code><span class="sig-paren">(</span><em class="sig-param">connection</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.close_engine_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases the resources used by this connection.</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.create_engine_connection">
<code class="sig-name descname">create_engine_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.create_engine_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the connection to the engine server</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Connection to the engine server</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>connection</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.disks_service">
<em class="property">property </em><code class="sig-name descname">disks_service</code><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.disks_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the disks service</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.engine_connection">
<em class="property">property </em><code class="sig-name descname">engine_connection</code><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.engine_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the connection to the engine server</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Connection to the engine server</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>connection</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_compute_vms">
<code class="sig-name descname">get_compute_vms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_compute_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all compute VM’s</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of compute Vm instances</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_disk_attachment_service">
<code class="sig-name descname">get_disk_attachment_service</code><span class="sig-paren">(</span><em class="sig-param">vm_id</em>, <em class="sig-param">disk_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_disk_attachment_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the service that manages a specific disk attachment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm_id</strong> (<em>str</em>) – unique identifier of the vm</p></li>
<li><p><strong>disk_id</strong> (<em>str</em>) – unique identifier of the disk</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_disk_attachments">
<code class="sig-name descname">get_disk_attachments</code><span class="sig-paren">(</span><em class="sig-param">vm_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_disk_attachments" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the disks that are attached to the virtual machine</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_id</strong> (<em>str</em>) – unique identifier of the vm</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of disks attachments</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_disk_attachments_service">
<code class="sig-name descname">get_disk_attachments_service</code><span class="sig-paren">(</span><em class="sig-param">vm_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_disk_attachments_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the service that manages the disk attachments of the vm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_id</strong> (<em>str</em>) – unique identifier of the vm</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_disk_service">
<code class="sig-name descname">get_disk_service</code><span class="sig-paren">(</span><em class="sig-param">disk_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_disk_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the disk service managing a specific disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>disk_id</strong> (<em>str</em>) – unique identifier of the disk</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_disks_by_pattern">
<code class="sig-name descname">get_disks_by_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern=None</em>, <em class="sig-param">case_sensitive=True</em>, <em class="sig-param">key='name'</em>, <em class="sig-param">filter_by_cluster_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_disks_by_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of disks by pattern.
If not specified it will return all the disks, or will return the list
filtered by the cluster name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – query string to restrict the returned disks</p></li>
<li><p><strong>case_sensitive</strong> (<em>bool</em>) – True to take case into account, False to
ignore case (default: True)</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Either ‘name’, or ‘id’ (default: name)</p></li>
<li><p><strong>filter_by_cluster_name</strong> (<em>bool</em>) – Will be used only if the ‘pattern’ param
not specified. If True it filters the disks by the cluster name,
else if False it returns all disks.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of disks</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_rhv_vm_instance">
<code class="sig-name descname">get_rhv_vm_instance</code><span class="sig-paren">(</span><em class="sig-param">vm_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_rhv_vm_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get RHV VM instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_name</strong> – name of RHV VM</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vm instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vm (types.Vm)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_vm_names">
<code class="sig-name descname">get_vm_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_vm_names" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of VMs name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_vm_service">
<code class="sig-name descname">get_vm_service</code><span class="sig-paren">(</span><em class="sig-param">vm_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_vm_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the service that manages a specific virtual machine</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm_id</strong> (<em>str</em>) – unique identifier of the vm</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_vm_status">
<code class="sig-name descname">get_vm_status</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_vm_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the power status of RHV VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>str</em>) – RHV VM instance</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns :</dt><dd><p>str: Power status of RHV VM</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.get_vms_by_pattern">
<code class="sig-name descname">get_vms_by_pattern</code><span class="sig-paren">(</span><em class="sig-param">pattern=None</em>, <em class="sig-param">case_sensitive=True</em>, <em class="sig-param">key='name'</em>, <em class="sig-param">filter_by_cluster_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.get_vms_by_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of virtual machines of the system by pattern.
If not specified it will return all the vms, or will return the list
filtered by the cluster name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – query string to restrict the returned vms</p></li>
<li><p><strong>case_sensitive</strong> (<em>bool</em>) – True to take case into account, False to
ignore case (default: True)</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Either ‘name’, or ‘id’ (default: name)</p></li>
<li><p><strong>filter_by_cluster_name</strong> (<em>bool</em>) – Will be used only if the ‘pattern’ param
not specified. If True it filters the Vm by the cluster name,
else if False it returns all Vm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of Vm instances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.reboot_rhv_vms">
<code class="sig-name descname">reboot_rhv_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">wait=True</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.reboot_rhv_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboot the RHV virtual machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – Names of RHV vms</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for VM to reboot</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for RHV VMs to reboot</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True to reboot vm forcibly False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.remove_disk">
<code class="sig-name descname">remove_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">identifier</em>, <em class="sig-param">key='name'</em>, <em class="sig-param">detach_only=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.remove_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the disk attachment. By default, only detach the disk from the
virtual machine, but won’t remove it from the system, unless the
detach_only parameter is False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>types.Vm</em>) – Vm instance</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) – unique identifier of the disk
Either disk name or disk id</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Either ‘name’ or ‘id’ (default: name)</p></li>
<li><p><strong>detach_only</strong> (<em>bool</em>) – True to only detach the disk from the vm but not
removed from the system, False otherwise (default: True)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.remove_disks">
<code class="sig-name descname">remove_disks</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">detach_only=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.remove_disks" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all the extra disks for a VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>types.Vm</em>) – Vm instance</p></li>
<li><p><strong>detach_only</strong> (<em>bool</em>) – True to only detach the disk from the vm but not
removed from the system, False otherwise (default: True)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.restart_rhv_vms_by_stop_and_start">
<code class="sig-name descname">restart_rhv_vms_by_stop_and_start</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">wait=True</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.restart_rhv_vms_by_stop_and_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop and Start RHV virtual machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – list of RHV vm instances</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for non-graceful VM shutdown, False for
graceful VM shutdown.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for RHV VMs to start</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.start_rhv_vms">
<code class="sig-name descname">start_rhv_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">wait=True</em>, <em class="sig-param">timeout=600</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.start_rhv_vms" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Run the RHV virtual machines</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – list of RHV vm instances</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for RHV VMs to start</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for VM to reach ‘up’ status.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.stop_rhv_vms">
<code class="sig-name descname">stop_rhv_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.stop_rhv_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown the RHV virtual machines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – list of RHV vm instances</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for non-graceful VM shutdown, False for
graceful VM shutdown.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for VM to reach ‘down’ status.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.system_service">
<em class="property">property </em><code class="sig-name descname">system_service</code><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.system_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the root of the services tree</p>
<p>The returned value is an instance of the SystemService class</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.rhv.RHV.vms_service">
<em class="property">property </em><code class="sig-name descname">vms_service</code><a class="headerlink" href="#ocs_ci.utility.rhv.RHV.vms_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the virtual machines service</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.rosa">
<span id="ocs-ci-utility-rosa-module"></span><h2>ocs_ci.utility.rosa module<a class="headerlink" href="#module-ocs_ci.utility.rosa" title="Permalink to this headline">¶</a></h2>
<p>Module for interactions with Openshift Dedciated Cluster.</p>
<dl class="function">
<dt id="ocs_ci.utility.rosa.appliance_mode_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">appliance_mode_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.appliance_mode_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Create appliance mode provider cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.create_account_roles">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">create_account_roles</code><span class="sig-paren">(</span><em class="sig-param">prefix='ManagedOpenShift'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.create_account_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the required account-wide roles and policies, including Operator policies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prefix</strong> (<em>str</em>) – role prefix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.create_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">create_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster_name</em>, <em class="sig-param">version</em>, <em class="sig-param">region</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.create_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OCP cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – Cluster name</p></li>
<li><p><strong>version</strong> (<em>str</em>) – cluster version</p></li>
<li><p><strong>region</strong> (<em>str</em>) – Cluster region</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.create_oidc_provider">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">create_oidc_provider</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.create_oidc_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the OpenID Connect (OIDC) provider that the Operators will use to
authenticate</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name or cluster id</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.create_operator_roles">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">create_operator_roles</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.create_operator_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the cluster-specific Operator IAM roles. The roles created include the
relevant prefix for the cluster name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name or cluster id</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.delete_odf_addon">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">delete_odf_addon</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.delete_odf_addon" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete ODF Managed Service addon from cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name or cluster id</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.delete_oidc_provider">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">delete_oidc_provider</code><span class="sig-paren">(</span><em class="sig-param">cluster_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.delete_oidc_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete oidc provider of the given cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_id</strong> (<em>str</em>) – the id of the cluster</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.delete_operator_roles">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">delete_operator_roles</code><span class="sig-paren">(</span><em class="sig-param">cluster_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.delete_operator_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete operator roles of the given cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_id</strong> (<em>str</em>) – the id of the cluster</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.destroy_appliance_mode_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">destroy_appliance_mode_cluster</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.destroy_appliance_mode_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete rosa cluster if appliance mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> – name of the cluster</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if appliance mode and cluster delete initiated</dt><dd><p>else False</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.download_rosa_cli">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">download_rosa_cli</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.download_rosa_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to download OCM cli</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>path to the installer</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.edit_addon_installation">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">edit_addon_installation</code><span class="sig-paren">(</span><em class="sig-param">addon_param_key</em>, <em class="sig-param">addon_param_value</em>, <em class="sig-param">cluster_name=None</em>, <em class="sig-param">addon_name=None</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.edit_addon_installation" title="Permalink to this definition">¶</a></dt>
<dd><p>Edit a specific parameter of the odf addon installation of a cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addon_param_key</strong> (<em>str</em>) – The addon key param to modify</p></li>
<li><p><strong>addon_param_value</strong> (<em>str</em>) – The addon value param to modify</p></li>
<li><p><strong>cluster_name</strong> (<em>str</em>) – The cluster name. The default value is ‘config.ENV_DATA[“cluster_name”]’</p></li>
<li><p><strong>addon_name</strong> (<em>str</em>) – The addon name. The default value is ‘addon_name = config.ENV_DATA[“addon_name”]’</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If true, wait for the addon to be ready. False, otherwise.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.get_addon_info">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">get_addon_info</code><span class="sig-paren">(</span><em class="sig-param">cluster</em>, <em class="sig-param">addon_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.get_addon_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get line related to addon from rosa <cite>list addons</cite> command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>str</em>) – cluster name</p></li>
<li><p><strong>addon_name</strong> (<em>str</em>) – addon name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>line of the command for relevant addon. If not found, it returns None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.get_latest_rosa_version">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">get_latest_rosa_version</code><span class="sig-paren">(</span><em class="sig-param">version</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.get_latest_rosa_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns latest available z-stream version available for ROSA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em>) – OCP version in format <cite>x.y</cite></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Latest available z-stream version</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.get_rosa_cluster_service_id">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">get_rosa_cluster_service_id</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.get_rosa_cluster_service_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get service id of cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>service id of cluster. If not found, it returns None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.get_rosa_service_details">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">get_rosa_service_details</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.get_rosa_service_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns info about the rosa service cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – Cluster name.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.install_odf_addon">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">install_odf_addon</code><span class="sig-paren">(</span><em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.install_odf_addon" title="Permalink to this definition">¶</a></dt>
<dd><p>Install ODF Managed Service addon to cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster</strong> (<em>str</em>) – cluster name or cluster id</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.is_odf_addon_installed">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">is_odf_addon_installed</code><span class="sig-paren">(</span><em class="sig-param">cluster_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.is_odf_addon_installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the odf addon is installed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_name</strong> (<em>str</em>) – The cluster name. The default value is ‘config.ENV_DATA[“cluster_name”]’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True, if the odf addon is installed. False, otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.login">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Login to ROSA client</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.post_onboarding_verification">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">post_onboarding_verification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.post_onboarding_verification" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that after onboarding consumer the relevant resources
were created in the provider cluster and then switch back to the original cluster:
1. StorageConsumer with the correct id exists and all its CephResources
are in Ready status
2. CephBlockPool and Subvolumegroup with the correct id are in Ready status</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.validate_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">validate_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">version</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.validate_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the version whether given version is z-stream version available for ROSA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em>) – OCP version string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if given version is available in z-stream version for ROSA</dt><dd><p>else False</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.rosa.wait_for_addon_to_be_ready">
<code class="sig-prename descclassname">ocs_ci.utility.rosa.</code><code class="sig-name descname">wait_for_addon_to_be_ready</code><span class="sig-paren">(</span><em class="sig-param">cluster_name=None</em>, <em class="sig-param">addon_name=None</em>, <em class="sig-param">timeout=300</em>, <em class="sig-param">sleep=20</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.rosa.wait_for_addon_to_be_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the addon of a cluster to be ready</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<em>str</em>) – The cluster name. The default value is ‘config.ENV_DATA[“cluster_name”]’</p></li>
<li><p><strong>addon_name</strong> (<em>str</em>) – The addon name. The default value is ‘addon_name = config.ENV_DATA[“addon_name”]’</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout to wait for the addon to be ready</p></li>
<li><p><strong>sleep</strong> (<em>int</em>) – Time in seconds to sleep between attempts</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Raise:</dt><dd><p>TimeoutExpiredError: In case the addon is not ready in the given timeout</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.secret">
<span id="ocs-ci-utility-secret-module"></span><h2>ocs_ci.utility.secret module<a class="headerlink" href="#module-ocs_ci.utility.secret" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.secret.link_all_sa_and_secret">
<code class="sig-prename descclassname">ocs_ci.utility.secret.</code><code class="sig-name descname">link_all_sa_and_secret</code><span class="sig-paren">(</span><em class="sig-param">secret_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.secret.link_all_sa_and_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Link all service accounts in specified namespace with the secret for pulling
of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>secret_name</strong> (<em>str</em>) – secret name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – namespace name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.secret.link_all_sa_and_secret_and_delete_pods">
<code class="sig-prename descclassname">ocs_ci.utility.secret.</code><code class="sig-name descname">link_all_sa_and_secret_and_delete_pods</code><span class="sig-paren">(</span><em class="sig-param">secret_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.secret.link_all_sa_and_secret_and_delete_pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Link all service accounts in specified namespace with the secret for pulling
of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>secret_name</strong> (<em>str</em>) – secret name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – namespace name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.secret.link_sa_and_secret">
<code class="sig-prename descclassname">ocs_ci.utility.secret.</code><code class="sig-name descname">link_sa_and_secret</code><span class="sig-paren">(</span><em class="sig-param">sa_name</em>, <em class="sig-param">secret_name</em>, <em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.secret.link_sa_and_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Link service account and secret for pulling of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sa_name</strong> (<em>str</em>) – service account name</p></li>
<li><p><strong>secret_name</strong> (<em>str</em>) – secret name</p></li>
<li><p><strong>namespace</strong> (<em>str</em>) – namespace name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.service">
<span id="ocs-ci-utility-service-module"></span><h2>ocs_ci.utility.service module<a class="headerlink" href="#module-ocs_ci.utility.service" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.service.KubeletService">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.service.</code><code class="sig-name descname">KubeletService</code><a class="headerlink" href="#ocs_ci.utility.service.KubeletService" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.service.Service" title="ocs_ci.utility.service.Service"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.service.Service</span></code></a></p>
<p>Kubelet Service class</p>
<p>The purpose of this class is to extend Service class to provide stop/start/restart etc operations on
kubelet service. Since kubelet service stop and start operations involve changing status of OCP node
objects, this class verifies the same.</p>
<dl class="method">
<dt id="ocs_ci.utility.service.KubeletService.restart">
<code class="sig-name descname">restart</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.KubeletService.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart the kubelet service using parent service class. After that, ensures the corresponding OCP node
is connectable and moves to Ready state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to stop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.KubeletService.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.KubeletService.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the kubelet service using parent service class. After that, ensures the corresponding OCP node
is connectable and moves to Ready state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to stop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.KubeletService.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.KubeletService.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the kubelet service using parent service class. After that, ensures the corresponding OCP node
moves to NotReady state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to stop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.service.Service">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.service.</code><code class="sig-name descname">Service</code><span class="sig-paren">(</span><em class="sig-param">service_name</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generic Service class</p>
<p>The purpose of this class is to provide a support to perform start/stop/restart and status
operations on a given service. The class is instantiated with required service name without
‘.service extension. Refer to KubeletService class in this module for an example on how to
use these methods.</p>
<dl class="method">
<dt id="ocs_ci.utility.service.Service.kill">
<code class="sig-name descname">kill</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill the given service using systemctl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to be stopped.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.Service.restart">
<code class="sig-name descname">restart</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart the given service using systemctl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to be started.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.Service.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the given service using systemctl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to start.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – If service on powerNode machine is still not up</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.Service.status">
<code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the status of the given service using systemctl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Future use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘active’ or ‘inactive’ or ‘failed’, etc.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.Service.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the given service using systemctl.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – time in seconds to wait for service to stop.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedBehaviour" title="ocs_ci.ocs.exceptions.UnexpectedBehaviour"><strong>UnexpectedBehaviour</strong></a> – If service on PowerNode machine is still up</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.service.Service.verify_service">
<code class="sig-name descname">verify_service</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">action</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.service.Service.verify_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if PowerNode is completely powered off</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>object</em>) – Node objects</p></li>
<li><p><strong>action</strong> (<em>string</em>) – ACTIVE or INACTIVE or FAILED</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if service state is reqested action, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.ssl_certs">
<span id="ocs-ci-utility-ssl-certs-module"></span><h2>ocs_ci.utility.ssl_certs module<a class="headerlink" href="#module-ocs_ci.utility.ssl_certs" title="Permalink to this headline">¶</a></h2>
<p>This module is used for generating custom SSL certificates.</p>
<dl class="class">
<dt id="ocs_ci.utility.ssl_certs.CSR">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">CSR</code><a class="headerlink" href="#ocs_ci.utility.ssl_certs.CSR" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OpenSSL.crypto.X509Req</span></code></p>
<p>Wrapper class over crypto.X509Req used for customization.</p>
</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.ssl_certs.Key">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">Key</code><a class="headerlink" href="#ocs_ci.utility.ssl_certs.Key" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OpenSSL.crypto.PKey</span></code></p>
<p>Wrapper class over crypto.PKey used for customization.</p>
</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">OCSCertificate</code><span class="sig-paren">(</span><em class="sig-param">signing_service</em>, <em class="sig-param">cn</em>, <em class="sig-param">sans=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate custom certificate signed by the automatic siging certification
authority</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signing_service</strong> (<em>str</em>) – URL of the automatic signing CA service</p></li>
<li><p><strong>cn</strong> (<em>str</em>) – Certificate Common Name</p></li>
<li><p><strong>sans</strong> (<em>list</em>) – list of Subject Alternative Names (prefixed by the type
like ‘DNS:’ or ‘IP:’)</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.crt">
<em class="property">property </em><code class="sig-name descname">crt</code><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.crt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.csr">
<em class="property">property </em><code class="sig-name descname">csr</code><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.csr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.generate_csr">
<code class="sig-name descname">generate_csr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.generate_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Certificate Signing Request for the certificate</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.generate_key">
<code class="sig-name descname">generate_key</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.generate_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate private key for the certificate</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.get_crt">
<code class="sig-name descname">get_crt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.get_crt" title="Permalink to this definition">¶</a></dt>
<dd><p>Use automatic signing CA service to sign the CSR</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.key">
<em class="property">property </em><code class="sig-name descname">key</code><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.save_crt">
<code class="sig-name descname">save_crt</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.save_crt" title="Permalink to this definition">¶</a></dt>
<dd><p>Save certificate to file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path where to save certificate</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.save_csr">
<code class="sig-name descname">save_csr</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.save_csr" title="Permalink to this definition">¶</a></dt>
<dd><p>Save certificate signing request to file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path where to save certificate signing request</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.ssl_certs.OCSCertificate.save_key">
<code class="sig-name descname">save_key</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.OCSCertificate.save_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Save certificate key to file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path where to save certificate key</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.configure_custom_api_cert">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">configure_custom_api_cert</code><span class="sig-paren">(</span><em class="sig-param">skip_tls_verify=False</em>, <em class="sig-param">wait_for_machineconfigpool=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.configure_custom_api_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure custom SSL certificate for API. If the certificate doesn’t
exists, generate new one signed by automatic certificate signing service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>skip_tls_verify</strong> (<em>bool</em>) – True if allow skipping TLS verification</p></li>
<li><p><strong>wait_for_machineconfigpool</strong> (<em>bool</em>) – True if it should wait for machineConfigPool</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ConfigurationError" title="ocs_ci.ocs.exceptions.ConfigurationError"><strong>ConfigurationError</strong></a> – when some required parameter is not configured</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.configure_custom_ingress_cert">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">configure_custom_ingress_cert</code><span class="sig-paren">(</span><em class="sig-param">skip_tls_verify=False</em>, <em class="sig-param">wait_for_machineconfigpool=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.configure_custom_ingress_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure custom SSL certificate for ingress. If the certificate doesn’t
exists, generate new one signed by automatic certificate signing service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>skip_tls_verify</strong> (<em>bool</em>) – True if allow skipping TLS verification</p></li>
<li><p><strong>wait_for_machineconfigpool</strong> (<em>bool</em>) – True if it should wait for machineConfigPool</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ConfigurationError" title="ocs_ci.ocs.exceptions.ConfigurationError"><strong>ConfigurationError</strong></a> – when some required parameter is not configured</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.configure_ingress_and_api_certificates">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">configure_ingress_and_api_certificates</code><span class="sig-paren">(</span><em class="sig-param">skip_tls_verify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.configure_ingress_and_api_certificates" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure custom SSL certificate for ingress and API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>skip_tls_verify</strong> (<em>bool</em>) – True if allow skipping TLS verification</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.configure_trusted_ca_bundle">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">configure_trusted_ca_bundle</code><span class="sig-paren">(</span><em class="sig-param">ca_cert_path</em>, <em class="sig-param">skip_tls_verify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.configure_trusted_ca_bundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure cluster-wide trusted CA bundle in Proxy object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ca_cert_path</strong> (<em>str</em>) – path to CA Certificate(s) bundle file</p></li>
<li><p><strong>skip_tls_verify</strong> (<em>bool</em>) – True if allow skipping TLS verification</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.get_root_ca_cert">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">get_root_ca_cert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.get_root_ca_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>If not available, download Root CA Certificate for custom Ingress
certificate.</p>
<dl class="simple">
<dt>Returns</dt><dd><p>str: Path to Root CA Certificate</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.init_arg_parser">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">init_arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.init_arg_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Init argument parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Parsed arguments</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.ssl_certs.main">
<code class="sig-prename descclassname">ocs_ci.utility.ssl_certs.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.ssl_certs.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function for get-ssl-cert command</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.svt">
<span id="ocs-ci-utility-svt-module"></span><h2>ocs_ci.utility.svt module<a class="headerlink" href="#module-ocs_ci.utility.svt" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.svt.svt_cleanup">
<code class="sig-prename descclassname">ocs_ci.utility.svt.</code><code class="sig-name descname">svt_cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.svt.svt_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes clonned SVT project and virtual environemt and Projects
Created while running SVT</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>BaseException</strong> – In case any erros occured while removing project and ENV.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if No exceptions, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.svt.svt_cluster_loader">
<code class="sig-prename descclassname">ocs_ci.utility.svt.</code><code class="sig-name descname">svt_cluster_loader</code><span class="sig-paren">(</span><em class="sig-param">clusterload_file='/tmp/svt/openshift_scalability/config/master-vert.yaml'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.svt.svt_cluster_loader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.svt.svt_create_venv_setup">
<code class="sig-prename descclassname">ocs_ci.utility.svt.</code><code class="sig-name descname">svt_create_venv_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.svt.svt_create_venv_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates Virtual environemt for SVT project,
and installs all the dependencies and activate the environment</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.svt.svt_project_clone">
<code class="sig-prename descclassname">ocs_ci.utility.svt.</code><code class="sig-name descname">svt_project_clone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.svt.svt_project_clone" title="Permalink to this definition">¶</a></dt>
<dd><p>This function clones the SVT project.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.svt.svt_setup">
<code class="sig-prename descclassname">ocs_ci.utility.svt.</code><code class="sig-name descname">svt_setup</code><span class="sig-paren">(</span><em class="sig-param">iterations</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.svt.svt_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and run svt workload</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.system">
<span id="ocs-ci-utility-system-module"></span><h2>ocs_ci.utility.system module<a class="headerlink" href="#module-ocs_ci.utility.system" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.system.is_path_empty">
<code class="sig-prename descclassname">ocs_ci.utility.system.</code><code class="sig-name descname">is_path_empty</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.system.is_path_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the given path does not contain any files, False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to be checked</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.templating">
<span id="ocs-ci-utility-templating-module"></span><h2>ocs_ci.utility.templating module<a class="headerlink" href="#module-ocs_ci.utility.templating" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.templating.Templating">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">Templating</code><span class="sig-paren">(</span><em class="sig-param">base_path='/Users/danielosypenko/Work/automation_4/ocs-ci/ocs_ci/templates'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.Templating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class which provides all functionality for templating</p>
<dl class="method">
<dt id="ocs_ci.utility.templating.Templating.base_path">
<em class="property">property </em><code class="sig-name descname">base_path</code><a class="headerlink" href="#ocs_ci.utility.templating.Templating.base_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Setter for self._base_path property</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.templating.Templating.render_template">
<code class="sig-name descname">render_template</code><span class="sig-paren">(</span><em class="sig-param">template_path</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.Templating.render_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a template with the given data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_path</strong> (<em>str</em>) – location of the j2 template from the
self._base_path</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – the data to be formatted into the template</p></li>
</ul>
</dd>
</dl>
<p>Returns: rendered template</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.dump_data_to_json">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">dump_data_to_json</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">json_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.dump_data_to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump data to json file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em>) – dictionary with data to dump to the json file.</p></li>
<li><p><strong>json_file</strong> (<em>str</em>) – file path to json file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.dump_data_to_temp_yaml">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">dump_data_to_temp_yaml</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">temp_yaml</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.dump_data_to_temp_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump data to temporary yaml file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em><em> or </em><em>list</em>) – dict or list (in case of multi_document) with
data to dump to the yaml file.</p></li>
<li><p><strong>temp_yaml</strong> (<em>str</em>) – file path of yaml file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dumped yaml data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.dump_to_temp_yaml">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">dump_to_temp_yaml</code><span class="sig-paren">(</span><em class="sig-param">src_file</em>, <em class="sig-param">dst_file</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.dump_to_temp_yaml" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Dump a jinja2 template file content into a yaml file</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>src_file (str): Template Yaml file path
dst_file: the path to the destination Yaml file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.generate_yaml_from_jinja2_template_with_data">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">generate_yaml_from_jinja2_template_with_data</code><span class="sig-paren">(</span><em class="sig-param">file_</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.generate_yaml_from_jinja2_template_with_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate yaml fron jinja2 yaml with processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_</strong> (<em>str</em>) – Template Yaml file path</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>jinja2 attributes</strong> (<em>All</em>) – </p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Generated from template file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>generate_yaml_from_template(file_=’path/to/file/name’, pv_data_dict’)</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.get_n_document_from_yaml">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">get_n_document_from_yaml</code><span class="sig-paren">(</span><em class="sig-param">yaml_generator</em>, <em class="sig-param">index=0</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.get_n_document_from_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n document from yaml generator loaded by load_yaml with
multi_document = True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_generator</strong> (<em>generator</em>) – Generator from yaml.safe_load_all</p></li>
<li><p><strong>index</strong> (<em>int</em>) – Index of document to return. (0 - 1st, 1 - 2nd document)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Data from n document from yaml file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>IndexError</strong> – In case that yaml generator doesn’t have such index.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.json_to_dict">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">json_to_dict</code><span class="sig-paren">(</span><em class="sig-param">json_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.json_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts JSON to dictionary format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> (<em>str</em>) – file path to json file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JSON data in dictionary format</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.load_config_data">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">load_config_data</code><span class="sig-paren">(</span><em class="sig-param">data_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.load_config_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads YAML data from the specified path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_path</strong> – location of the YAML data file</p>
</dd>
</dl>
<p>Returns: loaded YAML data</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.load_yaml">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">load_yaml</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">multi_document=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.load_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Load yaml file (local or from URL) and convert it to dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em>) – Path to the file or URL address</p></li>
<li><p><strong>multi_document</strong> (<em>bool</em>) – True if yaml contains more documents</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If multi_document == False, returns loaded data from yaml file</dt><dd><p>with one document.</p>
</dd>
<dt>generator: If multi_document == True, returns generator which each</dt><dd><p>iteration returns dict from one loaded document from a file.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.templating.to_nice_yaml">
<code class="sig-prename descclassname">ocs_ci.utility.templating.</code><code class="sig-name descname">to_nice_yaml</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">indent=2</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.templating.to_nice_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a j2 filter which allows you from dictionary to print nice human
readable yaml.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>dict</em>) – dictionary with data to print as yaml</p></li>
<li><p><strong>indent</strong> (<em>int</em>) – number of spaces for indent to be applied for whole
dumped yaml. First line is not indented! (default: 2)</p></li>
<li><p><strong>*args</strong> – Other positional arguments which will be passed to yaml.dump</p></li>
<li><p><strong>*args</strong> – Other keywords arguments which will be passed to yaml.dump</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>transformed yaml data in string format</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.uninstall_openshift_logging">
<span id="ocs-ci-utility-uninstall-openshift-logging-module"></span><h2>ocs_ci.utility.uninstall_openshift_logging module<a class="headerlink" href="#module-ocs_ci.utility.uninstall_openshift_logging" title="Permalink to this headline">¶</a></h2>
<p>Function to teardown the openshift-logging</p>
<dl class="function">
<dt id="ocs_ci.utility.uninstall_openshift_logging.check_pod_vanished">
<code class="sig-prename descclassname">ocs_ci.utility.uninstall_openshift_logging.</code><code class="sig-name descname">check_pod_vanished</code><span class="sig-paren">(</span><em class="sig-param">pod_names</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.uninstall_openshift_logging.check_pod_vanished" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to check all the pods are vanished from the namespace</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.uninstall_openshift_logging.delete_logging_namespaces">
<code class="sig-prename descclassname">ocs_ci.utility.uninstall_openshift_logging.</code><code class="sig-name descname">delete_logging_namespaces</code><span class="sig-paren">(</span><em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.uninstall_openshift_logging.delete_logging_namespaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Deleting namespaces
1. Openshift-operators-redhat
2. Openshift-logging</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.uninstall_openshift_logging.uninstall_cluster_logging">
<code class="sig-prename descclassname">ocs_ci.utility.uninstall_openshift_logging.</code><code class="sig-name descname">uninstall_cluster_logging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.uninstall_openshift_logging.uninstall_cluster_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to uninstall cluster-logging from the cluster
Deletes the project “openshift-logging” and “openshift-operators-redhat”</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.users">
<span id="ocs-ci-utility-users-module"></span><h2>ocs_ci.utility.users module<a class="headerlink" href="#module-ocs_ci.utility.users" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocs_ci.utility.users.add_htpasswd_user">
<code class="sig-prename descclassname">ocs_ci.utility.users.</code><code class="sig-name descname">add_htpasswd_user</code><span class="sig-paren">(</span><em class="sig-param">username</em>, <em class="sig-param">password</em>, <em class="sig-param">htpasswd_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.users.add_htpasswd_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new user credentials with provided username and password.
These will be saved in file located on htpasswd_path. The file will
be created if it doesn’t exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<em>str</em>) – Name of a new user</p></li>
<li><p><strong>password</strong> (<em>str</em>) – Password for a new user</p></li>
<li><p><strong>htpasswd_path</strong> (<em>str</em>) – Path to httpasswd file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.users.create_htpasswd_idp">
<code class="sig-prename descclassname">ocs_ci.utility.users.</code><code class="sig-name descname">create_htpasswd_idp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.users.create_htpasswd_idp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create OAuth identity provider of HTPasswd type. It uses htpass-secret
secret as a source for list of users.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.users.create_htpasswd_secret">
<code class="sig-prename descclassname">ocs_ci.utility.users.</code><code class="sig-name descname">create_htpasswd_secret</code><span class="sig-paren">(</span><em class="sig-param">htpasswd_path</em>, <em class="sig-param">replace=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.users.create_htpasswd_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update htpass-secret secret from file located on htpasswd_path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>htpasswd_path</strong> (<em>str</em>) – Path to httpasswd file</p></li>
<li><p><strong>replace</strong> (<em>bool</em>) – If secret already exists then this will replace it</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.users.delete_htpasswd_secret">
<code class="sig-prename descclassname">ocs_ci.utility.users.</code><code class="sig-name descname">delete_htpasswd_secret</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.users.delete_htpasswd_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete HTPasswd secret.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.users.user_factory">
<code class="sig-prename descclassname">ocs_ci.utility.users.</code><code class="sig-name descname">user_factory</code><span class="sig-paren">(</span><em class="sig-param">request</em>, <em class="sig-param">htpasswd_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.users.user_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a user factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>obj</em>) – request fixture</p></li>
<li><p><strong>htpasswd_path</strong> (<em>str</em>) – Path to htpasswd file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>User factory function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>func</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.utils">
<span id="ocs-ci-utility-utils-module"></span><h2>ocs_ci.utility.utils module<a class="headerlink" href="#module-ocs_ci.utility.utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocs_ci.utility.utils.AZInfo">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">AZInfo</code><a class="headerlink" href="#ocs_ci.utility.utils.AZInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for getting different az numbers across calls</p>
<dl class="method">
<dt id="ocs_ci.utility.utils.AZInfo.get_zone_number">
<code class="sig-name descname">get_zone_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.AZInfo.get_zone_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment current zone_number and perform modulus op
to roll-on to next available number</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>zone number index</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ocs_ci.utility.utils.AZInfo.zone_number">
<code class="sig-name descname">zone_number</code><em class="property"> = 0</em><a class="headerlink" href="#ocs_ci.utility.utils.AZInfo.zone_number" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.utils.TimeoutIterator">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">TimeoutIterator</code><span class="sig-paren">(</span><em class="sig-param">timeout</em>, <em class="sig-param">sleep</em>, <em class="sig-param">func</em>, <em class="sig-param">func_args=None</em>, <em class="sig-param">func_kwargs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.TimeoutIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ocs_ci.utility.utils.TimeoutSampler" title="ocs_ci.utility.utils.TimeoutSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocs_ci.utility.utils.TimeoutSampler</span></code></a></p>
<p>Wrapper of TimeoutSampler which separates parameters of the class itself
and func arguments in __init__ method. Such way of passing function with
parameters is used in python standard library.</p>
<p>This allows more explicit usage, which improves readability, eg.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t1</span> <span class="o">=</span> <span class="n">TimeoutIterator</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span> <span class="n">func_args</span><span class="o">=</span><span class="p">[</span><span class="n">bar</span><span class="p">])</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">TimeoutIterator</span><span class="p">(</span><span class="mi">3600</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span> <span class="n">func_args</span><span class="o">=</span><span class="p">[</span><span class="n">bar</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ocs_ci.utility.utils.TimeoutSampler">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">TimeoutSampler</code><span class="sig-paren">(</span><em class="sig-param">timeout</em>, <em class="sig-param">sleep</em>, <em class="sig-param">func</em>, <em class="sig-param">*func_args</em>, <em class="sig-param">**func_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.TimeoutSampler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Samples the function output.</p>
<p>This is a generator object that at first yields the output of function
<cite>func</cite>. After the yield, it either raises instance of <cite>timeout_exc_cls</cite> or
sleeps <cite>sleep</cite> seconds.</p>
<p>Yielding the output allows you to handle every value as you wish.</p>
<p>Feel free to set the instance variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds</p></li>
<li><p><strong>sleep</strong> (<em>int</em>) – Sleep interval in seconds</p></li>
<li><p><strong>func</strong> (<em>function</em>) – The function to sample</p></li>
<li><p><strong>func_args</strong> – Arguments for the function</p></li>
<li><p><strong>func_kwargs</strong> – Keyword arguments for the function</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="ocs_ci.utility.utils.TimeoutSampler.wait_for_func_status">
<code class="sig-name descname">wait_for_func_status</code><span class="sig-paren">(</span><em class="sig-param">result</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.TimeoutSampler.wait_for_func_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get function and run it for given time until success or timeout.
(using __iter__ function)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result</strong> (<em>bool</em>) – Expected result from func.</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">TimeoutSampler</span><span class="p">(</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">some_func</span><span class="p">,</span> <span class="n">func_arg1</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="n">func_arg2</span><span class="o">=</span><span class="s2">&quot;2&quot;</span>
<span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">sample</span><span class="o">.</span><span class="n">wait_for_func_status</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.utils.TimeoutSampler.wait_for_func_value">
<code class="sig-name descname">wait_for_func_value</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.TimeoutSampler.wait_for_func_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements common usecase of TimeoutSampler: waiting until func (given
function) returns a given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – Expected return value of func we are waiting for.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.activate_multiple_mdss">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">activate_multiple_mdss</code><span class="sig-paren">(</span><em class="sig-param">mds_nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.activate_multiple_mdss" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.add_chrony_to_ocp_deployment">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">add_chrony_to_ocp_deployment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.add_chrony_to_ocp_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and Add necessary chrony resources</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.add_mem_stats">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">add_mem_stats</code><span class="sig-paren">(</span><em class="sig-param">soup</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.add_mem_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Add performance summary to the soup to print the table:
columns = [‘TC name’, ‘Peak total RAM consumed’, ‘Peak total VMS consumed’, ‘RAM leak’]</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.add_path_to_env_path">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">add_path_to_env_path</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.add_path_to_env_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Add path to the PATH environment variable (if not already there).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path which should be added to the PATH env. variable</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.add_squad_analysis_to_email">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">add_squad_analysis_to_email</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">soup</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.add_squad_analysis_to_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Add squad analysis to the html test results used in email reporting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>obj</em>) – Pytest session object</p></li>
<li><p><strong>soup</strong> (<em>obj</em>) – BeautifulSoup object of HTML Report data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.add_stage_cert">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">add_stage_cert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.add_stage_cert" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploy stage certificate to the cluster.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.allow_dir_fragmentation">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">allow_dir_fragmentation</code><span class="sig-paren">(</span><em class="sig-param">mds_nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.allow_dir_fragmentation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.auth_list">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">auth_list</code><span class="sig-paren">(</span><em class="sig-param">clients</em>, <em class="sig-param">mon_node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.auth_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.censor_values">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">censor_values</code><span class="sig-paren">(</span><em class="sig-param">data_to_censor</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.censor_values" title="Permalink to this definition">¶</a></dt>
<dd><p>This function censor string and numeric values in dictionary based on
keys that match pattern defined in config_keys_patterns_to_censor in
constants. It is performed recursively for nested dictionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_to_censor</strong> (<em>dict</em>) – Data to censor.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.ceph_health_check">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">ceph_health_check</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em>, <em class="sig-param">tries=20</em>, <em class="sig-param">delay=30</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.ceph_health_check" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace of OCS
(default: config.ENV_DATA[‘cluster_namespace’])</p></li>
<li><p><strong>tries</strong> (<em>int</em>) – Number of retries</p></li>
<li><p><strong>delay</strong> (<em>int</em>) – Delay in seconds between retries</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>ceph_health_check_base return value with default retries of 20,</dt><dd><p>delay of 30 seconds if default values are not changed via args.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.ceph_health_check_base">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">ceph_health_check_base</code><span class="sig-paren">(</span><em class="sig-param">namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.ceph_health_check_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Exec <cite>ceph health</cite> cmd on tools pod to determine health of cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – Namespace of OCS
(default: config.ENV_DATA[‘cluster_namespace’])</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CephHealthException" title="ocs_ci.ocs.exceptions.CephHealthException"><strong>CephHealthException</strong></a> – If the ceph health returned is not HEALTH_OK</p></li>
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – If the command to retrieve the tools pod name or the
    command to get ceph health returns a non-zero exit code</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if HEALTH_OK</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.check_for_rhcos_images">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">check_for_rhcos_images</code><span class="sig-paren">(</span><em class="sig-param">url</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.check_for_rhcos_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for rhcos images are present in given location</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<em>str</em>) – rhcos_images url</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if images present if not false</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.check_if_executable_in_path">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">check_if_executable_in_path</code><span class="sig-paren">(</span><em class="sig-param">exec_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.check_if_executable_in_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether an executable can be found in the $PATH</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exec_name</strong> – Name of executable to look for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the executable was found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.check_timeout_reached">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">check_timeout_reached</code><span class="sig-paren">(</span><em class="sig-param">start_time</em>, <em class="sig-param">timeout</em>, <em class="sig-param">err_msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.check_timeout_reached" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if timeout reached and if so raise the exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_time</strong> (<em>time</em>) – Star time of the operation.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds.</p></li>
<li><p><strong>err_msg</strong> (<em>str</em>) – Error message for the exception.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TimeoutException" title="ocs_ci.ocs.exceptions.TimeoutException"><strong>TimeoutException</strong></a> – In case the timeout reached.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.clone_notify">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">clone_notify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.clone_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Repository contains the source code of notify tool,
which is a python3 based tool wrapped by a container
used to configure Ceph Bucket Notifications</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Path location of the notify code</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>notify_path (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.clone_repo">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">clone_repo</code><span class="sig-paren">(</span><em class="sig-param">url</em>, <em class="sig-param">location</em>, <em class="sig-param">tmp_repo=False</em>, <em class="sig-param">branch='master'</em>, <em class="sig-param">to_checkout=None</em>, <em class="sig-param">clone_type='shallow'</em>, <em class="sig-param">force_checkout=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.clone_repo" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Clone a repository or checkout latest changes if it already exists at</dt><dd><p>specified location.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – location of the repository to clone</p></li>
<li><p><strong>location</strong> (<em>str</em>) – path where the repository will be cloned to</p></li>
<li><p><strong>tmp_repo</strong> (<em>bool</em>) – temporary repo, means it will be copied to temp path, to ‘location’</p></li>
<li><p><strong>branch</strong> (<em>str</em>) – branch name to checkout</p></li>
<li><p><strong>to_checkout</strong> (<em>str</em>) – commit id or tag to checkout</p></li>
<li><p><strong>clone_type</strong> (<em>str</em>) – type of clone (shallow, blobless, treeless and normal)
By default, shallow clone will be used. For normal clone use
clone_type as “normal”.</p></li>
<li><p><strong>force_checkout</strong> (<em>bool</em>) – True for force checkout to branch.
force checkout will ignore the unmerged entries.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnknownCloneTypeException" title="ocs_ci.ocs.exceptions.UnknownCloneTypeException"><strong>UnknownCloneTypeException</strong></a> – In case of incorrect clone_type is used</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.config_to_string">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">config_to_string</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.config_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ConfigParser object to string in INI format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>obj</em>) – ConfigParser object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Config in one string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.configure_chrony_and_wait_for_machineconfig_status">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">configure_chrony_and_wait_for_machineconfig_status</code><span class="sig-paren">(</span><em class="sig-param">node_type='worker'</em>, <em class="sig-param">timeout=900</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.configure_chrony_and_wait_for_machineconfig_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure chrony on the nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_type</strong> (<em>str</em>) – The node type to configure chrony
e.g: worker, master and all if we want to configure on all nodes</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Time in seconds to wait</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.convert_bytes_to_unit">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">convert_bytes_to_unit</code><span class="sig-paren">(</span><em class="sig-param">bytes_to_convert</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.convert_bytes_to_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert bytes to bigger units like Kb, Mb, Gb or Tb.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bytes_to_convert</strong> (<em>str</em>) – The bytes to convert.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The converted bytes as biggest unit possible</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.convert_device_size">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">convert_device_size</code><span class="sig-paren">(</span><em class="sig-param">unformatted_size</em>, <em class="sig-param">units_to_covert_to</em>, <em class="sig-param">convert_size=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.convert_device_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a string representing a size to an int according to the given units
to convert to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unformatted_size</strong> (<em>str</em>) – The size to convert (i.e, ‘1Gi’/’100Mi’)
acceptable units are: “Ti”, “Gi”, “Mi”, “Ki”, “Bi”</p></li>
<li><p><strong>units_to_covert_to</strong> (<em>str</em>) – The units to convert the size to (i.e, TB/GB/MB)
acceptable units are: “TB”, “GB”, “MB”, “KB”, “BY”</p></li>
<li><p><strong>convert_size</strong> (<em>int</em>) – set convert by 1000 or 1024</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The converted size</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.convert_hostnames_to_ips">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">convert_hostnames_to_ips</code><span class="sig-paren">(</span><em class="sig-param">hostnames</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.convert_hostnames_to_ips" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the IP’s from hostname with FQDN</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hostnames</strong> (<em>list</em>) – List of host names with FQDN</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Host IP’s</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.convert_yaml2tfvars">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">convert_yaml2tfvars</code><span class="sig-paren">(</span><em class="sig-param">yaml</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.convert_yaml2tfvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts yaml file to tfvars. It creates the tfvars with the
same filename in the required format which is used for deployment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>yaml</strong> (<em>str</em>) – File path to yaml</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File path to tfvars</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.create_ceph_health_cmd">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">create_ceph_health_cmd</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.create_ceph_health_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Forms the ceph health command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> (<em>str</em>) – Namespace of OCS</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ceph health command</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.create_directory_path">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">create_directory_path</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.create_directory_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates directory if path doesn’t exists</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.create_rhelpod">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">create_rhelpod</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">pod_name</em>, <em class="sig-param">rhel_version=8</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.create_rhelpod" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the RHEL pod</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> (<em>str</em>) – Namespace to create RHEL pod</p></li>
<li><p><strong>pod_name</strong> (<em>str</em>) – Pod name</p></li>
<li><p><strong>rhel_version</strong> (<em>int</em>) – RHEL version to be used for ansible</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – wait time for RHEL pod to be in Running state</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pod instance for RHEL</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pod</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.create_stats_dir">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">create_stats_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.create_stats_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>create directory for Test run performance stats</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.custom_ceph_config">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">custom_ceph_config</code><span class="sig-paren">(</span><em class="sig-param">suite_config</em>, <em class="sig-param">custom_config</em>, <em class="sig-param">custom_config_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.custom_ceph_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines and returns custom configuration overrides for ceph.
Hierarchy is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">custom_config</span> <span class="o">&gt;</span> <span class="n">custom_config_file</span> <span class="o">&gt;</span> <span class="n">suite_config</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suite_config</strong> – ceph_conf_overrides that currently exist in the test suite</p></li>
<li><p><strong>custom_config</strong> – custom config args provided by the cli (these all go to the global scope)</p></li>
<li><p><strong>custom_config_file</strong> – path to custom config yaml file provided by the cli</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>New value to be used for ceph_conf_overrides in test config</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.decode">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param">encoded_message</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Decodes the message in base64</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>encoded_message</strong> (<em>str</em>) – encoded message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decoded message</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.decompose_html_attributes">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">decompose_html_attributes</code><span class="sig-paren">(</span><em class="sig-param">soup</em>, <em class="sig-param">attributes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.decompose_html_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Decomposes the given html attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>soup</strong> (<em>obj</em>) – BeautifulSoup object</p></li>
<li><p><strong>attributes</strong> (<em>list</em>) – attributes to decompose</p></li>
</ul>
</dd>
</dl>
<p>Returns: None</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.delete_dir">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">delete_dir</code><span class="sig-paren">(</span><em class="sig-param">dir_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.delete_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir_name</strong> (<em>str</em>) – Directory path to delete</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.delete_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">delete_file</code><span class="sig-paren">(</span><em class="sig-param">file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.delete_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete file_name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> (<em>str</em>) – Path to the file you want to delete</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.destroy_cluster">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">destroy_cluster</code><span class="sig-paren">(</span><em class="sig-param">installer</em>, <em class="sig-param">cluster_path</em>, <em class="sig-param">log_level='DEBUG'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.destroy_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy OCP cluster specific</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>installer</strong> (<em>str</em>) – The path to the installer binary</p></li>
<li><p><strong>cluster_path</strong> (<em>str</em>) – The path of the cluster</p></li>
<li><p><strong>log_level</strong> (<em>str</em>) – log level openshift-installer (default: DEBUG)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.disable_huge_pages">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">disable_huge_pages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.disable_huge_pages" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes huge pages</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.download_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">download_file</code><span class="sig-paren">(</span><em class="sig-param">url</em>, <em class="sig-param">filename</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a file from a specified url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – URL of the file to download</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file to write the download to</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – additional keyword arguments passed to requests.get(…)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.download_file_from_git_repo">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">download_file_from_git_repo</code><span class="sig-paren">(</span><em class="sig-param">git_repo_url</em>, <em class="sig-param">path_to_file_in_git</em>, <em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.download_file_from_git_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a file from a specified git repository</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>git_repo_url</strong> (<em>str</em>) – The git repository url</p></li>
<li><p><strong>path_to_file_in_git</strong> (<em>str</em>) – Path to the file to download
in git repository</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file to write the download to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.dump_config_to_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">dump_config_to_file</code><span class="sig-paren">(</span><em class="sig-param">file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.dump_config_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the config to the yaml file with censored secret values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – Path to file where to write the configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.email_reports">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">email_reports</code><span class="sig-paren">(</span><em class="sig-param">session</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.email_reports" title="Permalink to this definition">¶</a></dt>
<dd><p>Email results of test run</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.enable_huge_pages">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">enable_huge_pages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.enable_huge_pages" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies huge pages</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.encode">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encodes the message in base64</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str/list</em>) – message to encode</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>encoded message in base64</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.ensure_nightly_build_availability">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">ensure_nightly_build_availability</code><span class="sig-paren">(</span><em class="sig-param">build_url</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.ensure_nightly_build_availability" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.exec_cmd">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">exec_cmd</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">secrets=None</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">ignore_error=False</em>, <em class="sig-param">threading_lock=None</em>, <em class="sig-param">silent=False</em>, <em class="sig-param">use_shell=False</em>, <em class="sig-param">cluster_config=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.exec_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an arbitrary command locally</p>
<p>If the command is grep and matching pattern is not found, then this function
returns “command terminated with exit code 1” in stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – command to run</p></li>
<li><p><strong>secrets</strong> (<em>list</em>) – A list of secrets to be masked with asterisks
This kwarg is popped in order to not interfere with
subprocess.run(<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout for the command, defaults to 600 seconds.</p></li>
<li><p><strong>ignore_error</strong> (<em>bool</em>) – True if ignore non zero return code and do not
raise the exception.</p></li>
<li><p><strong>threading_lock</strong> (<em>threading.Lock</em>) – threading.Lock object that is used
for handling concurrent oc commands</p></li>
<li><p><strong>silent</strong> (<em>bool</em>) – If True will silent errors from the server, default false</p></li>
<li><p><strong>use_shell</strong> (<em>bool</em>) – If True will pass the cmd without splitting</p></li>
<li><p><strong>cluster_config</strong> (<a class="reference internal" href="ocs_ci.framework.html#ocs_ci.framework.MultiClusterConfig" title="ocs_ci.framework.MultiClusterConfig"><em>MultiClusterConfig</em></a>) – In case of multicluster environment this object
will be non-null</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – In case the command execution fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(CompletedProcess) A CompletedProcess object of the command that was executed
CompletedProcess attributes:
args: The list or str args passed to run().
returncode (str): The exit code of the process, negative for signals.
stdout     (str): The standard output (None if not captured).
stderr     (str): The standard error (None if not captured).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.expose_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">expose_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">version</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.expose_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function exposes latest nightly version or GA version of OCP.
When the version string ends with .nightly (e.g. 4.2.0-0.nightly) it will
expose the version to latest accepted OCP build
(e.g. 4.2.0-0.nightly-2019-08-08-103722)
If the version ends with -ga than it will find the latest GA OCP version
and will expose 4.2-ga to for example 4.2.22.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em>) – Verison of OCP</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Version of OCP exposed to full version if latest nighly passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.extract_ocp_binary_from_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">extract_ocp_binary_from_image</code><span class="sig-paren">(</span><em class="sig-param">binary</em>, <em class="sig-param">image</em>, <em class="sig-param">bin_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.extract_ocp_binary_from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract binary (oc client or openshift installer) from custom OCP image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>binary</strong> (<em>str</em>) – type of binary (oc or openshift-install)</p></li>
<li><p><strong>image</strong> (<em>str</em>) – image URL</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – path to bin folder where to extract the binary</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.file_locking">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">file_locking</code><span class="sig-paren">(</span><em class="sig-param">client</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.file_locking" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.fuse_client_io">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">fuse_client_io</code><span class="sig-paren">(</span><em class="sig-param">client</em>, <em class="sig-param">mounting_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.fuse_client_io" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.fuse_client_md5">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">fuse_client_md5</code><span class="sig-paren">(</span><em class="sig-param">fuse_clients</em>, <em class="sig-param">md5sum_list1</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.fuse_client_md5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.fuse_mount">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">fuse_mount</code><span class="sig-paren">(</span><em class="sig-param">fuse_clients</em>, <em class="sig-param">mounting_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.fuse_mount" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_attr_chain">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_attr_chain</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">attr_chain</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_attr_chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to retrieve object attributes when uncertain about the existence of the attribute
or a different attribute in a given attribute chain. If the retrieval fails, None is returned.
The function can be used to retrieve a direct attribute, or a chain of attributes.
i.e. - obj.attr_a, obj_attr_a.sub_attr</p>
<p>Another example - trying to access “sub_attr_b” in object.attr.sub_attr_a.sub_attr_b -
get_attr_chain(object, “attr.sub_attr_a.sub_attr_b”)</p>
<p>The function can be used to try and retrieve “sub_attribute_b” without an exception,
even in cases where “attr” or “sub_attr_a” might not exist.
In those cases, the function will return None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – An object</p></li>
<li><p><strong>attr_chain</strong> (<em>str</em>) – A string containing one attribute or several sub-attributes
separated by dots (i.e. - “attr.sub_attr_a.sub_attr_b”)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The requested attribute if found, otherwise None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_available_ocp_versions">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_available_ocp_versions</code><span class="sig-paren">(</span><em class="sig-param">channel</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_available_ocp_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all available OCP versions for specific channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channel</strong> (<em>str</em>) – Channel of OCP (e.g. stable-4.2 or fast-4.2)</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>list: Sorted list with OCP versions for specified channel.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_az_count">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_az_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_az_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Using a number of different configuration attributes, determine how many
availability zones the cluster is configured for.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>number of availability zones</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ceph_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ceph_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ceph_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the ceph version</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ceph version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_client_info">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_client_info</code><span class="sig-paren">(</span><em class="sig-param">ceph_nodes</em>, <em class="sig-param">clients</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_client_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_client_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_client_version</code><span class="sig-paren">(</span><em class="sig-param">client_binary_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_client_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get version reported by <cite>oc version</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client_binary_path</strong> (<em>str</em>) – path to <cite>oc</cite> binary</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>version reported by <cite>oc version</cite>.</dt><dd><p>None if the client does not exist at the provided path.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_cluster_id">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_cluster_id</code><span class="sig-paren">(</span><em class="sig-param">cluster_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_cluster_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ClusterID from metadata.json in given cluster_path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_path</strong> – path to cluster install directory</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>metadata.json[‘clusterID’]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_cluster_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_cluster_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_cluster_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cluster image</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cluster image</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_cluster_name">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_cluster_name</code><span class="sig-paren">(</span><em class="sig-param">cluster_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get clusterName from metadata.json in given cluster_path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_path</strong> – path to cluster install directory</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>metadata.json[‘clusterName’]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_cluster_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_cluster_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_cluster_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cluster version</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cluster version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_cluster_version_info">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_cluster_version_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_cluster_version_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the complete cluster version information</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cluster version information</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_csi_versions">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_csi_versions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_csi_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the CSI related version information</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>CSI related version information</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_default_if_keyval_empty">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_default_if_keyval_empty</code><span class="sig-paren">(</span><em class="sig-param">dictionary</em>, <em class="sig-param">key</em>, <em class="sig-param">default_val</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_default_if_keyval_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>if Key has an empty value OR key doesn’t exist
then return default value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> (<em>dict</em>) – Dictionary where we have to lookup</p></li>
<li><p><strong>key</strong> (<em>str</em>) – key to lookup</p></li>
<li><p><strong>default_val</strong> (<em>str</em>) – If key doesn’t have value then return
this default_val</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary[key] if value is present else default_val</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_image_with_digest">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_image_with_digest</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_image_with_digest" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image with sha256 digest for usage in disconnected environment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>str</em>) – image</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnexpectedImage" title="ocs_ci.ocs.exceptions.UnexpectedImage"><strong>UnexpectedImage</strong></a> – In case the image information is unexpected</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>image with sha256 digest specification</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_infra_id">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_infra_id</code><span class="sig-paren">(</span><em class="sig-param">cluster_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_infra_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get infraID from metadata.json in given cluster_path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cluster_path</strong> – path to cluster install directory</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>metadata.json[‘infraID’]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_kubeadmin_password">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_kubeadmin_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_kubeadmin_password" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_latest_acm_tag_unreleased">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_latest_acm_tag_unreleased</code><span class="sig-paren">(</span><em class="sig-param">version</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_latest_acm_tag_unreleased" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Latest tag for acm unreleased image</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><p>version (str): version of acm for getting latest tag</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>image tag for the specified version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TagNotFoundException" title="ocs_ci.ocs.exceptions.TagNotFoundException"><strong>TagNotFoundException</strong></a> – When the given version is not found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_latest_ds_olm_tag">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_latest_ds_olm_tag</code><span class="sig-paren">(</span><em class="sig-param">upgrade=False</em>, <em class="sig-param">latest_tag=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_latest_ds_olm_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns latest tag of OCS downstream registry or one before
latest if upgrade parameter is True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upgrade</strong> (<em>str</em>) – If True then it returns one version of the build before
the latest.</p></li>
<li><p><strong>latest_tag</strong> (<em>str</em>) – Tag of the latest build. If not specified
config.DEPLOYMENT[‘default_latest_tag’] or ‘latest’ will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>latest tag for downstream image from quay registry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TagNotFoundException" title="ocs_ci.ocs.exceptions.TagNotFoundException"><strong>TagNotFoundException</strong></a> – In case no tag found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_latest_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_latest_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">channel</em>, <em class="sig-param">index=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_latest_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Find latest OCP version for specific channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> (<em>str</em>) – Channel of OCP (e.g. stable-4.2 or fast-4.2)</p></li>
<li><p><strong>index</strong> (<em>int</em>) – Index to get from all available versions list
e.g. default -1 is latest version (version[-1]). If you want to get
previous version pass index -2 and so on.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>str: Latest OCP version for specified channel.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_module_ip">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_module_ip</code><span class="sig-paren">(</span><em class="sig-param">terraform_state_file</em>, <em class="sig-param">module</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_module_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the node IP from terraform.tfstate file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terraform_state_file</strong> (<em>str</em>) – Path to terraform state file</p></li>
<li><p><strong>module</strong> (<em>str</em>) – Module name in terraform.tfstate file
e.g: constants.LOAD_BALANCER_MODULE</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>IP of the node</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_next_version_available_for_upgrade">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_next_version_available_for_upgrade</code><span class="sig-paren">(</span><em class="sig-param">current_tag</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_next_version_available_for_upgrade" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the tag built after the current_version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>current_tag</strong> (<em>str</em>) – Current build tag from which to search the next one
build tag.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tag for downstream image from quay registry built after</dt><dd><p>the current_tag.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.TagNotFoundException" title="ocs_ci.ocs.exceptions.TagNotFoundException"><strong>TagNotFoundException</strong></a> – In case no tag suitable for upgrade found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocm_cli">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocm_cli</code><span class="sig-paren">(</span><em class="sig-param">version=None</em>, <em class="sig-param">bin_dir=None</em>, <em class="sig-param">force_download=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocm_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the OCM binary, if not already present.
Update env. PATH and get path of the OCM binary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – Version of the OCM to download</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force OCM download even if already present</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the OCM binary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocp_repo">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocp_repo</code><span class="sig-paren">(</span><em class="sig-param">rhel_major_version=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocp_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ocp repo file, name will be generated dynamically based on
ocp version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rhel_major_version</strong> (<em>int</em>) – Major version of RHEL. If not specified it will
take major version from config.ENV_DATA[“rhel_version”]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to ocp repo file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocp_upgrade_history">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocp_upgrade_history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocp_upgrade_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the OCP upgrade history for the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>List of OCP upgrade paths. Latest version in the</dt><dd><p>beginning of the list</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">seperator=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p><em>The deprecated form of ‘get current ocp version’</em>
Use ocs_ci/utility/version.py:get_semantic_ocp_version_from_config()</p>
<p>Get current ocp version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>seperator</strong> (<em>str</em>) – String that would seperate major and
minor version nubers</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If seperator is ‘None’, version string will be returned as is</dt><dd><p>eg: ‘4.2’, ‘4.3’.
If seperator is provided then ‘.’ in the version string would be
replaced by seperator and resulting string will be returned.
eg: If seperator is ‘_’ then string returned would be ‘4_2’</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocs_build_number">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocs_build_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocs_build_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the build number for ocs operator</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>build number for ocs operator version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocs_olm_operator_tags">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocs_olm_operator_tags</code><span class="sig-paren">(</span><em class="sig-param">limit=100</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocs_olm_operator_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the OCS OLM Operator repo and retrieve a list of tags. Since we are limited
to 100 tags per page, we end up making several API calls and combining the results
into a single list of tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>limit</strong> – the number of tags to limit the request to</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>KeyError</strong> – if the auth config isn’t setup properly</p></li>
<li><p><strong>requests.RequestException</strong> – if the response return code is not ok</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>OCS OLM Operator tags</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_ocs_version_from_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_ocs_version_from_image</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_ocs_version_from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse major.minor version from OCS image tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>str</em>) – image in format url:tag</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns</dt><dd><p>str: Version in x.y format</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – In case of the tag which we cannot parse to version.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_openshift_client">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_openshift_client</code><span class="sig-paren">(</span><em class="sig-param">version=None</em>, <em class="sig-param">bin_dir=None</em>, <em class="sig-param">force_download=False</em>, <em class="sig-param">skip_comparison=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_openshift_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the OpenShift client binary, if not already present.
Update env. PATH and get path of the oc binary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – Version of the client to download
(default: config.RUN[‘client_version’])</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force client download even if already present</p></li>
<li><p><strong>skip_comparison</strong> (<em>bool</em>) – Skip the comparison between the existing OCP client
version and the configured one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the client binary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_openshift_installer">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_openshift_installer</code><span class="sig-paren">(</span><em class="sig-param">version=None</em>, <em class="sig-param">bin_dir=None</em>, <em class="sig-param">force_download=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_openshift_installer" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the OpenShift installer binary, if not already present.
Update env. PATH and get path of the openshift installer binary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – Version of the installer to download</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force installer download even if already present</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the installer binary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_openshift_mirror_url">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_openshift_mirror_url</code><span class="sig-paren">(</span><em class="sig-param">file_name</em>, <em class="sig-param">version</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_openshift_mirror_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Format url to OpenShift mirror (for client and installer download).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – Name of file</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Version of the installer or client to download</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Url of the desired file (installer or client)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnsupportedOSType" title="ocs_ci.ocs.exceptions.UnsupportedOSType"><strong>UnsupportedOSType</strong></a> – In case the OS type is not supported</p></li>
<li><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.UnavailableBuildException" title="ocs_ci.ocs.exceptions.UnavailableBuildException"><strong>UnavailableBuildException</strong></a> – In case the build url is not reachable</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_pytest_fixture_value">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_pytest_fixture_value</code><span class="sig-paren">(</span><em class="sig-param">request</em>, <em class="sig-param">fixture_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_pytest_fixture_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of a fixture name from the request</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest'</em>) – The pytest request fixture</p></li>
<li><p><strong>fixture_name</strong> – Fixture for which this request is being performed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The fixture value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_random_str">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_random_str</code><span class="sig-paren">(</span><em class="sig-param">size=13</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_random_str" title="Permalink to this definition">¶</a></dt>
<dd><p>generates the random string of given size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>) – number of random characters to generate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string of random characters of given size</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_rook_repo">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_rook_repo</code><span class="sig-paren">(</span><em class="sig-param">branch='master'</em>, <em class="sig-param">to_checkout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_rook_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone and checkout the rook repository to specific branch/commit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>branch</strong> (<em>str</em>) – Branch name to checkout</p></li>
<li><p><strong>to_checkout</strong> (<em>str</em>) – Commit id or tag to checkout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_rook_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_rook_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_rook_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the rook version</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>rook version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_root_disk">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_root_disk</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_root_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the root (boot) disk for node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>str</em>) – Node name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Root disk</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_rosa_cli">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_rosa_cli</code><span class="sig-paren">(</span><em class="sig-param">version=None</em>, <em class="sig-param">bin_dir=None</em>, <em class="sig-param">force_download=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_rosa_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the ROSA binary, if not already present.
Update env. PATH and get path of the ROSA binary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – Version of the ROSA to download</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force ROSA download even if already present</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the rosa binary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_running_acm_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_running_acm_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_running_acm_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the currently deployed ACM version</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ACM version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_running_cluster_id">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_running_cluster_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_running_cluster_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get cluster UUID
Not relying on metadata.json as user sometimes want to run
only with kubeconfig for some tests. For this function to work
cluster has to be in running state</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cluster UUID</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_running_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_running_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">separator=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_running_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current running ocp version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>separator</strong> (<em>str</em>) – String that would separate major and
minor version numbers</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>If separator is ‘None’, version string will be returned as is</dt><dd><p>eg: ‘4.2’, ‘4.3’.
If separator is provided then ‘.’ in the version string would be
replaced by separator and resulting string will be returned.
eg: If separator is ‘_’ then string returned would be ‘4_2’</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_system_architecture">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_system_architecture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_system_architecture" title="Permalink to this definition">¶</a></dt>
<dd><p>Get output from ‘uname -m’ command run on first worker node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Architecture of system</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_terraform">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_terraform</code><span class="sig-paren">(</span><em class="sig-param">version=None</em>, <em class="sig-param">bin_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_terraform" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads the terraform binary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – Version of the terraform to download</p></li>
<li><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the terraform binary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_terraform_ignition_provider">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_terraform_ignition_provider</code><span class="sig-paren">(</span><em class="sig-param">terraform_dir</em>, <em class="sig-param">version=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_terraform_ignition_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads the terraform ignition provider</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terraform_dir</strong> (<em>str</em>) – Path to terraform working directory</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Version of the terraform ignition provider to download</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_testrun_name">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_testrun_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_testrun_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare testrun ID for Polarion (and other reports).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>String containing testrun name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_trim_mean">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_trim_mean</code><span class="sig-paren">(</span><em class="sig-param">values</em>, <em class="sig-param">percentage=20</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_trim_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the trimmed mean of a list of values.
Explanation: This function finds the arithmetic mean of given values,
ignoring values outside the given limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>list</em>) – The list of values</p></li>
<li><p><strong>percentage</strong> (<em>int</em>) – The percentage to be trimmed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Trimmed mean. In case trimmed mean calculation fails,</dt><dd><p>the regular mean average is returned</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_url_content">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_url_content</code><span class="sig-paren">(</span><em class="sig-param">url</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_url_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Return URL content</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – URL address to return</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – additional keyword arguments passed to requests.get(…)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Content of URL</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – When couldn’t load URL</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.get_vault_cli">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">get_vault_cli</code><span class="sig-paren">(</span><em class="sig-param">bind_dir=None</em>, <em class="sig-param">force_download=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.get_vault_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Download vault based on platform
basically for CLI purpose. Binary will be directly
put into ocs_ci/bin/ directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bind_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force vault cli download even if already present</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.inspect_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">inspect_image</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">authfile_fo</em>, <em class="sig-param">cluster_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.inspect_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>str</em>) – image to inspect</p></li>
<li><p><strong>authfile_fo</strong> (<em>NamedTemporaryFile</em>) – pull-secret required for pulling the given image</p></li>
<li><p><strong>cluster_config</strong> (<a class="reference internal" href="ocs_ci.framework.html#ocs_ci.framework.MultiClusterConfig" title="ocs_ci.framework.MultiClusterConfig"><em>MultiClusterConfig</em></a>) – Holds the context of a cluster</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>json object of the inspected image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.is_cluster_running">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">is_cluster_running</code><span class="sig-paren">(</span><em class="sig-param">cluster_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.is_cluster_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.kernel_client_io">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">kernel_client_io</code><span class="sig-paren">(</span><em class="sig-param">client</em>, <em class="sig-param">mounting_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.kernel_client_io" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.kernel_client_md5">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">kernel_client_md5</code><span class="sig-paren">(</span><em class="sig-param">kernel_clients</em>, <em class="sig-param">md5sum_list2</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.kernel_client_md5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.kernel_mount">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">kernel_mount</code><span class="sig-paren">(</span><em class="sig-param">mounting_dir</em>, <em class="sig-param">mon_node_ip</em>, <em class="sig-param">kernel_clients</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.kernel_mount" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.list_insert_at_position">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">list_insert_at_position</code><span class="sig-paren">(</span><em class="sig-param">lst</em>, <em class="sig-param">index</em>, <em class="sig-param">element</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.list_insert_at_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert an element into the list at a specific index
while shifting all the element one setp right to the index</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.load_auth_config">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">load_auth_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.load_auth_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the authentication config YAML from /data/auth.yaml</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>FileNotFoundError</strong> – if the auth config is not found</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary reprensenting the YAML file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.load_config_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">load_config_file</code><span class="sig-paren">(</span><em class="sig-param">config_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.load_config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads config file to the ocs-ci config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> (<em>str</em>) – Path to yaml config file.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – In the case the config file not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.login_to_mirror_registry">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">login_to_mirror_registry</code><span class="sig-paren">(</span><em class="sig-param">authfile</em>, <em class="sig-param">cluster_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.login_to_mirror_registry" title="Permalink to this definition">¶</a></dt>
<dd><p>Login to mirror registry</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>authfile</strong> (<em>str</em>) – authfile (pull-secret) path</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.mask_secrets">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">mask_secrets</code><span class="sig-paren">(</span><em class="sig-param">plaintext</em>, <em class="sig-param">secrets</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.mask_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace secrets in plaintext with asterisks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plaintext</strong> (<em>str</em><em> or </em><em>list</em>) – The plaintext to remove the secrets from or
list of strings to remove secrets from</p></li>
<li><p><strong>secrets</strong> (<em>list</em>) – List of secret strings to replace in the plaintext</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The censored version of plaintext</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.mds_fail_over">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">mds_fail_over</code><span class="sig-paren">(</span><em class="sig-param">mds_nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.mds_fail_over" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.mirror_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">mirror_image</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">cluster_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.mirror_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror image to mirror image registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>str</em>) – image to be mirrored, can be defined just with name or
with full url, with or without tag or digest</p></li>
<li><p><strong>cluster_config</strong> (<a class="reference internal" href="ocs_ci.framework.html#ocs_ci.framework.MultiClusterConfig" title="ocs_ci.framework.MultiClusterConfig"><em>MultiClusterConfig</em></a>) – Config object if single cluster, if its multicluster scenario
then we will have MultiClusterConfig object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the mirrored image link</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.mkdir_pinning">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">mkdir_pinning</code><span class="sig-paren">(</span><em class="sig-param">clients</em>, <em class="sig-param">range1</em>, <em class="sig-param">range2</em>, <em class="sig-param">dir_name</em>, <em class="sig-param">pin_val</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.mkdir_pinning" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.modify_csv">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">modify_csv</code><span class="sig-paren">(</span><em class="sig-param">csv</em>, <em class="sig-param">replace_from</em>, <em class="sig-param">replace_to</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.modify_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the CSV</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>csv</strong> (<em>str</em>) – The CSV name</p></li>
<li><p><strong>replace_from</strong> (<em>str</em>) – The pattern to replace from in the CSV</p></li>
<li><p><strong>replace_to</strong> (<em>str</em>) – The pattern to replace to in the CSV</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.move_summary_to_top">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">move_summary_to_top</code><span class="sig-paren">(</span><em class="sig-param">soup</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.move_summary_to_top" title="Permalink to this definition">¶</a></dt>
<dd><p>Move summary to the top of the eamil report</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.ocsci_log_path">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">ocsci_log_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.ocsci_log_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the full path for the log directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>full path for ocs-ci log directory</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.parse_html_for_email">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">parse_html_for_email</code><span class="sig-paren">(</span><em class="sig-param">soup</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.parse_html_for_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the html and filters out the unnecessary data/tags/attributes
for email reporting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>soup</strong> (<em>obj</em>) – BeautifulSoup object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.parse_pgsql_logs">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">parse_pgsql_logs</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.parse_pgsql_logs" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the pgsql benchmark data from ripsaw and return
the data in list format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>str</em>) – log data from pgsql bench run</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>data digestable by scripts with below format</dt><dd><p>e.g.:</p>
<blockquote>
<div><p>[
{1: {‘num_clients’: ‘2’,’num_threads’: ‘7’,’latency_avg’: ‘7’,
‘lat_stddev’: ‘0’, ‘tps_incl’: ‘234’, ‘tps_excl’: ‘243’},
{2: {‘num_clients’: ‘2’,’num_threads’: ‘7’,’latency_avg’: ‘7’,
‘lat_stddev’: ‘0’, ‘tps_incl’: ‘234’, ‘tps_excl’: ‘243’},
{3: {‘num_clients’: ‘2’,’num_threads’: ‘7’,’latency_avg’: ‘7’,
‘lat_stddev’: ‘0’, ‘tps_incl’: ‘234’, ‘tps_excl’: ‘243’},
]
where keys{1,2,3} are run-IDs</p>
</div></blockquote>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_data (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.pinned_dir_io">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">pinned_dir_io</code><span class="sig-paren">(</span><em class="sig-param">clients</em>, <em class="sig-param">mds_fail_over</em>, <em class="sig-param">num_of_files</em>, <em class="sig-param">range1</em>, <em class="sig-param">range2</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.pinned_dir_io" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.prepare_bin_dir">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">prepare_bin_dir</code><span class="sig-paren">(</span><em class="sig-param">bin_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.prepare_bin_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare bin directory for OpenShift client and installer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bin_dir</strong> (<em>str</em>) – Path to bin directory (default: config.RUN[‘bin_dir’])</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.prepare_customized_pull_secret">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">prepare_customized_pull_secret</code><span class="sig-paren">(</span><em class="sig-param">images=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.prepare_customized_pull_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare customized pull-secret containing auth section related to given
image(s). If image(s) not defined or no related section is found, it will
use whole content of pull-secret.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>images</strong> (<em>str</em><em>, </em><em>list</em>) – image (or images) to match with auth section</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>prepared pull-secret</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>NamedTemporaryFile</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.read_file_as_str">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">read_file_as_str</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.read_file_as_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the file content</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – File to read</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File contents in string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.remove_keys_from_tf_variable_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">remove_keys_from_tf_variable_file</code><span class="sig-paren">(</span><em class="sig-param">tf_file</em>, <em class="sig-param">keys</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.remove_keys_from_tf_variable_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the keys from the tf files and convert to json format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tf_file</strong> (<em>str</em>) – path to tf file</p></li>
<li><p><strong>keys</strong> (<em>list</em>) – list of keys to remove</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.replace_content_in_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">replace_content_in_file</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">old</em>, <em class="sig-param">new</em>, <em class="sig-param">match_and_replace_line=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.replace_content_in_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces contents in file, if old value is not found, it adds
new value to the file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em>) – Name of the file in which contents will be replaced</p></li>
<li><p><strong>old</strong> (<em>str</em>) – Data to search for</p></li>
<li><p><strong>new</strong> (<em>str</em>) – Data to replace the old value</p></li>
<li><p><strong>match_and_replace_line</strong> (<em>bool</em>) – If True, it will match a line if
<cite>old</cite> pattern is found in the line. The whole line will be replaced
with <cite>new</cite> content.
Otherwise it will replace only <cite>old</cite> string with <cite>new</cite> string but
the rest of the line will be intact. This is the default option.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.run_async">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">run_async</code><span class="sig-paren">(</span><em class="sig-param">command</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.run_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Run command locally and return without waiting for completion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – The command to run.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An open descriptor to be used by the calling function.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>command = ‘oc delete pvc pvc1’
proc = run_async(command)
ret, out, err = proc.async_communicate()</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.run_ceph_health_cmd">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">run_ceph_health_cmd</code><span class="sig-paren">(</span><em class="sig-param">namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.run_ceph_health_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the ceph health command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> – Namespace of OCS</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – In case the rook-ceph-tools pod failed to reach the Ready state.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The output of the ceph health command</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.run_cmd">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">run_cmd</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">secrets=None</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">ignore_error=False</em>, <em class="sig-param">threading_lock=None</em>, <em class="sig-param">silent=False</em>, <em class="sig-param">cluster_config=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.run_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p><em>The deprecated form of exec_cmd.</em>
Run an arbitrary command locally</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – command to run</p></li>
<li><p><strong>secrets</strong> (<em>list</em>) – A list of secrets to be masked with asterisks
This kwarg is popped in order to not interfere with
subprocess.run(<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout for the command, defaults to 600 seconds.</p></li>
<li><p><strong>ignore_error</strong> (<em>bool</em>) – True if ignore non zero return code and do not
raise the exception.</p></li>
<li><p><strong>threading_lock</strong> (<em>threading.Lock</em>) – threading.Lock object that is used
for handling concurrent oc commands</p></li>
<li><p><strong>silent</strong> (<em>bool</em>) – If True will silent errors from the server, default false</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – In case the command execution fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str) Decoded stdout of command</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.run_cmd_interactive">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">run_cmd_interactive</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">prompts_answers</em>, <em class="sig-param">timeout=300</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.run_cmd_interactive" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle interactive prompts with answers during subctl command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – Command to be executed</p></li>
<li><p><strong>prompts_answers</strong> (<em>dict</em>) – Prompts as keys and answers as values</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout in seconds, for pexpect to wait for prompt</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.InteractivePromptException" title="ocs_ci.ocs.exceptions.InteractivePromptException"><strong>InteractivePromptException</strong></a> – in case something goes wrong</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.run_cmd_multicluster">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">run_cmd_multicluster</code><span class="sig-paren">(</span><em class="sig-param">cmd</em>, <em class="sig-param">secrets=None</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">ignore_error=False</em>, <em class="sig-param">skip_index=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.run_cmd_multicluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Run command on multiple clusters. Useful in multicluster scenarios
This is wrapper around exec_cmd</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – command to be run</p></li>
<li><p><strong>secrets</strong> (<em>list</em>) – A list of secrets to be masked with asterisks
This kwarg is popped in order to not interfere with
subprocess.run(<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Timeout for the command, defaults to 600 seconds.</p></li>
<li><p><strong>ignore_error</strong> (<em>bool</em>) – True if ignore non zero return code and do not
raise the exception.</p></li>
<li><p><strong>skip_index</strong> (<em>list of int</em>) – List of indexes that needs to be skipped from executing the command</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.CommandFailed" title="ocs_ci.ocs.exceptions.CommandFailed"><strong>CommandFailed</strong></a> – In case the command execution fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>of CompletedProcess objects as per cluster’s index in config.clusters</dt><dd><p>i.e. [cluster1_completedprocess, None, cluster2_completedprocess]
if command execution skipped on a particular cluster then corresponding entry will have None</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.save_reports">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">save_reports</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.save_reports" title="Permalink to this definition">¶</a></dt>
<dd><p>Save reports of test run to logs directory</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.set_aws_region">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">set_aws_region</code><span class="sig-paren">(</span><em class="sig-param">region=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.set_aws_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports environment variable AWS_REGION</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>region</strong> (<em>str</em>) – AWS region to export</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.set_registry_to_managed_state">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">set_registry_to_managed_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.set_registry_to_managed_state" title="Permalink to this definition">¶</a></dt>
<dd><p>In order to be able to deploy from stage we need to change
image registry config to Managed state.
More described in BZs:
<a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=1806593">https://bugzilla.redhat.com/show_bug.cgi?id=1806593</a>
<a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=1807471#c3">https://bugzilla.redhat.com/show_bug.cgi?id=1807471#c3</a>
We need to change to managed state as described here:
<a class="reference external" href="https://github.com/red-hat-storage/ocs-ci/issues/1436">https://github.com/red-hat-storage/ocs-ci/issues/1436</a>
So this is not suppose to be deleted as WA case we really need to do
this operation for OCS deployment as was originally done here:
<a class="reference external" href="https://github.com/red-hat-storage/ocs-ci/pull/1437">https://github.com/red-hat-storage/ocs-ci/pull/1437</a>
Currently it has to be moved here to enable CA certificate to be
properly propagated for the stage deployment as mentioned in BZ.</p>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.set_selinux_permissions">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">set_selinux_permissions</code><span class="sig-paren">(</span><em class="sig-param">workers=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.set_selinux_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Workaround for #1777384 - enable container_use_cephfs on RHEL workers
Ticket: RHSTOR-787, see more details in the issue: #1151</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workers</strong> (<em>list</em>) – List of worker nodes to set selinux permissions</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.skipif_ocp_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">skipif_ocp_version</code><span class="sig-paren">(</span><em class="sig-param">expressions</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.skipif_ocp_version" title="Permalink to this definition">¶</a></dt>
<dd><p>This function evaluates the condition for test skip
based on expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expressions</strong> (<em>str OR list</em>) – condition for which we need to check,</p></li>
<li><p><strong>eg</strong> – A single expression string ‘&gt;=4.2’ OR
A list of expressions like [‘&lt;4.3’, ‘&gt;4.2’], [‘&lt;=4.3’, ‘&gt;=4.2’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘True’ if test needs to be skipped else ‘False’</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.skipif_ocs_version">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">skipif_ocs_version</code><span class="sig-paren">(</span><em class="sig-param">expressions</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.skipif_ocs_version" title="Permalink to this definition">¶</a></dt>
<dd><p>This function evaluates the condition for test skip
based on expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expressions</strong> (<em>str OR list</em>) – condition for which we need to check,</p></li>
<li><p><strong>eg</strong> – A single expression string ‘&gt;=4.2’ OR
A list of expressions like [‘&lt;4.3’, ‘&gt;4.2’], [‘&lt;=4.3’, ‘&gt;=4.2’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘True’ if test needs to be skipped else ‘False’</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.skipif_ui_not_support">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">skipif_ui_not_support</code><span class="sig-paren">(</span><em class="sig-param">ui_test</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.skipif_ui_not_support" title="Permalink to this definition">¶</a></dt>
<dd><p>This function evaluates the condition for ui test skip
based on ui_test expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ui_test</strong> (<em>str</em>) – condition for which we need to check,</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>‘True’ if test needs to be skipped else ‘False’</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.skipif_upgraded_from">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">skipif_upgraded_from</code><span class="sig-paren">(</span><em class="sig-param">version_list</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.skipif_upgraded_from" title="Permalink to this definition">¶</a></dt>
<dd><p>This function evaluates the condition to skip a test if the cluster
is upgraded from a particular OCS version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version_list</strong> (<em>list</em>) – List of versions to check</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if test needs to be skipped else False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.string_chunkify">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">string_chunkify</code><span class="sig-paren">(</span><em class="sig-param">cstring</em>, <em class="sig-param">csize</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.string_chunkify" title="Permalink to this definition">¶</a></dt>
<dd><p>Create string chunks of size csize from cstring and
yield chunk by chunk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cstring</strong> (<em>str</em>) – Original string which need to be chunkified</p></li>
<li><p><strong>csize</strong> (<em>int</em>) – size of each chunk</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.switch_to_correct_cluster_at_setup">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">switch_to_correct_cluster_at_setup</code><span class="sig-paren">(</span><em class="sig-param">request</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.switch_to_correct_cluster_at_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to the correct cluster index at setup, according to the ‘cluster_type’ fixture parameter
provided in the test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest'</em>) – The pytest request fixture</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.update_container_with_mirrored_image">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">update_container_with_mirrored_image</code><span class="sig-paren">(</span><em class="sig-param">job_pod_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.update_container_with_mirrored_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Job or Pod configuration dict with mirrored image (required for
disconnected installation).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_pod_dict</strong> (<em>dict</em>) – dictionary with Job or Pod configuration</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>for disconnected installation, returns updated Job or Pod dict,</dt><dd><p>for normal installation return unchanged job_pod_dict</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.upload_file">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">upload_file</code><span class="sig-paren">(</span><em class="sig-param">server</em>, <em class="sig-param">localpath</em>, <em class="sig-param">remotepath</em>, <em class="sig-param">user=None</em>, <em class="sig-param">password=None</em>, <em class="sig-param">key_file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.upload_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file to remote server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server</strong> (<em>str</em>) – Name of the server to upload</p></li>
<li><p><strong>localpath</strong> (<em>str</em>) – Local file to upload</p></li>
<li><p><strong>remotepath</strong> (<em>str</em>) – Target path on the remote server. filename should be included</p></li>
<li><p><strong>user</strong> (<em>str</em>) – User to use for the remote connection</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.wait_for_co">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">wait_for_co</code><span class="sig-paren">(</span><em class="sig-param">operator</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.wait_for_co" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for ClusterOperator to created</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>operator</strong> (<em>str</em>) – Name of the ClusterOperator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.wait_for_machineconfigpool_status">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">wait_for_machineconfigpool_status</code><span class="sig-paren">(</span><em class="sig-param">node_type</em>, <em class="sig-param">timeout=900</em>, <em class="sig-param">skip_tls_verify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.wait_for_machineconfigpool_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for Machineconfigpool status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_type</strong> (<em>str</em>) – The node type to check machineconfigpool
status is updated.
e.g: worker, master and all if we want to check for all nodes</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Time in seconds to wait</p></li>
<li><p><strong>skip_tls_verify</strong> (<em>bool</em>) – True if allow skipping TLS verification</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.wipe_all_disk_partitions_for_node">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">wipe_all_disk_partitions_for_node</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.wipe_all_disk_partitions_for_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Wipes out partition for all disks which has “nvme” prefix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>str</em>) – Name of the node (OCP Node)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.utils.wipe_partition">
<code class="sig-prename descclassname">ocs_ci.utility.utils.</code><code class="sig-name descname">wipe_partition</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">disk_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.utils.wipe_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Wipes out partition for disk using sgdisk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>str</em>) – Name of the node (OCP Node)</p></li>
<li><p><strong>disk_path</strong> (<em>str</em>) – Disk to wipe partition</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.version">
<span id="ocs-ci-utility-version-module"></span><h2>ocs_ci.utility.version module<a class="headerlink" href="#module-ocs_ci.utility.version" title="Permalink to this headline">¶</a></h2>
<p>Module for version related util functions.</p>
<dl class="function">
<dt id="ocs_ci.utility.version.compare_versions">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">compare_versions</code><span class="sig-paren">(</span><em class="sig-param">expression</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.compare_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate version comparison expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<em>str</em>) – expression string like ‘4.11&gt;=4.2’,
supported operators are: &gt;,&lt;,=&gt;,=&lt;,==,!=</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>evaluated comparison expression</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.version.get_ocs_version_from_csv">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">get_ocs_version_from_csv</code><span class="sig-paren">(</span><em class="sig-param">only_major_minor=False</em>, <em class="sig-param">ignore_pre_release=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.get_ocs_version_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns semantic OCS Version from the CSV (ODF if version &gt;= 4.9, OCS otherwise)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>only_major_minor</strong> (<em>bool</em>) – If True, only major and minor will be parsed.</p></li>
<li><p><strong>ignore_pre_release</strong> (<em>bool</em>) – If True, the pre release version will be ignored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Object of semantic version for OCS.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>semantic_version.base.Version</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.version.get_semantic_ocp_running_version">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">get_semantic_ocp_running_version</code><span class="sig-paren">(</span><em class="sig-param">separator=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.get_semantic_ocp_running_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returning running OCP semantic version from cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>separator</strong> (<em>str</em>) – String that would separate major and
minor version numbers</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Object of semantic version for OCP.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>semantic_version.base.Version</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.version.get_semantic_ocp_version_from_config">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">get_semantic_ocp_version_from_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.get_semantic_ocp_version_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returning OCP semantic version from config.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Object of semantic version for OCP.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>semantic_version.base.Version</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.version.get_semantic_ocs_version_from_config">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">get_semantic_ocs_version_from_config</code><span class="sig-paren">(</span><em class="sig-param">cluster_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.get_semantic_ocs_version_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returning OCS semantic version from config.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Object of semantic version for OCS.
cluster_config (MultiClusterConfig): config related to specific cluster in case of multicluster</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>semantic_version.base.Version</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.version.get_semantic_version">
<code class="sig-prename descclassname">ocs_ci.utility.version.</code><code class="sig-name descname">get_semantic_version</code><span class="sig-paren">(</span><em class="sig-param">version</em>, <em class="sig-param">only_major_minor=False</em>, <em class="sig-param">ignore_pre_release=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.version.get_semantic_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returning semantic version from provided version as string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em>) – String version (e.g. 4.6)</p></li>
<li><p><strong>only_major_minor</strong> (<em>bool</em>) – If True, only major and minor will be parsed.</p></li>
<li><p><strong>ignore_pre_release</strong> (<em>bool</em>) – If True, the pre release version will be ignored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Object of semantic version.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>semantic_version.base.Version</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.vsphere">
<span id="ocs-ci-utility-vsphere-module"></span><h2>ocs_ci.utility.vsphere module<a class="headerlink" href="#module-ocs_ci.utility.vsphere" title="Permalink to this headline">¶</a></h2>
<p>This module contains the vSphere related methods</p>
<dl class="class">
<dt id="ocs_ci.utility.vsphere.VSPHERE">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.vsphere.</code><code class="sig-name descname">VSPHERE</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">user</em>, <em class="sig-param">password</em>, <em class="sig-param">port=443</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>wrapper for vSphere</p>
<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.add_disk">
<code class="sig-name descname">add_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">size</em>, <em class="sig-param">disk_type='thin'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.add_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches disk to VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>size</strong> (<em>int</em>) – size of disk in GB</p></li>
<li><p><strong>disk_type</strong> (<em>str</em>) – disk type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.add_disks">
<code class="sig-name descname">add_disks</code><span class="sig-paren">(</span><em class="sig-param">num_disks</em>, <em class="sig-param">vm</em>, <em class="sig-param">size</em>, <em class="sig-param">disk_type='thin'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.add_disks" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds multiple disks to the VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_disks</strong> – number of disks to add</p></li>
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>size</strong> (<em>int</em>) – size of disk in GB</p></li>
<li><p><strong>disk_type</strong> (<em>str</em>) – disk type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.add_pci_device">
<code class="sig-name descname">add_pci_device</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">pci_device</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.add_pci_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches PCI device to VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>pci_device</strong> (<em>vim.vm.PciPassthroughInfo</em>) – PCI device to add</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.add_rdm_disk">
<code class="sig-name descname">add_rdm_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">device_name</em>, <em class="sig-param">disk_mode=None</em>, <em class="sig-param">compatibility_mode=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.add_rdm_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches RDM disk to vm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>device_name</strong> (<em>str</em>) – Device name to add to VM.
e.g:”/vmfs/devices/disks/naa.600304801b540c0125ef160f3048faba”</p></li>
<li><p><strong>disk_mode</strong> (<em>str</em>) – Disk mode. By default it will
add ‘independent_persistent’. Available modes are ‘append’,
‘independent_nonpersistent’, ‘independent_persistent’,
‘nonpersistent’, ‘persistent’, and ‘undoable’</p></li>
<li><p><strong>compatibility_mode</strong> (<em>str</em>) – Compatabilty mode. Either ‘physicalMode’
or ‘virtualMode’. By default it will add ‘physicalMode’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.available_storage_devices">
<code class="sig-name descname">available_storage_devices</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">datastore_type='VMFS'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.available_storage_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the available storage devices on Host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p></li>
<li><p><strong>datastore_type</strong> (<em>str</em>) – Type of datastore. Either VMFS or vsan
By default, it will take VMFS as datastore type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices available for use</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.change_vm_network_state">
<code class="sig-name descname">change_vm_network_state</code><span class="sig-paren">(</span><em class="sig-param">ip</em>, <em class="sig-param">dc</em>, <em class="sig-param">label='Network adapter 1'</em>, <em class="sig-param">network='VM Network'</em>, <em class="sig-param">timeout=10</em>, <em class="sig-param">connect=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.change_vm_network_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects or disconnects a VM’s network adapter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – The IP address of the VM.</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – The datacenter name where the VM is located.</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – The label of the network adapter to disconnect. Defaults to “Network adapter 1”.</p></li>
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the network to disconnect from. Defaults to “VM Network”.</p></li>
<li><p><strong>timeout</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum time to wait for the operation to complete. Defaults to 10 seconds.</p></li>
<li><p><strong>connect</strong> (<em>bool</em><em>, </em><em>optional</em>) – True to connect the network adapter, False to disconnect. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation was successful, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.check_folder_exists">
<code class="sig-name descname">check_folder_exists</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">cluster</em>, <em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.check_folder_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether folder exists in Templates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Folder name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if folder exists, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.clone_vm">
<code class="sig-name descname">clone_vm</code><span class="sig-paren">(</span><em class="sig-param">vm_name</em>, <em class="sig-param">template_name</em>, <em class="sig-param">datacenter_name</em>, <em class="sig-param">resource_pool_name</em>, <em class="sig-param">datastore_name</em>, <em class="sig-param">cluster_name</em>, <em class="sig-param">cpus=4</em>, <em class="sig-param">memory=8</em>, <em class="sig-param">root_disk_size=125829120</em>, <em class="sig-param">network_adapter='VM Network'</em>, <em class="sig-param">power_on=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.clone_vm" title="Permalink to this definition">¶</a></dt>
<dd><p>Clones the VM from template</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm_name</strong> (<em>str</em>) – Name of the VM to create</p></li>
<li><p><strong>template_name</strong> (<em>str</em>) – Template name to clone</p></li>
<li><p><strong>datacenter_name</strong> (<em>str</em>) – Name of the Datacenter</p></li>
<li><p><strong>resource_pool_name</strong> (<em>str</em>) – Name of the Resource Pool</p></li>
<li><p><strong>datastore_name</strong> (<em>str</em>) – Name of the Datastore</p></li>
<li><p><strong>cluster_name</strong> (<em>str</em>) – Name of the Cluster in Datacenter</p></li>
<li><p><strong>cpus</strong> (<em>int</em>) – Number of CPU’s</p></li>
<li><p><strong>memory</strong> (<em>int</em>) – Memory in MB</p></li>
<li><p><strong>root_disk_size</strong> (<em>int</em>) – Root Disk size in KB</p></li>
<li><p><strong>network_adapter</strong> (<em>str</em>) – Name of the Network Adapter</p></li>
<li><p><strong>power_on</strong> (<em>bool</em>) – True to power on the VM after cloning</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.destroy_folder">
<code class="sig-name descname">destroy_folder</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">cluster</em>, <em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.destroy_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the folder from Templates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Folder name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.destroy_pool">
<code class="sig-name descname">destroy_pool</code><span class="sig-paren">(</span><em class="sig-param">pool</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.destroy_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the Resource Pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pool</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.destroy_vms">
<code class="sig-name descname">destroy_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.destroy_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys the VM’s</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vms</strong> (<em>list</em>) – VM instance list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.erase_partition">
<code class="sig-name descname">erase_partition</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">device_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.erase_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Erase the partitions on the disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p></li>
<li><p><strong>device_path</strong> (<em>str</em>) – Device path to erase the partition
e.g:”/vmfs/devices/disks/naa.910229801b540c0125ef160f3048faba”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_datacenter_by_name">
<code class="sig-name descname">find_datacenter_by_name</code><span class="sig-paren">(</span><em class="sig-param">datacenter_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_datacenter_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the Datacenter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>datacenter_name</strong> (<em>str</em>) – Name of the Datacenter</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datacenter instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.Datacenter</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_datastore_by_name">
<code class="sig-name descname">find_datastore_by_name</code><span class="sig-paren">(</span><em class="sig-param">datastore_name</em>, <em class="sig-param">datacenter_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_datastore_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the Datastore</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore_name</strong> (<em>str</em>) – Name of the Datastore</p></li>
<li><p><strong>datacenter_name</strong> (<em>str</em>) – Name of the Datacenter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datastore instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.Datastore</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_ip_by_vm">
<code class="sig-name descname">find_ip_by_vm</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">datacenter_name</em>, <em class="sig-param">cluster_name</em>, <em class="sig-param">resource_pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_ip_by_vm" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the IP for the VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>str</em>) – Name of VM</p></li>
<li><p><strong>datacenter_name</strong> – Name of the Datacenter</p></li>
<li><p><strong>cluster_name</strong> – Name of the cluster</p></li>
<li><p><strong>resource_pool_name</strong> – Name of the Resource Pool</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>IP of the VM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_object_by_name">
<code class="sig-name descname">find_object_by_name</code><span class="sig-paren">(</span><em class="sig-param">content</em>, <em class="sig-param">name</em>, <em class="sig-param">obj_type</em>, <em class="sig-param">folder=None</em>, <em class="sig-param">recurse=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_object_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds object by given name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>vim.ServiceInstanceContent</em>) – Service Instance Content</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name to search</p></li>
<li><p><strong>obj_type</strong> (<em>list</em>) – list of vim.type
(e.g: For VM’s, type is vim.VirtualMachine
For Hosts, type is vim.HostSystem)</p></li>
<li><p><strong>folder</strong> (<em>str</em>) – Folder name</p></li>
<li><p><strong>recurse</strong> (<em>bool</em>) – True for recursive search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Type of vim instance
None: If vim.type doesn’t exists</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.type</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_resource_pool_by_name">
<code class="sig-name descname">find_resource_pool_by_name</code><span class="sig-paren">(</span><em class="sig-param">resource_pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_resource_pool_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the Resource Pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_pool_name</strong> (<em>str</em>) – Name of the Resource Pool</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resource Pool instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.find_vms_without_ip">
<code class="sig-name descname">find_vms_without_ip</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">datacenter_name</em>, <em class="sig-param">cluster_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.find_vms_without_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all VMs without IP from resource pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>datacenter_name</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster_name</strong> (<em>str</em>) – vSphere Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instances (vim.VirtualMachine)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_active_partition">
<code class="sig-name descname">get_active_partition</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_active_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the active partition disk on Host</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Active partition disk</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_active_partition_from_mount_info">
<code class="sig-name descname">get_active_partition_from_mount_info</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_active_partition_from_mount_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the active partition from mount info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Active partition disk</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_all_objs">
<code class="sig-name descname">get_all_objs</code><span class="sig-paren">(</span><em class="sig-param">content</em>, <em class="sig-param">vimtype</em>, <em class="sig-param">folder=None</em>, <em class="sig-param">recurse=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_all_objs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate objects of type vimtype</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>vim.ServiceInstanceContent</em>) – Service Instance Content</p></li>
<li><p><strong>vimtype</strong> (<em>vim.type</em>) – Type of vim
(e.g: For VM’s, type is vim.VirtualMachine
For Hosts, type is vim.HostSystem)</p></li>
<li><p><strong>folder</strong> (<em>str</em>) – Folder name</p></li>
<li><p><strong>recurse</strong> (<em>bool</em>) – True for recursive search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary of objects and corresponding name</dt><dd><dl class="simple">
<dt>e.g:{</dt><dd><p>‘vim.Datastore:datastore-12158’: ‘datastore1 (1)’,
‘vim.Datastore:datastore-12157’: ‘datastore1 (2)’
}</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_all_vms_in_dc">
<code class="sig-name descname">get_all_vms_in_dc</code><span class="sig-paren">(</span><em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_all_vms_in_dc" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches all VMs in Datacenter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of VMs instance in a Datacenter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_all_vms_in_pool">
<code class="sig-name descname">get_all_vms_in_pool</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_all_vms_in_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all VM’s in Resource pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instances (vim.VirtualMachine)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="ocs_ci.ocs.html#ocs_ci.ocs.exceptions.ResourcePoolNotFound" title="ocs_ci.ocs.exceptions.ResourcePoolNotFound"><strong>ResourcePoolNotFound</strong></a> – when Resource pool doesn’t exist</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_cluster">
<code class="sig-name descname">get_cluster</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cluster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Cluster name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cluster instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.ClusterComputeResource</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_compute_vms_in_pool">
<code class="sig-name descname">get_compute_vms_in_pool</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_compute_vms_in_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all compute VM’s in Resource pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instances (vim.VirtualMachine)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_content">
<em class="property">property </em><code class="sig-name descname">get_content</code><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the content</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Service Instance Content for Host</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>vim.ServiceInstanceContent</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_controller_for_adding_disk">
<code class="sig-name descname">get_controller_for_adding_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_controller_for_adding_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the controller for adding disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>controller instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_controllers">
<code class="sig-name descname">get_controllers</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_controllers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the controllers for VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of controllers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_datastore_free_capacity">
<code class="sig-name descname">get_datastore_free_capacity</code><span class="sig-paren">(</span><em class="sig-param">datastore_name</em>, <em class="sig-param">datacenter_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_datastore_free_capacity" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Datastore capacity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore_name</strong> (<em>str</em>) – Name of the Datastore</p></li>
<li><p><strong>datacenter_name</strong> (<em>str</em>) – Name of the Datacenter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datastore capacity in bytes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_datastore_type">
<code class="sig-name descname">get_datastore_type</code><span class="sig-paren">(</span><em class="sig-param">datastore</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_datastore_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Datastore Type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>datastore</strong> (<em>vim.Datastore</em>) – Datastore instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datastore type. Either VMFS or vsan</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_datastore_type_by_name">
<code class="sig-name descname">get_datastore_type_by_name</code><span class="sig-paren">(</span><em class="sig-param">datastore_name</em>, <em class="sig-param">datacenter_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_datastore_type_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Datastore Type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datastore_name</strong> (<em>str</em>) – Name of the Datastore</p></li>
<li><p><strong>datacenter_name</strong> (<em>str</em>) – Name of the Datacenter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datastore type. Either VMFS or vsan</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_dc">
<code class="sig-name descname">get_dc</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_dc" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Datacenter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Datacenter name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datacenter instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.Datacenter</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_device_by_key">
<code class="sig-name descname">get_device_by_key</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">identifier</em>, <em class="sig-param">key='unit_number'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_device_by_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the device by key, and a specific identifier</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) – The value of either ‘unit_number’
(Disk unit number to remove), ‘volume_path’
(The volume path in the datastore (i.e,
‘[vsanDatastore] d4210a5e-40ce-efb8-c87e-040973d176e1/control-plane-1.vmdk’),
or ‘disk_name’(The disk name (i.e, ‘scsi-36000c290a2cffeb9fcf4a5f748e21909’)</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Either ‘unit_number’, ‘volume_path’, or ‘disk_name’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The virtual disk device object that</dt><dd><p>matches the key and the identifier</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyVmomi.VmomiSupport.vim.vm.device.VirtualDisk</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_host">
<code class="sig-name descname">get_host</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the Host for the VM. Host where VM resides</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Host instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.HostSystem</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_host_obj">
<code class="sig-name descname">get_host_obj</code><span class="sig-paren">(</span><em class="sig-param">host_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_host_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the Host object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_name</strong> (<em>str</em>) – Host name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Host instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.HostSystem</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_lunids">
<code class="sig-name descname">get_lunids</code><span class="sig-paren">(</span><em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_lunids" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the LUN ids from the Datacenter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary contains host name as key and</dt><dd><dl class="simple">
<dt>values as list lun ids</dt><dd><dl class="simple">
<dt>e.g:{</dt><dd><p>‘HostName1’: [‘02000000193035e73d534’],
‘HostName2’: [‘020000000060034d43333’]
}</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices">
<code class="sig-name descname">get_mounted_devices</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">datastore_type='VMFS'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the available storage devices on Host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p></li>
<li><p><strong>datastore_type</strong> (<em>str</em>) – Type of datastore. Either VMFS or vsan
By default, it will take VMFS as datastore type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices available for use</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices_in_vmfs">
<code class="sig-name descname">get_mounted_devices_in_vmfs</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices_in_vmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the devices which was mounted in VMFS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices which was mounted</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices_in_vsan">
<code class="sig-name descname">get_mounted_devices_in_vsan</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_mounted_devices_in_vsan" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the devices which was mounted in VSAN</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices which was mounted</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_network_device">
<code class="sig-name descname">get_network_device</code><span class="sig-paren">(</span><em class="sig-param">ip</em>, <em class="sig-param">dc</em>, <em class="sig-param">label='Network adapter 1'</em>, <em class="sig-param">network='VM Network'</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_network_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the network adapter for a VM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – The IP address of the VM.</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – The datacenter name where the VM is located.</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – The label of the network adapter. Defaults to “Network adapter 1”.</p></li>
<li><p><strong>network</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the network. Defaults to “VM Network”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The network adapter, or None if not found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.vm.device.VirtualEthernetCard</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_passthrough_enabled_devices">
<code class="sig-name descname">get_passthrough_enabled_devices</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_passthrough_enabled_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the passthrough enabled devices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of PciPassthroughInfo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_pool">
<code class="sig-name descname">get_pool</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the Resource pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resource pool instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.ResourcePool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_search_index">
<em class="property">property </em><code class="sig-name descname">get_search_index</code><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_search_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the search index</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Instance of Search Index</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>vim.SearchIndex</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_storage_devices">
<code class="sig-name descname">get_storage_devices</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_storage_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches all the storage devices in the Host. It excludes
the enclosures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices in Host</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_unit_number">
<code class="sig-name descname">get_unit_number</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_unit_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the available unit number for the disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>available unit number for disk</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_used_devices">
<code class="sig-name descname">get_used_devices</code><span class="sig-paren">(</span><em class="sig-param">host</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_used_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the used storage devices in Host.</p>
<p>Note: Storage devices may be used in different Resource Pools
of OCS clusters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<em>vim.HostSystem</em>) – Host instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of storage devices used</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_used_unit_number">
<code class="sig-name descname">get_used_unit_number</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_used_unit_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the used unit numbers for a VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of unit numbers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_vm_by_ip">
<code class="sig-name descname">get_vm_by_ip</code><span class="sig-paren">(</span><em class="sig-param">ip</em>, <em class="sig-param">dc</em>, <em class="sig-param">vm_search=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_vm_by_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the VM using IP address</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – IP address</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>vm_search</strong> (<em>bool</em>) – Search for VMs if True, Hosts if False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.VirtualMachine</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_vm_in_pool_by_name">
<code class="sig-name descname">get_vm_in_pool_by_name</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em>, <em class="sig-param">pool</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_vm_in_pool_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the VM instance in a resource pool</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – VM name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
<li><p><strong>pool</strong> (<em>str</em>) – pool name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>vim.VirtualMachine</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_vm_power_status">
<code class="sig-name descname">get_vm_power_status</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_vm_power_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the VM power status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vm</em>) – VM object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM power status</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.get_vms_ips">
<code class="sig-name descname">get_vms_ips</code><span class="sig-paren">(</span><em class="sig-param">vms</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.get_vms_ips" title="Permalink to this definition">¶</a></dt>
<dd><p>Get VMs IPs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vms</strong> (<em>list</em>) – VM (vm) objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VMs IPs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.is_resource_pool_exist">
<code class="sig-name descname">is_resource_pool_exist</code><span class="sig-paren">(</span><em class="sig-param">pool</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.is_resource_pool_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether resource pool exists in cluster or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pool</strong> (<em>str</em>) – Resource pool name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if resource pool exists, otherwise False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.is_resource_pool_prefix_exist">
<code class="sig-name descname">is_resource_pool_prefix_exist</code><span class="sig-paren">(</span><em class="sig-param">pool_prefix</em>, <em class="sig-param">dc</em>, <em class="sig-param">cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.is_resource_pool_prefix_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether or not resource pool with the provided prefix exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pool_prefix</strong> (<em>str</em>) – The prefix to look for</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
<li><p><strong>cluster</strong> (<em>str</em>) – Cluster name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if a resource pool with the same name prefix exists, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.is_template_exist">
<code class="sig-name descname">is_template_exist</code><span class="sig-paren">(</span><em class="sig-param">template_name</em>, <em class="sig-param">dc</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.is_template_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether template exists in Datacenter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_name</strong> (<em>str</em>) – template name</p></li>
<li><p><strong>dc</strong> (<em>str</em>) – Datacenter name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if template exists, otherwise False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.is_vm_obj_exist">
<code class="sig-name descname">is_vm_obj_exist</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.is_vm_obj_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the vm object exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the VM object exists, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.map_lunids_to_devices">
<code class="sig-name descname">map_lunids_to_devices</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.map_lunids_to_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the LUN ids to storage devices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>dict</em>) – Host to LUN mapping
e.g:
<code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">get_lunids(dc)</span>
<span class="pre">map_lunids_to_devices(**data)</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary contains host instance as key and</dt><dd><p>value as list of device path</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.poweroff_vms">
<code class="sig-name descname">poweroff_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.poweroff_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers off the VM and wait for operation to complete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vms</strong> (<em>list</em>) – VM instance list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.poweron_vms">
<code class="sig-name descname">poweron_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.poweron_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Powers on the VM and wait for operation to complete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vms</strong> (<em>list</em>) – VM instance list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.remove_disk">
<code class="sig-name descname">remove_disk</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">identifier</em>, <em class="sig-param">key='unit_number'</em>, <em class="sig-param">datastore=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.remove_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the Disk from VM and datastore. By default, it will delete
the disk ( vmdk ) from VM and backend datastore. If datastore parameter
is set to False, then it will ONLY removes the disk from VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) – The value of either ‘unit_number’
(Disk unit number to remove), ‘volume_path’
(The volume path in the datastore (i.e,
‘[vsanDatastore] d4210a5e-40ce-efb8-c87e-040973d176e1/control-plane-1.vmdk’),
or ‘disk_name’(The disk name (i.e, ‘scsi-36000c290a2cffeb9fcf4a5f748e21909’)</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Either ‘unit_number’, ‘volume_path’, or ‘disk_name’</p></li>
<li><p><strong>datastore</strong> (<em>bool</em>) – Delete the disk (vmdk) from backend datastore
if True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.remove_disks">
<code class="sig-name descname">remove_disks</code><span class="sig-paren">(</span><em class="sig-param">vm</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.remove_disks" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all the extra disks for a VM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.remove_vms_from_inventory">
<code class="sig-name descname">remove_vms_from_inventory</code><span class="sig-paren">(</span><em class="sig-param">vms</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.remove_vms_from_inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the VM’s from inventory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vms</strong> (<em>list</em>) – VM instance list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.restart_vms">
<code class="sig-name descname">restart_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.restart_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart VMs by VM Reset or Guest reboot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – VM (vm) objects</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for Hard reboot(VM Reset),
False for Soft reboot(Guest Reboot)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.restart_vms_by_stop_and_start">
<code class="sig-name descname">restart_vms_by_stop_and_start</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">force=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.restart_vms_by_stop_and_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop and Start VMs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – VM (vm) objects</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for VM ungraceful power off, False for
graceful VM shutdown</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.start_vms">
<code class="sig-name descname">start_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.start_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Start VMs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – VM (vm) objects</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for VMs to start</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.stop_vms">
<code class="sig-name descname">stop_vms</code><span class="sig-paren">(</span><em class="sig-param">vms</em>, <em class="sig-param">force=True</em>, <em class="sig-param">wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.stop_vms" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop VMs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vms</strong> (<em>list</em>) – VM (vm) objects</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – True for VM ungraceful power off, False for
graceful VM shutdown</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Wait for the VMs to stop</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.wait_for_task">
<code class="sig-name descname">wait_for_task</code><span class="sig-paren">(</span><em class="sig-param">task</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.wait_for_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a task to finish</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>instance</em>) – Instance for the task</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VM instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere.VSPHERE.wait_for_vm_delete">
<code class="sig-name descname">wait_for_vm_delete</code><span class="sig-paren">(</span><em class="sig-param">vm</em>, <em class="sig-param">timeout=60</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere.VSPHERE.wait_for_vm_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the vm object to delete.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> (<em>vim.VirtualMachine</em>) – VM instance</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Time to wait for the VM object to delete.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the VM object is deleted in the given timeout, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.vsphere_nodes">
<span id="ocs-ci-utility-vsphere-nodes-module"></span><h2>ocs_ci.utility.vsphere_nodes module<a class="headerlink" href="#module-ocs_ci.utility.vsphere_nodes" title="Permalink to this headline">¶</a></h2>
<p>Module that contains operations related to vSphere nodes in a cluster
This module directly interacts with VM nodes</p>
<dl class="class">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode">
<em class="property">class </em><code class="sig-prename descclassname">ocs_ci.utility.vsphere_nodes.</code><code class="sig-name descname">VSPHERENode</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">user=None</em>, <em class="sig-param">private_key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that handles operations related to VM node</p>
<dl class="method">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode.reboot">
<code class="sig-name descname">reboot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode.reboot" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboots the node</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple which contains command return code, output and error</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode.replace_ntp_server_in_chrony">
<code class="sig-name descname">replace_ntp_server_in_chrony</code><span class="sig-paren">(</span><em class="sig-param">server=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode.replace_ntp_server_in_chrony" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace default NTP server to given server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>server</strong> (<em>str</em>) – NTP server</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode.restart_chrony">
<code class="sig-name descname">restart_chrony</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode.restart_chrony" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts chrony service</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successful restarts of chrony, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode.restart_service">
<code class="sig-name descname">restart_service</code><span class="sig-paren">(</span><em class="sig-param">service_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode.restart_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts the given service</p>
</dd></dl>

<dl class="method">
<dt id="ocs_ci.utility.vsphere_nodes.VSPHERENode.set_host_name">
<code class="sig-name descname">set_host_name</code><span class="sig-paren">(</span><em class="sig-param">host_name</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.VSPHERENode.set_host_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the host name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_name</strong> (<em>str</em>) – Name to set as host name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple which contains command return code, output and error</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.vsphere_nodes.get_node_ips_from_module">
<code class="sig-prename descclassname">ocs_ci.utility.vsphere_nodes.</code><code class="sig-name descname">get_node_ips_from_module</code><span class="sig-paren">(</span><em class="sig-param">module</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.get_node_ips_from_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the node IP’s in cluster from terraform state file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>module</strong> (<em>str</em>) – Module name in terraform.tfstate file
e.g: constants.COMPUTE_MODULE</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of module node IP’s</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.vsphere_nodes.update_ntp_and_restart_chrony">
<code class="sig-prename descclassname">ocs_ci.utility.vsphere_nodes.</code><code class="sig-name descname">update_ntp_and_restart_chrony</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">server=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.update_ntp_and_restart_chrony" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the NTP in the node and restarts chronyd service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>str</em>) – Hostname/IP of node</p></li>
<li><p><strong>server</strong> (<em>str</em>) – NTP server to update in chrony config</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.vsphere_nodes.update_ntp_compute_nodes">
<code class="sig-prename descclassname">ocs_ci.utility.vsphere_nodes.</code><code class="sig-name descname">update_ntp_compute_nodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.vsphere_nodes.update_ntp_compute_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates NTP server on all compute nodes</p>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility.workloadfixture">
<span id="ocs-ci-utility-workloadfixture-module"></span><h2>ocs_ci.utility.workloadfixture module<a class="headerlink" href="#module-ocs_ci.utility.workloadfixture" title="Permalink to this headline">¶</a></h2>
<p>This module contains functions implementing functionality of workload
fixtures in ocs-ci.</p>
<dl class="function">
<dt id="ocs_ci.utility.workloadfixture.is_measurement_done">
<code class="sig-prename descclassname">ocs_ci.utility.workloadfixture.</code><code class="sig-name descname">is_measurement_done</code><span class="sig-paren">(</span><em class="sig-param">result_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.workloadfixture.is_measurement_done" title="Permalink to this definition">¶</a></dt>
<dd><p>Has the measurement been already performed and stored in a result file?</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the measurement has been already performed.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ocs_ci.utility.workloadfixture.measure_operation">
<code class="sig-prename descclassname">ocs_ci.utility.workloadfixture.</code><code class="sig-name descname">measure_operation</code><span class="sig-paren">(</span><em class="sig-param">operation</em>, <em class="sig-param">result_file</em>, <em class="sig-param">minimal_time=None</em>, <em class="sig-param">metadata=None</em>, <em class="sig-param">measure_after=False</em>, <em class="sig-param">pagerduty_service_ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ocs_ci.utility.workloadfixture.measure_operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dictionary with keys ‘start’, ‘stop’, ‘metadata’ and ‘result’ that
contain information about start and stop time of given function and its
result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operation</strong> (<em>function</em>) – Function to be performed</p></li>
<li><p><strong>result_file</strong> (<em>str</em>) – File name that should contain measurement results
including logs in json format. If this file exists then it is
used for test.</p></li>
<li><p><strong>minimal_time</strong> (<em>int</em>) – Minimal number of seconds to monitor a system.
If provided then monitoring of system continues even when
operation is finshed. If not specified then measurement is finished
when operation is complete</p></li>
<li><p><strong>metadata</strong> (<em>dict</em>) – This can contain dictionary object with information
relevant to test (e.g. volume name, operating host, …)</p></li>
<li><p><strong>measure_after</strong> (<em>bool</em>) – Determine if time measurement is done before or
after the operation returns its state. This can be useful e.g.
for capacity utilization testing where operation fills capacity
and utilized data are measured after the utilization is completed</p></li>
<li><p><strong>pagerduty_service_ids</strong> (<em>list</em>) – Service IDs from PagerDuty system used
incidents query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>contains information about <cite>start</cite> and <cite>stop</cite> time of given</dt><dd><p>function and its <cite>result</cite> and provided <cite>metadata</cite>
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="mf">1569827653.1903834</span><span class="p">,</span>
    <span class="s1">&#39;stop&#39;</span><span class="p">:</span> <span class="mf">1569828313.6469617</span><span class="p">,</span>
    <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="s1">&#39;rook-ceph-osd-2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">},</span>
    <span class="s1">&#39;prometheus_alerts&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="o">...</span><span class="p">},</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ocs_ci.utility">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ocs_ci.utility" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ocs_ci.utility.perf_dash.html" class="btn btn-neutral float-right" title="ocs_ci.utility.perf_dash package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ocs_ci.tests.html" class="btn btn-neutral float-left" title="ocs_ci.tests package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, OCS-QE

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>