

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coding guidelines for OCS-CI project &mdash; OCS-CI  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
    <link rel="prev" title="Code review/contribution best practices in OCS-CI" href="code_review.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> OCS-CI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Package documentations:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">ocs_ci modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="code_review.html">Code review/contribution best practices in OCS-CI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Coding guidelines for OCS-CI project</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_platforms.html">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#usage-for-getting-various-ocs-image-versions">usage for getting various ocs image versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#usage-for-cleanup">usage for cleanup</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#usage-to-shutdown-aws-nodes-when-nodes-are-not-in-use">usage to shutdown AWS nodes when nodes are not in use</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#usage-for-ocs-build-tool">Usage for ocs-build tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_tests.html">Writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="stable_branch.html">Stable Branch</a></li>
<li class="toctree-l1"><a class="reference internal" href="readmefiles/conf.README.html">Config directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixture_usage.html">Guidelines for fixtures usage in OCS-CI</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit_tests.html">Unit tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="workarounds.html">Tracking of workarounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_guidelines.html">OCS-CI Release Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="usecases/index.html">Common Use cases and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="multicluster_test_example.html">Multi-cluster test example</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OCS-CI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Coding guidelines for OCS-CI project</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/coding_guidelines.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="coding-guidelines-for-ocs-ci-project">
<h1>Coding guidelines for OCS-CI project<a class="headerlink" href="#coding-guidelines-for-ocs-ci-project" title="Permalink to this headline">¶</a></h1>
<p>Let’s follow the following guidelines for the Core Libraries and Test Scripts</p>
<ul class="simple">
<li><p>Follow pep8 or use autopep8 to automagically conform to pep8 style.</p></li>
<li><p>Each Python Class is well documented for inheritance, methods and
attributes. Add sufficient comments for code block that is easy
to understand for others to review.
Use <a class="reference external" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html">Google Style of Python Docstrings</a></p></li>
<li><p>Code Readability takes priority, Lets avoid crazy hacks and tricks
and stick to straight forward code blocks that are easy to
understand for all.</p></li>
<li><p>For core libraries when possible please add the unittest to
minimize regression for many tests</p></li>
<li><p>Helper functions that are useful to wide variety of tests should
reside in utils and/or should be carefully reviewed to check if
they can actually be methods.</p></li>
<li><p>test_scripts will reside in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code> folder under the correct subsection
and will follow <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> conventions.</p></li>
<li><p>Do not use backslashes in the code for line breaker!</p></li>
<li><p>Line length should be maximum 79 characters!</p></li>
<li><p>Try to follow this convention for brackets and indentation like in example
below if the line doesn’t fit in 79 chars!  (This makes code much more
readable):</p></li>
<li><p>If you are introducing a workaround, follow rules noted in
<a class="reference internal" href="workarounds.html"><span class="doc">Tracking of workarounds</span></a> page.</p></li>
<li><p>We use <a class="reference external" href="https://black.readthedocs.io/en/stable/index.html">black</a> in our pre-commit hooks
to automatically format code before it hits code review. Our PR checks are also using
black to verify that code that has made it to review complies with our guidelines. If
black will take any action on the code (if reformatting is necessary) then the PR check
will fail.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">function</span><span class="p">(</span>
    <span class="n">parameter1</span><span class="p">,</span> <span class="n">parameter2</span><span class="p">,</span> <span class="n">parameter3</span><span class="p">,</span> <span class="n">parameter4</span><span class="p">,</span> <span class="n">parameter5</span><span class="p">,</span> <span class="n">parameter6</span><span class="p">,</span>
    <span class="n">parameter7</span><span class="o">=</span><span class="s1">&#39;Default value of param7&#39;</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;Hello, I am long string which can be easily split like this&quot;</span>
        <span class="s2">&quot;without using backslashes!&quot;</span>
    <span class="p">)</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;key1&#39;</span><span class="p">:</span> <span class="s2">&quot;Value is long and it looks better to have new line here&quot;</span><span class="p">,</span>
        <span class="s1">&#39;another_key&#39;</span><span class="p">:</span> <span class="s1">&#39;Another value&#39;</span><span class="p">,</span>  <span class="c1"># please keep comma at the end!</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Doing something here&quot;</span><span class="p">)</span>
        <span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">variable</span> <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="n">variable</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">if</span>
            <span class="n">variable</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">]</span>

        <span class="c1"># If line can fit in 79 chares do it as one liner (No need to split)!</span>
        <span class="n">my_list_fit_one_line</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>String formatting</strong>: use new style of string formatting:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;These are new style of Python formatting:&quot;</span><span class="p">)</span>
<span class="s2">&quot;My string </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="s2">&quot;My string </span><span class="si">{var_name}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="sa">f</span><span class="s2">&quot;This is the best and preferred way </span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># from Python 3.6</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is old style of formatting and should be avoided:&quot;</span><span class="p">)</span>
<span class="s2">&quot;My string </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">variable</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Docstring</strong>:</p></li>
<li><p>Use capital letters properly</p></li>
<li><p>Every docstring should describing easily what the function/class/etc. do</p></li>
<li><p>The description should be as follow:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_example</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function is for showing how a proper docstring should</span>
<span class="sd">    look like</span>

<span class="sd">    Args:</span>
<span class="sd">        arg1 (&lt;type of argument&gt;): Description of what this argument is and if</span>
<span class="sd">            the line is too long we will indent according to this (4 spaces)</span>
<span class="sd">        arg2 (int): This argument is an integer (default: 10)</span>

<span class="sd">    Raises:</span>
<span class="sd">        ExampleException: you get it</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: description of when returns False and when True.</span>
<span class="sd">            But this can also return anything else like int, str, list, etc.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Logging</strong>: let the logger format log message for you:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;My message </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">variable</span><span class="p">)</span>  <span class="c1"># No usage of % after string!</span>
<span class="c1"># This is still under consideration. We can set the style of logger</span>
<span class="c1"># format to use {} instead %s which is possible from Python 3.2.</span>
</pre></div>
</div>
<p>Here is the <a class="reference external" href="https://docs.python.org/3/howto/logging-cookbook.html#use-of-alternative-formatting-styles">Python documentation</a>
for Logger Styles.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting Started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="code_review.html" class="btn btn-neutral float-left" title="Code review/contribution best practices in OCS-CI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, OCS-QE

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>