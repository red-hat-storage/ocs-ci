apiVersion: v1
kind: Pod
metadata:
  name: fill-pool-pod
spec:
  containers:
  - name: filler
    image: busybox
    command:
    - sh
    - -c
    - echo "Filling PVC with zeros..."; dd if=/dev/zero of=/mnt/fill/testfile bs=${BLOCK_SIZE:-1M}
    env:
    - name: BLOCK_SIZE
      value: 1M
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 256Mi
    volumeMounts:
    - name: fill-volume
      mountPath: /mnt/fill
  volumes:
  - name: fill-volume
    persistentVolumeClaim:
      claimName: fill-pvc
  restartPolicy: Never
